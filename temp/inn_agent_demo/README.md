# INN Agent Demo - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞ –ø–æ–∏—Å–∫–∞ –ò–ù–ù

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ò–ù–ù (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ –Ω–∞–ª–æ–≥–æ–ø–ª–∞—Ç–µ–ª—å—â–∏–∫–∞) –Ω–∞ –≤–µ–±-—Å–∞–π—Ç–∞—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI –∞–≥–µ–Ω—Ç–∞.

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç AI –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –≤–µ–±-—Å–∞–π—Ç—É –∏ –ø–æ–∏—Å–∫–∞ –ò–ù–ù. –ê–≥–µ–Ω—Ç:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç Chrome —Å CDP (Chrome DevTools Protocol)
- –ù–∞–≤–∏–≥–∏—Ä—É–µ—Ç—Å—è –ø–æ —Å–∞–π—Ç—É, –ø–µ—Ä–µ—Ö–æ–¥—è –ø–æ —Å—Å—ã–ª–∫–∞–º "–û –∫–æ–º–ø–∞–Ω–∏–∏", "–ö–æ–Ω—Ç–∞–∫—Ç—ã", "–†–µ–∫–≤–∏–∑–∏—Ç—ã"
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç AI (Ollama) –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –æ —Å–ª–µ–¥—É—é—â–∏—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö
- –í—ã–≤–æ–¥–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+
- Google Chrome —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- Ollama —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ `http://127.0.0.1:11434`)
- –ú–æ–¥–µ–ª—å Qwen –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ Ollama (–Ω–∞–ø—Ä–∏–º–µ—Ä, `qwen2.5:14b`)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
cd temp/inn_agent_demo
python -m venv venv
```

2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Playwright –±—Ä–∞—É–∑–µ—Ä—ã (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã):
```bash
playwright install chromium
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (2 –∫–ª–∏–∫–∞)

**–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± - –¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ `start.bat`:**

1. –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ —Ñ–∞–π–ª `start.bat`
2. –í–≤–µ–¥–∏—Ç–µ –¥–æ–º–µ–Ω —Å–∞–π—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `example.com` –∏–ª–∏ `www.obi.ru`)
3. –ù–∞–∂–º–∏—Ç–µ Enter
4. –í—Å–µ –ª–æ–≥–∏ —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —ç—Ç–æ–º –∂–µ –æ–∫–Ω–µ

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–∑–¥–∞—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- –ó–∞–ø—É—Å—Ç–∏—Ç –∞–≥–µ–Ω—Ç–∞ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ü–æ–∫–∞–∂–µ—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

```bash
# –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å URL —Å –∏–ª–∏ –±–µ–∑ https://
python main.py example.com
python main.py https://example.com
python main.py www.obi.ru
```

### –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```bash
# –£–∫–∞–∑–∞—Ç—å –º–æ–¥–µ–ª—å Ollama
python main.py example.com --model qwen2.5:14b

# –£–∫–∞–∑–∞—Ç—å URL Ollama
python main.py example.com --ollama-url http://127.0.0.1:11434

# –£–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç Chrome CDP
python main.py example.com --chrome-port 9223

# –ù–µ –∑–∞–ø—É—Å–∫–∞—Ç—å Chrome –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–µ—Å–ª–∏ —É–∂–µ –∑–∞–ø—É—â–µ–Ω)
python main.py example.com --no-auto-chrome

# –ò–∑–º–µ–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
python main.py example.com --log-level INFO

# –ò–∑–º–µ–Ω–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
python main.py example.com --max-attempts 20
```

### –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```
positional arguments:
  url                   Website URL to search for INN

optional arguments:
  --chrome-port PORT    Chrome CDP port (default: 9222)
  --chrome-path PATH    Path to Chrome executable (auto-detected if not specified)
  --no-auto-chrome      Don't automatically start Chrome (assume it's already running)
  --ollama-url URL      Ollama API URL (default: http://127.0.0.1:11434)
  --model NAME          Ollama model name (default: from config)
  --max-attempts N      Maximum number of search attempts (default: 15)
  --log-level LEVEL     Logging level: DEBUG, INFO, WARNING, ERROR (default: DEBUG)
```

## –õ–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–≤–æ–¥–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –∞–≥–µ–Ω—Ç–∞:

### –ü—Ä–µ—Ñ–∏–∫—Å—ã –ª–æ–≥–æ–≤

- `[AGENT]` - –¥–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç–∞ (–Ω–∞–≤–∏–≥–∞—Ü–∏—è, –∫–ª–∏–∫–∏, —Å–∫—Ä–æ–ª–ª)
- `[AI]` - —Ä–µ—à–µ–Ω–∏—è AI (DecisionEngine)
- `[BROWSER]` - –¥–µ–π—Å—Ç–≤–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
- `[INN]` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –ò–ù–ù
- `[RESULT]` - —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤

```
[2025-01-01 12:00:00] [INFO] [AGENT] - Starting INN search for website: https://example.com
[2025-01-01 12:00:01] [INFO] [BROWSER] - Connecting to Chrome CDP at http://127.0.0.1:9222...
[2025-01-01 12:00:02] [INFO] [BROWSER] - Browser connected successfully!
[2025-01-01 12:00:03] [INFO] [AGENT] - Navigating to https://example.com...
[2025-01-01 12:00:05] [DEBUG] [AI] - Requesting decision from Ollama (attempt 1/15)...
[2025-01-01 12:00:08] [INFO] [AI] - Decision: click (reasoning: Found link "–û –∫–æ–º–ø–∞–Ω–∏–∏", clicking...)
[2025-01-01 12:00:09] [INFO] [AGENT] - Executing action: click (target: –û –∫–æ–º–ø–∞–Ω–∏–∏)
[2025-01-01 12:00:10] [INFO] [BROWSER] - Successfully navigated! URL after navigation: https://example.com/about
[2025-01-01 12:00:12] [INFO] [INN] - INN found on contacts/about page via regex: 1234567890
[2025-01-01 12:00:13] [INFO] [RESULT] - [SUCCESS] INN found: 1234567890
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≥–µ–Ω—Ç

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Chrome**: –ê–≥–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Chrome —á–µ—Ä–µ–∑ CDP
2. **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π URL
3. **–ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**: –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —Å—Å—ã–ª–∫–∏
4. **–ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π**: AI (Ollama) –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:
   - –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ —Å—Å—ã–ª–∫—É "–û –∫–æ–º–ø–∞–Ω–∏–∏", "–ö–æ–Ω—Ç–∞–∫—Ç—ã", "–†–µ–∫–≤–∏–∑–∏—Ç—ã"
   - –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–Ω–∏–∑
   - –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥
   - –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ–∏—Å–∫ (–µ—Å–ª–∏ –ò–ù–ù –Ω–∞–π–¥–µ–Ω)
5. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π**: –ê–≥–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
6. **–ü–æ–≤—Ç–æ—Ä**: –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –ò–ù–ù –Ω–µ –±—É–¥–µ—Ç –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–∏—Å–∫ –ò–ù–ù –Ω–∞ —Å–∞–π—Ç–µ –∫–æ–º–ø–∞–Ω–∏–∏

```bash
# –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å URL –±–µ–∑ https:// - –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ–±–∞–≤–∏—Ç –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
python main.py www.obi.ru
# –∏–ª–∏
python main.py https://www.obi.ru
```

### –ü—Ä–∏–º–µ—Ä 2: –° —É–∫–∞–∑–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–∏

```bash
python main.py example.com --model qwen2.5:14b
```

### –ü—Ä–∏–º–µ—Ä 3: –ï—Å–ª–∏ Chrome —É–∂–µ –∑–∞–ø—É—â–µ–Ω

```bash
python main.py example.com --no-auto-chrome
```

### –ü—Ä–∏–º–µ—Ä 4: –° –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

```bash
python main.py example.com --log-level INFO
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### Chrome –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Chrome —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ Chrome: `--chrome-path "C:\Program Files\Google\Chrome\Application\chrome.exe"`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 9222 –Ω–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º

### Ollama –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Ollama –∑–∞–ø—É—â–µ–Ω: `ollama serve`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: `curl http://127.0.0.1:11434/api/tags`
- –£–∫–∞–∂–∏—Ç–µ –¥—Ä—É–≥–æ–π URL: `--ollama-url http://localhost:11434`

### –ú–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏: `ollama list`
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–æ–¥–µ–ª—å: `ollama pull qwen2.5:14b`
- –£–∫–∞–∂–∏—Ç–µ –º–æ–¥–µ–ª—å: `--model qwen2.5:14b`

### –ò–ù–ù –Ω–µ –Ω–∞–π–¥–µ–Ω

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —Å–∞–π—Ç–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –µ—Å—Ç—å –ò–ù–ù
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫: `--max-attempts 20`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã

```
temp/inn_agent_demo/
‚îú‚îÄ‚îÄ main.py              # –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
‚îú‚îÄ‚îÄ start_chrome.py      # –ó–∞–ø—É—Å–∫ Chrome —Å CDP
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ start.bat            # üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (2 –∫–ª–∏–∫–∞) - –ó–ê–ü–£–°–ö–ê–ô–¢–ï –≠–¢–û–¢ –§–ê–ô–õ!
‚îî‚îÄ‚îÄ run.bat              # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –¥–ª—è Windows (—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏)
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ `ollama_inn_extractor`:
- `app/agents/interactive_inn_finder.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –∞–≥–µ–Ω—Ç
- `app/agents/browser_agent.py` - —Ä–∞–±–æ—Ç–∞ —Å –±—Ä–∞—É–∑–µ—Ä–æ–º
- `app/agents/decision_engine.py` - –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π —á–µ—Ä–µ–∑ AI
- `app/agents/action_executor.py` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
- `app/ollama_client.py` - –∫–ª–∏–µ–Ω—Ç Ollama

## –õ–∏—Ü–µ–Ω–∑–∏—è

–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç–∞ B2B Platform.

