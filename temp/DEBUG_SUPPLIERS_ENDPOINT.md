# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–∫–∏ 500 –Ω–∞ `/moderator/suppliers`

## –ü—Ä–æ–±–ª–µ–º–∞
- Endpoint `/moderator/suppliers` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500 Internal Server Error
- CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –æ—Ç–≤–µ—Ç–µ
- –õ–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ Backend (–Ω–∏ middleware, –Ω–∏ endpoint –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è)
- –û—à–∏–±–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –î–û —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–ø—Ä–æ—Å –¥–æ—Ö–æ–¥–∏—Ç –¥–æ FastAPI
- –î—Ä—É–≥–∏–µ endpoints (`/health`, `/`) —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ

## –ü–æ–ø—ã—Ç–∫–∏ —Ä–µ—à–µ–Ω–∏—è

### ‚úÖ –ü–æ–ø—ã—Ç–∫–∞ 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ CORS middleware –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –æ—à–∏–±–æ–∫
**–§–∞–π–ª—ã:** `backend/app/main.py`
**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω `CORSExceptionMiddleware` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —Å CORS –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (`FastAPIHTTPException`, `Exception`, `RequestValidationError`)
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –î–û –≤–∫–ª—é—á–µ–Ω–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ùå –ù–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ - –æ—à–∏–±–∫–∞ –≤—Å–µ –µ—â–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –ª–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è

### ‚úÖ –ü–æ–ø—ã—Ç–∫–∞ 2: –£–ø—Ä–æ—â–µ–Ω–∏–µ endpoint –±–µ–∑ dependency `get_db`
**–§–∞–π–ª—ã:** `backend/app/transport/routers/moderator_suppliers.py`
**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –£–±—Ä–∞–ª dependency `db: AsyncSession = Depends(get_db)` –∏–∑ endpoint
- –£–ø—Ä–æ—Å—Ç–∏–ª –æ—Ç–≤–µ—Ç –¥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ dict –±–µ–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
- –î–æ–±–∞–≤–∏–ª `print()` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ùå –ù–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ - –æ—à–∏–±–∫–∞ –≤—Å–µ –µ—â–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –ª–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è

### ‚úÖ –ü–æ–ø—ã—Ç–∫–∞ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ stderr
**–§–∞–π–ª—ã:** `backend/app/main.py`, `backend/app/transport/routers/moderator_suppliers.py`
**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –ò–∑–º–µ–Ω–∏–ª `print()` –Ω–∞ `print(..., file=sys.stderr, flush=True)` –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
- –î–æ–±–∞–≤–∏–ª –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ middleware –∏ endpoint
- –î–æ–±–∞–≤–∏–ª –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è `RequestValidationError`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚è≥ –õ–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è - –æ—à–∏–±–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –î–û middleware

### ‚úÖ –ü–æ–ø—ã—Ç–∫–∞ 4: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `type` –Ω–∞ `supplier_type`
**–§–∞–π–ª—ã:** `backend/app/transport/routers/moderator_suppliers.py`
**–ì–∏–ø–æ—Ç–µ–∑–∞:** `type` - –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ –≤ Python, –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ query parameters
**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –ò–∑–º–µ–Ω–∏–ª `type: Optional[str] = Query(...)` –Ω–∞ `supplier_type: Optional[str] = Query(default=None, alias="type")`
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `type` –≤ URL, –Ω–æ –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–ª–æ–≤–æ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ùå –ù–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ - –æ—à–∏–±–∫–∞ –≤—Å–µ –µ—â–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

### ‚úÖ –ü–æ–ø—ã—Ç–∫–∞ 5: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö endpoints –±–µ–∑ query parameters
**–§–∞–π–ª—ã:** `backend/app/transport/routers/moderator_suppliers.py`
**–ì–∏–ø–æ—Ç–µ–∑–∞:** –ü—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ query parameters –∏–ª–∏ –≤ —Å–∞–º–æ–º endpoint `/suppliers`
**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –°–æ–∑–¥–∞–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö endpoints: `/suppliers-debug`, `/suppliers-minimal`, `/suppliers-simple`, `/test`
- –í—Å–µ –±–µ–∑ query parameters –∏ dependencies
- –î–æ–±–∞–≤–∏–ª –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ stderr

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚è≥ –ù–æ–≤—ã–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 404 (—Ä–æ—É—Ç–µ—Ä –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª—Å—è), –Ω–æ `/suppliers` –≤—Å–µ –µ—â–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500

### ‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ –≥–∏–ø–æ—Ç–µ–∑—ã
1. **–û—à–∏–±–∫–∞ –≤ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Pydantic** - –æ—Ç–∫–ª–æ–Ω–∏–ª, —Ç.–∫. —É–ø—Ä–æ—Å—Ç–∏–ª endpoint –¥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ dict
2. **–û—à–∏–±–∫–∞ –≤ dependency `get_db`** - –æ—Ç–∫–ª–æ–Ω–∏–ª, —Ç.–∫. —É–±—Ä–∞–ª dependency, –Ω–æ –æ—à–∏–±–∫–∞ –æ—Å—Ç–∞–ª–∞—Å—å
3. **–û—à–∏–±–∫–∞ –≤ –∑–∞–ø—Ä–æ—Å–µ –∫ –ë–î** - –æ—Ç–∫–ª–æ–Ω–∏–ª, —Ç.–∫. —É–±—Ä–∞–ª –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
4. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–ª–æ–≤–æ–º `type`** - –æ—Ç–∫–ª–æ–Ω–∏–ª, —Ç.–∫. –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ

## –¢–µ–∫—É—â–∞—è –≥–∏–ø–æ—Ç–µ–∑–∞
–û—à–∏–±–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ Starlette/Uvicorn –î–û —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–ø—Ä–æ—Å –¥–æ—Ö–æ–¥–∏—Ç –¥–æ FastAPI middleware. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
1. –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ query parameters (–Ω–æ –¥—Ä—É–≥–∏–µ endpoints —Å query parameters —Ä–∞–±–æ—Ç–∞—é—Ç)
2. –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–æ—É—Ç–µ—Ä–∞ `moderator_suppliers` (–Ω–æ —Ä–æ—É—Ç–µ—Ä –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ)
3. –û—à–∏–±–∫–∞ –≤ —Å–∞–º–æ–º FastAPI –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ endpoint `/moderator/suppliers`
4. –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ—Ä—è–¥–∫–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ middleware –∏–ª–∏ —Ä–æ—É—Ç–µ—Ä–æ–≤

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Backend** —á—Ç–æ–±—ã –Ω–æ–≤—ã–µ endpoints –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞—é—Ç –ª–∏ –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ endpoints (`/moderator/test`, `/moderator/suppliers-simple`)
3. –ï—Å–ª–∏ –Ω–æ–≤—ã–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç, –Ω–æ `/suppliers` –Ω–µ—Ç - –ø—Ä–æ–±–ª–µ–º–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞ –¥–ª—è —ç—Ç–æ–≥–æ endpoint
4. –ï—Å–ª–∏ –≤—Å–µ endpoints –≤ —Ä–æ—É—Ç–µ—Ä–µ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç - –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ä–æ—É—Ç–µ—Ä–µ –∏–ª–∏ –µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ Backend –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ (–¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è —Å `===`)

### ‚úÖ –ü–æ–ø—ã—Ç–∫–∞ 6: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ —É—Ä–æ–≤–Ω–µ Starlette
**–§–∞–π–ª—ã:** `backend/app/main.py`
**–ì–∏–ø–æ—Ç–µ–∑–∞:** –û—à–∏–±–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ Starlette –î–û —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–ø—Ä–æ—Å –¥–æ—Ö–æ–¥–∏—Ç –¥–æ FastAPI middleware
**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –î–æ–±–∞–≤–∏–ª –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –Ω–∞ —É—Ä–æ–≤–Ω–µ Starlette —á–µ—Ä–µ–∑ `app.add_exception_handler(Exception, ...)`
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ª–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ –≤ stderr –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚è≥ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

### ‚úÖ –ü–æ–ø—ã—Ç–∫–∞ 6: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ —É—Ä–æ–≤–Ω–µ Starlette
**–§–∞–π–ª—ã:** `backend/app/main.py`
**–ì–∏–ø–æ—Ç–µ–∑–∞:** –û—à–∏–±–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ Starlette –î–û —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–ø—Ä–æ—Å –¥–æ—Ö–æ–¥–∏—Ç –¥–æ FastAPI middleware
**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –î–æ–±–∞–≤–∏–ª –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –Ω–∞ —É—Ä–æ–≤–Ω–µ Starlette —á–µ—Ä–µ–∑ `app.add_exception_handler(Exception, ...)`
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ª–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ –≤ stderr –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚è≥ –õ–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è - –æ—à–∏–±–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –î–û Starlette

### ‚úÖ –ü–æ–ø—ã—Ç–∫–∞ 7: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ try-except –≤ endpoint
**–§–∞–π–ª—ã:** `backend/app/transport/routers/moderator_suppliers.py`
**–ì–∏–ø–æ—Ç–µ–∑–∞:** –û—à–∏–±–∫–∞ –º–æ–∂–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤–Ω—É—Ç—Ä–∏ endpoint –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –î–æ–±–∞–≤–∏–ª try-except –±–ª–æ–∫ –≤ endpoint –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –ª—é–±—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –î–æ–±–∞–≤–∏–ª –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ stderr

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚è≥ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

## –°—Ç–∞—Ç—É—Å
üü° –í –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ - –¥–æ–±–∞–≤–ª–µ–Ω try-except –≤ endpoint –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

## –í–∞–∂–Ω—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ: `=== FastAPI app created ===`, `=== CORS origins: ['http://localhost:3000', 'http://127.0.0.1:3000'] ===`
- –î—Ä—É–≥–∏–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç: `/health`, `/`
- –†–æ—É—Ç–µ—Ä –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ: –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –≤–∏–¥–Ω—ã
- –õ–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è - –∑–Ω–∞—á–∏—Ç –æ—à–∏–±–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –î–û middleware/endpoint
