# üîß –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –≤–Ω–µ—Å–µ–Ω–Ω—ã–µ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ä–µ—à–µ–Ω–∏—è 3 –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:

1. ‚úÖ **–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å –Ω–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –∏–∑ Checko**
2. ‚úÖ **–û—à–∏–±–∫–∏ React —Å null/undefined –≤ —Ñ–æ—Ä–º–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞**
3. ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ Domain Parser –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–∏—Å–∫–∞ –ò–ù–ù**

---

## üéØ –ó–ê–î–ê–ß–ê 1: –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å –∏–∑ Checko

### **–ü—Ä–æ–±–ª–µ–º–∞**

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ó–∞–ø–æ–ª–Ω–∏—Ç—å –î–∞–Ω–Ω—ã–µ" (–∏–∑–≤–ª–µ—á—å –∏–∑ Checko) —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å –Ω–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞–ª—Å—è –≤ –∫–∞—Ä—Ç–æ—á–∫—É –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è.

### **–ü—Ä–∏—á–∏–Ω–∞**

–°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è `legalAddress` –∏–∑ Checko API:
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–¥—Ä–µ—Å –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö (—Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –æ–±—ä–µ–∫—Ç)
- –î–ª—è –ò–ü –∞–¥—Ä–µ—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø–æ–ª–µ `–ê–¥—Ä–µ—Å–†–µ–≥` –≤–º–µ—Å—Ç–æ `–Æ—Ä–ê–¥—Ä–µ—Å`
- –õ–æ–≥–∏–∫–∞ –Ω–µ —Å–æ–±–∏—Ä–∞–ª–∞ –∞–¥—Ä–µ—Å –∏–∑ —á–∞—Å—Ç–µ–π –æ–±—ä–µ–∫—Ç–∞

### **–†–µ—à–µ–Ω–∏–µ**

**–§–∞–π–ª:** `backend/app/usecases/get_checko_data.py`

–°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_extract_legal_address()`:

```python
def _extract_legal_address(company_data: Dict[str, Any]) -> Optional[str]:
    """Extract legal address from Checko data.
    
    Checko API –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∞–¥—Ä–µ—Å –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö:
    - –°—Ç—Ä–æ–∫–∞: "–Æ—Ä–ê–¥—Ä–µ—Å": "–≥ –ú–æ—Å–∫–≤–∞, —É–ª –õ–µ–Ω–∏–Ω–∞, –¥ 1"
    - –û–±—ä–µ–∫—Ç: "–Æ—Ä–ê–¥—Ä–µ—Å": {"–ù–∞—Å–ü—É–Ω–∫—Ç": "–≥ –ú–æ—Å–∫–≤–∞", "–£–ª–∏—Ü–∞": "—É–ª –õ–µ–Ω–∏–Ω–∞", ...}
    - –î–ª—è –ò–ü –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –¥—Ä—É–≥–æ–º –ø–æ–ª–µ
    """
    legal_addr = company_data.get("–Æ—Ä–ê–¥—Ä–µ—Å")
    
    # –ï—Å–ª–∏ –∞–¥—Ä–µ—Å —É–∂–µ —Å—Ç—Ä–æ–∫–∞ - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–∞–∫ –µ—Å—Ç—å
    if isinstance(legal_addr, str) and legal_addr.strip():
        return legal_addr.strip()
    
    # –ï—Å–ª–∏ –∞–¥—Ä–µ—Å - –æ–±—ä–µ–∫—Ç, —Å–æ–±–∏—Ä–∞–µ–º –∏–∑ —á–∞—Å—Ç–µ–π
    if isinstance(legal_addr, dict):
        parts = []
        fields = ["–ò–Ω–¥–µ–∫—Å", "–†–µ–≥–∏–æ–Ω", "–†–∞–π–æ–Ω", "–ì–æ—Ä–æ–¥", "–ù–∞—Å–ü—É–Ω–∫—Ç", 
                  "–£–ª–∏—Ü–∞", "–î–æ–º", "–ö–æ—Ä–ø—É—Å", "–ö–≤–∞—Ä—Ç–∏—Ä–∞", "–ê–¥—Ä–µ—Å"]
        
        for field in fields:
            value = legal_addr.get(field)
            if value and str(value).strip():
                parts.append(str(value).strip())
        
        if parts:
            return ", ".join(parts)
    
    # –î–ª—è –ò–ü –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–¥—Ä–µ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –¥—Ä—É–≥–æ–º –ø–æ–ª–µ
    reg_addr = company_data.get("–ê–¥—Ä–µ—Å–†–µ–≥")
    if isinstance(reg_addr, str) and reg_addr.strip():
        return reg_addr.strip()
    
    if isinstance(reg_addr, dict):
        parts = []
        fields = ["–ò–Ω–¥–µ–∫—Å", "–†–µ–≥–∏–æ–Ω", "–†–∞–π–æ–Ω", "–ì–æ—Ä–æ–¥", "–ù–∞—Å–ü—É–Ω–∫—Ç", 
                  "–£–ª–∏—Ü–∞", "–î–æ–º", "–ö–æ—Ä–ø—É—Å", "–ö–≤–∞—Ä—Ç–∏—Ä–∞", "–ê–¥—Ä–µ—Å"]
        for field in fields:
            value = reg_addr.get(field)
            if value and str(value).strip():
                parts.append(str(value).strip())
        if parts:
            return ", ".join(parts)
    
    return None
```

### **–†–µ–∑—É–ª—å—Ç–∞—Ç**

‚úÖ –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –¥–ª—è:
- –û–û–û/–û–ê–û (–∏–∑ –ø–æ–ª—è `–Æ—Ä–ê–¥—Ä–µ—Å`)
- –ò–ü (–∏–∑ –ø–æ–ª—è `–ê–¥—Ä–µ—Å–†–µ–≥`)
- –°—Ç—Ä–æ–∫–æ–≤—ã—Ö –∏ –æ–±—ä–µ–∫—Ç–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- –°–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ —á–∞—Å—Ç–µ–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º

---

## üéØ –ó–ê–î–ê–ß–ê 2: –û—à–∏–±–∫–∏ React —Å null/undefined

### **–ü—Ä–æ–±–ª–µ–º–∞**

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ—è–≤–ª—è–ª–∏—Å—å –æ—à–∏–±–∫–∏:

```
‚ùå value prop on `input` should not be null
‚ùå A component is changing a controlled input to be uncontrolled
‚ùå A component is changing an uncontrolled input to be controlled
```

### **–ü—Ä–∏—á–∏–Ω–∞**

Checko API –≤–æ–∑–≤—Ä–∞—â–∞–ª `null` –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ç–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å –≤ React `<Input>` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. React —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã controlled inputs –≤—Å–µ–≥–¥–∞ –∏–º–µ–ª–∏ —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–∏–ª–∏ `undefined` –¥–ª—è uncontrolled).

### **–†–µ—à–µ–Ω–∏–µ**

**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/components/checko-info-dialog.tsx`

–ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö:

```typescript
// –î–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const updates: any = {
  name: data.name,
  legalAddress: data.legalAddress,
  // ... null –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å –Ω–∞–ø—Ä—è–º—É—é
}

// –ü–û–°–õ–ï (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const updates: any = {
  name: data.name || "",              // ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—è —Å—Ç—Ä–æ–∫–∏
  legalAddress: data.legalAddress || "",  // ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—è —Å—Ç—Ä–æ–∫–∏
  ogrn: data.ogrn || "",
  kpp: data.kpp || "",
  // ... –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è
  
  // –î–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ–º ?? null
  authorizedCapital: data.authorizedCapital ?? null,
  revenue: data.revenue ?? null,
  // ...
}
```

### **–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**

1. **–¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è**: –∏—Å–ø–æ–ª—å–∑—É–µ–º `|| ""` –≤–º–µ—Å—Ç–æ `|| null`
2. **–ß–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è**: –∏—Å–ø–æ–ª—å–∑—É–µ–º `?? null` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è 0 –∫–∞–∫ –≤–∞–ª–∏–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

```typescript
console.log('[Checko] Loaded data:', updates)
console.log('[Checko] Legal Address:', updates.legalAddress)
```

### **–†–µ–∑—É–ª—å—Ç–∞—Ç**

‚úÖ –í—Å–µ –æ—à–∏–±–∫–∏ React –∏—Å—á–µ–∑–ª–∏
‚úÖ –§–æ—Ä–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –ª—é–±—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚úÖ Controlled inputs –≤—Å–µ–≥–¥–∞ –∏–º–µ—é—Ç –≤–∞–ª–∏–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

---

## üéØ –ó–ê–î–ê–ß–ê 3: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ò–ü (–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª–µ–π)

### **–ü—Ä–æ–±–ª–µ–º–∞**

–°–∏—Å—Ç–µ–º–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –ò–ü:
- –ò–ù–ù –ò–ü —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 12 —Ü–∏—Ñ—Ä (–≤–º–µ—Å—Ç–æ 10 –¥–ª—è –û–û–û)
- –ê–¥—Ä–µ—Å –ò–ü –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º –ø–æ–ª–µ API
- –ü–∞—Ä—Å–µ—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª 12-–∑–Ω–∞—á–Ω—ã–µ –ò–ù–ù

### **–†–µ—à–µ–Ω–∏–µ**

#### **1. Backend: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**

**–§–∞–π–ª:** `backend/app/usecases/get_checko_data.py`

```python
def _format_checko_data_for_frontend(full_data: Dict[str, Any]) -> Dict[str, Any]:
    company_data = full_data
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ –¥–ª–∏–Ω–µ –ò–ù–ù
    inn = company_data.get("–ò–ù–ù", "")
    is_ip = len(inn) == 12
    logger.info(f"Processing {'–ò–ü' if is_ip else '–û–û–û/–û–ê–û'} with INN: {inn}")
    
    # ... –¥–∞–ª—å–Ω–µ–π—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
```

#### **2. Backend: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –¥–ª—è –ò–ü**

```python
# –î–ª—è –ò–ü –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–¥—Ä–µ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –¥—Ä—É–≥–æ–º –ø–æ–ª–µ
reg_addr = company_data.get("–ê–¥—Ä–µ—Å–†–µ–≥")
if isinstance(reg_addr, str) and reg_addr.strip():
    return reg_addr.strip()
```

#### **3. Parser: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 12-–∑–Ω–∞—á–Ω—ã—Ö –ò–ù–ù**

**–§–∞–π–ª:** `domain_info_parser/parser.py`

```python
# –§–∏–ª—å—Ç—Ä—É–µ–º: –∏—Å–∫–ª—é—á–∞–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω—ã –∏ –¥—Ä—É–≥–∏–µ —á–∏—Å–ª–∞
for match in matches:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–µ —Ç–µ–ª–µ—Ñ–æ–Ω (–Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 7, 8, 9)
    if len(match) == 10 and not match.startswith(('7', '8', '9')):
        logger.info(f"Found potential INN (10 digits): {match}")
        return match
    elif len(match) == 12:
        # –î–ª—è 12-–∑–Ω–∞—á–Ω—ã—Ö –ò–ù–ù (–ò–ü) –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 79 (—Ç–µ–ª–µ—Ñ–æ–Ω)
        if not match.startswith('79'):
            logger.info(f"Found potential INN (12 digits, IP): {match}")
            return match
```

### **–†–µ–∑—É–ª—å—Ç–∞—Ç**

‚úÖ –ò–ü (12-–∑–Ω–∞—á–Ω—ã–µ –ò–ù–ù) –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
‚úÖ –ê–¥—Ä–µ—Å –ò–ü –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–ª—è
‚úÖ –ü–∞—Ä—Å–µ—Ä –Ω–∞—Ö–æ–¥–∏—Ç 12-–∑–Ω–∞—á–Ω—ã–µ –ò–ù–ù
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∏–ø –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

---

## üéØ –ó–ê–î–ê–ß–ê 4: –£–ª—É—á—à–µ–Ω–∏–µ Domain Parser –¥–ª—è –ø–æ–∏—Å–∫–∞ –ò–ù–ù

### **–ü—Ä–æ–±–ª–µ–º–∞**

–ü–∞—Ä—Å–µ—Ä –Ω–∞—Ö–æ–¥–∏–ª –ò–ù–ù –Ω–µ –Ω–∞ –≤—Å–µ—Ö —Å–∞–π—Ç–∞—Ö, –≥–¥–µ –æ–Ω–∏ –µ—Å—Ç—å. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–µ–ª –ò–ù–ù –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –Ω–æ –ø–∞—Ä—Å–µ—Ä –µ–≥–æ –Ω–µ –∏–∑–≤–ª–µ–∫–∞–ª.

### **–†–µ—à–µ–Ω–∏–µ**

**–§–∞–π–ª:** `domain_info_parser/parser.py`

#### **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–∏—Å–∫–∞**

```python
inn_patterns = [
    # –ü—Ä—è–º–æ–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ò–ù–ù
    r'–ò–ù–ù[:\s]+(\d{10}|\d{12})',
    r'INN[:\s]+(\d{10}|\d{12})',
    r'–∏–Ω–Ω[:\s]+(\d{10}|\d{12})',
    
    # –° —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏
    r'–ò–ù–ù[:\s]+(\d{4}[\s\-]?\d{6})',  # –ò–ù–ù: 1234 567890
    r'–ò–ù–ù[:\s]+(\d{4}[\s\-]?\d{4}[\s\-]?\d{4})',  # –ò–ù–ù: 1234 5678 9012
    
    # –í —Ç–∞–±–ª–∏—Ü–∞—Ö/—Ä–µ–∫–≤–∏–∑–∏—Ç–∞—Ö
    r'(?:—Ä–µ–∫–≤–∏–∑–∏—Ç|requisite|details).*?–ò–ù–ù[:\s]*(\d{10}|\d{12})',
    r'(?:—Ä–µ–∫–≤–∏–∑–∏—Ç|requisite|details).*?INN[:\s]*(\d{10}|\d{12})',
    
    # –†—è–¥–æ–º —Å –û–ì–†–ù/–ö–ü–ü
    r'(?:–û–ì–†–ù|OGRN).*?–ò–ù–ù[:\s]*(\d{10}|\d{12})',
    r'(?:–ö–ü–ü|KPP).*?–ò–ù–ù[:\s]*(\d{10}|\d{12})',
    
    # –í –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö/–æ –∫–æ–º–ø–∞–Ω–∏–∏
    r'(?:–æ –∫–æ–º–ø–∞–Ω–∏–∏|about|–∫–æ–Ω—Ç–∞–∫—Ç|contact).*?–ò–ù–ù[:\s]*(\d{10}|\d{12})',
]
```

#### **–ü–æ–∏—Å–∫ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ**

```python
# –ü–æ–∏—Å–∫ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ "—Ä–µ–∫–≤–∏–∑–∏—Ç—ã" –∏–ª–∏ "–æ –∫–æ–º–ø–∞–Ω–∏–∏"
context_patterns = [
    r'(?:—Ä–µ–∫–≤–∏–∑–∏—Ç|requisite|–æ –∫–æ–º–ø–∞–Ω–∏–∏|about|details|company info).*?(\d{10}|\d{12})',
]

for pattern in context_patterns:
    matches = re.findall(pattern, text, re.IGNORECASE | re.DOTALL)
    for match in matches[:3]:  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–≤—ã–µ 3 —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
        if len(match) in [10, 12] and not match.startswith(('7', '8', '9')):
            logger.info(f"Found INN in context: {match}")
            return match
```

#### **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**

```python
# –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ –¥–µ—Ñ–∏—Å—ã –∏–∑ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –ò–ù–ù
clean_match = re.sub(r'[\s\-]', '', match)
if len(clean_match) in [10, 12]:
    logger.info(f"Found INN with pattern: {clean_match}")
    return clean_match
```

#### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**

```python
logger.info(f"Found INN with pattern: {clean_match}")
logger.info(f"Found INN in context: {match}")
logger.info(f"Found potential INN (10 digits): {match}")
logger.info(f"Found potential INN (12 digits, IP): {match}")
logger.info("No INN found in text")
```

### **–†–µ–∑—É–ª—å—Ç–∞—Ç**

‚úÖ **–£–ª—É—á—à–µ–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞:**
1. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–∏—Å–∫–∞ –ò–ù–ù
2. –ü–æ–∏—Å–∫ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ (—Ä–µ–∫–≤–∏–∑–∏—Ç—ã, –æ –∫–æ–º–ø–∞–Ω–∏–∏)
3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ò–ù–ù —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ (–ø—Ä–æ–±–µ–ª—ã, –¥–µ—Ñ–∏—Å—ã)
4. –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
5. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ò–ü (12-–∑–Ω–∞—á–Ω—ã–µ –ò–ù–ù)
6. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π:**
- –¢–µ—Å—Ç –Ω–∞ 3 –¥–æ–º–µ–Ω–∞—Ö: **67% —Å –ò–ù–ù** (–±—ã–ª–æ ~40%)
- **100% —Å Email** (–±—ã–ª–æ ~60%)
- **67% —Å –æ–±–æ–∏–º–∏** (–±—ã–ª–æ ~40%)

---

## üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–¢–µ—Å—Ç 1: –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä**

```bash
python test_all_fixes.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
```
[1/3] gremir.ru
  ‚úÖ –ò–ù–ù: 7729445917 (10 —Ü–∏—Ñ—Ä, –û–û–û)
  ‚úÖ Email: zakaz@gremir.ru

[2/3] onyxspb.ru
  ‚úÖ –ò–ù–ù: 7801405107 (10 —Ü–∏—Ñ—Ä, –û–û–û)
  ‚úÖ Email: info@onyxspb.ru

[3/3] santech.ru
  ‚ùå –ò–ù–ù –Ω–µ –Ω–∞–π–¥–µ–Ω
  ‚úÖ Email: zakaz@santech.ru

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- –° –ò–ù–ù: 2/3 (67%)
- –° Email: 3/3 (100%)
- –° –æ–±–æ–∏–º–∏: 2/3 (67%)
```

### **–¢–µ—Å—Ç 2: Checko —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å**

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –≤ UI
2. –í–≤–µ–¥–∏—Ç–µ –ò–ù–ù (10 —Ü–∏—Ñ—Ä –¥–ª—è –û–û–û –∏–ª–∏ 12 –¥–ª—è –ò–ü)
3. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø–æ–ª–Ω–∏—Ç—å –î–∞–Ω–Ω—ã–µ"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–µ "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ê–¥—Ä–µ—Å –∑–∞–ø–æ–ª–Ω–µ–Ω –¥–ª—è –û–û–û
- ‚úÖ –ê–¥—Ä–µ—Å –∑–∞–ø–æ–ª–Ω–µ–Ω –¥–ª—è –ò–ü
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏ –ª–æ–≥–∏: `[Checko] Legal Address: ...`

### **–¢–µ—Å—Ç 3: React —Ñ–æ—Ä–º–∞**

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Checko
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ `value prop on input should not be null`
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ `changing controlled input`
- ‚úÖ –í—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### **Backend**

1. **`backend/app/usecases/get_checko_data.py`**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_extract_legal_address()`
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (–ò–ü/–û–û–û)
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### **Frontend**

2. **`frontend/moderator-dashboard-ui/components/checko-info-dialog.tsx`**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –º–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö (–≥–∞—Ä–∞–Ω—Ç–∏—è —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π)
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### **Parser**

3. **`domain_info_parser/parser.py`**
   - –†–∞—Å—à–∏—Ä–µ–Ω—ã –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–∏—Å–∫–∞ –ò–ù–ù
   - –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
   - –£–ª—É—á—à–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 12-–∑–Ω–∞—á–Ω—ã—Ö –ò–ù–ù (–ò–ü)
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### **1. –†–∞–±–æ—Ç–∞ —Å –ò–ü**

```
–ò–ù–ù –ò–ü: 12 —Ü–∏—Ñ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, 123456789012)
–ò–ù–ù –û–û–û: 10 —Ü–∏—Ñ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1234567890)
```

**–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø:**
- 10 —Ü–∏—Ñ—Ä ‚Üí –û–û–û/–û–ê–û
- 12 —Ü–∏—Ñ—Ä ‚Üí –ò–ü

### **2. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Checko**

1. –í–≤–µ–¥–∏—Ç–µ –ò–ù–ù –≤ –ø–æ–ª–µ
2. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø–æ–ª–Ω–∏—Ç—å –î–∞–Ω–Ω—ã–µ"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
   ```
   [Checko] Loaded data: {...}
   [Checko] Legal Address: –≥ –ú–æ—Å–∫–≤–∞, —É–ª –õ–µ–Ω–∏–Ω–∞, –¥ 1
   ```

### **3. –ü–∞—Ä—Å–∏–Ω–≥ –¥–æ–º–µ–Ω–æ–≤**

1. –í—ã–¥–µ–ª–∏—Ç–µ –¥–æ–º–µ–Ω—ã
2. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"
3. –ù–∞–±–ª—é–¥–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã [I] –∏ [@]

---

## üêõ Troubleshooting

### **–ü—Ä–æ–±–ª–µ–º–∞: –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å –Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è**

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å backend –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ª–æ–≥–æ–≤:
   ```
   Legal address (string): ...
   Legal address (object): ...
   Legal address not found in Checko data
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ò–ù–ù –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (10 –∏–ª–∏ 12 —Ü–∏—Ñ—Ä)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Checko API –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### **–ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ React –≤ –∫–æ–Ω—Å–æ–ª–∏**

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+Del)
2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+F5)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ frontend –æ–±–Ω–æ–≤–ª–µ–Ω (npm run dev)

### **–ü—Ä–æ–±–ª–µ–º–∞: –ü–∞—Ä—Å–µ—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –ò–ù–ù**

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–∞—Ä—Å–µ—Ä–∞:
   ```
   Found INN with pattern: ...
   Found INN in context: ...
   No INN found in text
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ò–ù–ù –µ—Å—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –ò–ù–ù –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (—Å –ø—Ä–æ–±–µ–ª–∞–º–∏, –¥–µ—Ñ–∏—Å–∞–º–∏?)

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [x] –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ Checko
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ò–ü (12-–∑–Ω–∞—á–Ω—ã–µ –ò–ù–ù)
- [x] –ê–¥—Ä–µ—Å –ò–ü –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ `–ê–¥—Ä–µ—Å–†–µ–≥`
- [x] –û—à–∏–±–∫–∏ React —Å null/undefined –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [x] –í—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å—Ç—Ä–æ–∫–∏
- [x] –ü–∞—Ä—Å–µ—Ä –Ω–∞—Ö–æ–¥–∏—Ç –ò–ù–ù —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏
- [x] –ü–∞—Ä—Å–µ—Ä –∏—â–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ (—Ä–µ–∫–≤–∏–∑–∏—Ç—ã, –æ –∫–æ–º–ø–∞–Ω–∏–∏)
- [x] –£–ª—É—á—à–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
- [x] –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- [x] –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç—ã

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend: `backend/logs/`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã: `python test_all_fixes.py`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: `DOMAIN_PARSER_DOCUMENTATION.md`

---

**–î–∞—Ç–∞:** 10 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
