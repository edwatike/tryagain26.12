# –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞. –ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ª—é–±–æ–π –∏–∑ —ç—Ç–∏—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–µ–π –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑—É—á–∏ —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –∏ –ø—Ä–æ–≤–µ—Ä—å –≤—Å–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.**

**üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:**
- **–ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π**: [`docs/CHANGE_IMPACT_CHECKLIST.md`](CHANGE_IMPACT_CHECKLIST.md)
- **–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã**: [`.cursorrules`](../.cursorrules)
- **–ë–∏–±–ª–∏—è –æ—à–∏–±–æ–∫**: [`docs/TROUBLESHOOTING.md`](TROUBLESHOOTING.md)

---

## 1. Blacklist —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

### –û–ø–∏—Å–∞–Ω–∏–µ
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤ –∏–∑ blacklist –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤–µ–∑–¥–µ, –≥–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞. –î–æ–º–µ–Ω—ã, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ blacklist, –¥–æ–ª–∂–Ω—ã **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å—á–µ–∑–∞—Ç—å** –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ–º–µ—á–∞—Ç—å—Å—è.

### –ú–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### 1.1 –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/app/parsing-runs/[runId]/page.tsx`

**–§—É–Ω–∫—Ü–∏—è:** `loadData()`
- **–°—Ç—Ä–æ–∫–∏:** 112-119
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- **–ö–æ–¥:**
```typescript
// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è blacklist - –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º –¥–æ–º–µ–Ω—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
const blacklistedDomains = new Set(
  blacklistData.entries.map((e) => extractRootDomain(e.domain).toLowerCase())
)
const filtered = domainsData.entries.filter((entry) => {
  const rootDomain = extractRootDomain(entry.domain).toLowerCase()
  return !blacklistedDomains.has(rootDomain)
})
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Blacklist **–≤—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–≤–µ–∂–∏–º** (–Ω–µ –∏–∑ –∫—ç—à–∞) –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–ü–ï–†–ï–î –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π** –¥–æ–º–µ–Ω–æ–≤
- –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞ –≤ blacklist –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `invalidateBlacklistCache()` –∏ `loadData()`

#### 1.2 –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ - –∑–∞–≥—Ä—É–∑–∫–∞ URL
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/app/keywords/page.tsx`

**–§—É–Ω–∫—Ü–∏—è:** `loadUrlsForKeyword()`
- **–°—Ç—Ä–æ–∫–∏:** 190-204
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ URL –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ (–ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
- **–ö–æ–¥:**
```typescript
// –í—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º —Å–≤–µ–∂–∏–π blacklist (–Ω–µ –∏–∑ –∫—ç—à–∞) –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏
const blacklistResult = await getBlacklist({ limit: 1000 })
setCachedBlacklist(blacklistResult.entries)

const blacklistedDomains = new Set<string>()
blacklistResult.entries.forEach((e) => {
  blacklistedDomains.add(extractRootDomain(e.domain).toLowerCase())
})

// –§–ò–õ–¨–¢–†–ê–¶–ò–Ø BLACKLIST: –ò—Å–∫–ª—é—á–∞–µ–º –¥–æ–º–µ–Ω—ã –∏–∑ blacklist –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
const filteredEntries = domainsData.entries.filter((urlEntry) => {
  const rootDomain = extractRootDomain(urlEntry.domain).toLowerCase()
  return !blacklistedDomains.has(rootDomain)
})
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Blacklist **–≤—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–≤–µ–∂–∏–º** (–Ω–µ –∏–∑ –∫—ç—à–∞)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–ü–ï–†–ï–î –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π** –¥–æ–º–µ–Ω–æ–≤
- –ö—ç—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö

#### 1.3 –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ - –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/app/keywords/page.tsx`

**–§—É–Ω–∫—Ü–∏—è:** `loadKeywords()`
- **–°—Ç—Ä–æ–∫–∏:** 92-94
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ø–∏—Å–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ (–±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Blacklist –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –¥–æ–º–µ–Ω–æ–≤, –Ω–æ –Ω–µ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–∑–∂–µ –≤ `loadUrlsForKeyword()`

### –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–í—Å–µ–≥–¥–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω—ã:**
   ```typescript
   extractRootDomain(domain).toLowerCase()
   ```
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–≤ –∏–∑ blacklist –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
   - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞ –∏ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤

2. **–í—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–≤–µ–∂–∏–π blacklist –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
   ```typescript
   // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à
   const cachedBlacklist = getCachedBlacklist()
   
   // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –í—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–≤–µ–∂–∏–π
   const blacklistResult = await getBlacklist({ limit: 1000 })
   setCachedBlacklist(blacklistResult.entries) // –û–±–Ω–æ–≤–ª—è–µ–º –∫—ç—à
   ```

3. **–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ü–ï–†–ï–î –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π:**
   ```typescript
   // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π
   const filtered = domainsData.entries.filter(...)
   const grouped = groupByDomain(filtered)
   
   // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ—Å–ª–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
   const grouped = groupByDomain(domainsData.entries)
   const filtered = grouped.filter(...)
   ```

4. **–û–±–Ω–æ–≤–ª—è—Ç—å –∫—ç—à –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**
   ```typescript
   const blacklistResult = await getBlacklist({ limit: 1000 })
   setCachedBlacklist(blacklistResult.entries) // –û–±–Ω–æ–≤–ª—è–µ–º –∫—ç—à
   ```

5. **–ò–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫—ç—à –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ blacklist:**
   ```typescript
   await addToBlacklist({ domain, parsingRunId: runId })
   invalidateBlacklistCache() // –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞
   await loadData() // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
   ```

### –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ `/parsing-runs/[runId]` - –¥–æ–º–µ–Ω—ã –∏—Å—á–µ–∑–∞—é—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ `/keywords` - –¥–æ–º–µ–Ω—ã –∏—Å—á–µ–∑–∞—é—Ç –¥–ª—è –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –∫—ç—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–º–µ–Ω–æ–≤ –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Ä–µ–≥–∏—Å—Ç—Ä, –ø–æ–¥–¥–æ–º–µ–Ω—ã)

---

## 2. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–æ–º–µ–Ω–æ–≤ (Supplier/Reseller)

### –û–ø–∏—Å–∞–Ω–∏–µ
–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–æ–º–µ–Ω–æ–≤ (–ü–æ—Å—Ç–∞–≤—â–∏–∫/–†–µ—Å–µ–ª–ª–µ—Ä) –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã `moderator_suppliers`.

### –ú–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### 2.1 –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/app/parsing-runs/[runId]/page.tsx`

**–§—É–Ω–∫—Ü–∏—è:** `loadData()`
- **–°—Ç—Ä–æ–∫–∏:** 121-136, 139-165
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
- **–ö–æ–¥:**
```typescript
// –°–æ–∑–¥–∞—Ç—å Map –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –ø–æ –¥–æ–º–µ–Ω—É
const suppliersMap = new Map<string, { type: "supplier" | "reseller"; id: number }>()
suppliersData.suppliers.forEach((supplier) => {
  if (supplier.domain) {
    const rootDomain = extractRootDomain(supplier.domain).toLowerCase()
    suppliersMap.set(rootDomain, { type: supplier.type, id: supplier.id })
  }
})

// –ü—Ä–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–µ –¥–æ–±–∞–≤–ª—è–µ–º supplierType
const grouped = groupByDomain(filtered).map((group) => {
  const groupDomainLower = group.domain.toLowerCase()
  const supplierInfo = suppliersMap.get(groupDomainLower)
  
  return {
    ...group,
    supplierType: supplierInfo?.type || null,
    supplierId: supplierInfo?.id || null,
  }
})
```

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
- **–°—Ç—Ä–æ–∫–∏:** 439-444
- –ó–µ–ª–µ–Ω—ã–π –±–µ–π–¥–∂ "–ü–æ—Å—Ç–∞–≤—â–∏–∫" –¥–ª—è `supplierType === "supplier"`
- –§–∏–æ–ª–µ—Ç–æ–≤—ã–π –±–µ–π–¥–∂ "–†–µ—Å–µ–ª–ª–µ—Ä" –¥–ª—è `supplierType === "reseller"`

#### 2.2 –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/app/keywords/page.tsx`

**–§—É–Ω–∫—Ü–∏—è:** `loadUrlsForKeyword()`
- **–°—Ç—Ä–æ–∫–∏:** 173-180, 195-200
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ URL –¥–ª—è –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞
- **–ö–æ–¥:**
```typescript
const suppliersMap = new Map<string, "supplier" | "reseller">()
if (cachedSuppliers) {
  cachedSuppliers.forEach((supplier) => {
    if (supplier.domain) {
      const rootDomain = extractRootDomain(supplier.domain).toLowerCase()
      suppliersMap.set(rootDomain, supplier.type)
    }
  })
}

// –ü—Ä–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–µ –¥–æ–±–∞–≤–ª—è–µ–º supplierType
domainGroupsMap.set(rootDomain, {
  rootDomain,
  urls: [],
  supplierType: suppliersMap.get(rootDomain) || null,
  isBlacklisted: false,
})
```

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
- **–°—Ç—Ä–æ–∫–∏:** 357-366
- –ó–µ–ª–µ–Ω—ã–π –±–µ–π–¥–∂ "–ü–æ—Å—Ç–∞–≤—â–∏–∫" –¥–ª—è `supplierType === "supplier"`
- –§–∏–æ–ª–µ—Ç–æ–≤—ã–π –±–µ–π–¥–∂ "–†–µ—Å–µ–ª–ª–µ—Ä" –¥–ª—è `supplierType === "reseller"`

### –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–í—Å–µ–≥–¥–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω—ã –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏:**
   ```typescript
   const rootDomain = extractRootDomain(supplier.domain).toLowerCase()
   suppliersMap.set(rootDomain, { type: supplier.type, id: supplier.id })
   ```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Map –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞:**
   ```typescript
   const suppliersMap = new Map<string, { type: "supplier" | "reseller"; id: number }>()
   ```

3. **–°–æ—Ö—Ä–∞–Ω—è—Ç—å ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
   ```typescript
   supplierId: supplierInfo?.id || null
   ```

4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–µ —Ü–≤–µ—Ç–∞ –±–µ–π–¥–∂–µ–π:**
   - –ü–æ—Å—Ç–∞–≤—â–∏–∫: `bg-green-600 hover:bg-green-700 text-white`
   - –†–µ—Å–µ–ª–ª–µ—Ä: `bg-purple-600 hover:bg-purple-700 text-white`

### –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ `/parsing-runs/[runId]` - —Å—Ç–∞—Ç—É—Å—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ `/keywords` - —Å—Ç–∞—Ç—É—Å—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ —Ü–≤–µ—Ç–∞ –±–µ–π–¥–∂–µ–π –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## 3. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–æ–º–µ–Ω–æ–≤ (`groupByDomain`)

### –û–ø–∏—Å–∞–Ω–∏–µ
–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ URL –ø–æ –∫–æ—Ä–Ω–µ–≤—ã–º –¥–æ–º–µ–Ω–∞–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ `groupByDomain` –∏–∑ `lib/utils-domain.ts`.

### –ú–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### 3.1 –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/app/parsing-runs/[runId]/page.tsx`

**–§—É–Ω–∫—Ü–∏—è:** `loadData()`
- **–°—Ç—Ä–æ–∫–∏:** 139
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ blacklist
- **–ö–æ–¥:**
```typescript
let grouped = groupByDomain(filtered).map((group) => {
  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
})
```

#### 3.2 –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/app/keywords/page.tsx`

**–§—É–Ω–∫—Ü–∏—è:** `loadUrlsForKeyword()`
- **–°—Ç—Ä–æ–∫–∏:** 207-222
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ blacklist
- **–ö–æ–¥:**
```typescript
// –ì—Ä—É–ø–ø–∏—Ä—É–µ–º URL –ø–æ root domain (—Ç–æ–ª—å–∫–æ –Ω–µ blacklisted)
const domainGroupsMap = new Map<string, DomainGroup>()
filteredEntries.forEach((urlEntry) => {
  const rootDomain = extractRootDomain(urlEntry.domain).toLowerCase()
  // ...
})
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏, –Ω–æ —Å —Ç–µ–º–∏ –∂–µ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏.

### –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–í—Å–µ–≥–¥–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω—ã –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏:**
   ```typescript
   const rootDomain = extractRootDomain(entry.domain).toLowerCase()
   ```
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∫–ª—é—á –≤ Map –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
   - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

2. **–°–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
   ```typescript
   const rootDomain = extractRootDomain(entry.domain).toLowerCase()
   const displayDomain = extractRootDomain(entry.domain) // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π
   
   groups.set(rootDomain, {
     domain: displayDomain, // –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
     urls: [],
     totalUrls: 0,
   })
   ```

3. **–í–∫–ª—é—á–∞—Ç—å source –≤ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É:**
   ```typescript
   group.urls.push({
     url: entry.url,
     keyword: entry.keyword,
     source: entry.source, // –í–∞–∂–Ω–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞
     status: entry.status,
     createdAt: entry.createdAt,
   })
   ```

### –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –¥–æ–º–µ–Ω—ã –Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è (mc.ru –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Ä–µ–≥–∏—Å—Ç—Ä, –ø–æ–¥–¥–æ–º–µ–Ω—ã)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ source –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ `/parsing-runs/[runId]` –∏ `/keywords`

---

## 4. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (Suppliers, Blacklist)

### –û–ø–∏—Å–∞–Ω–∏–µ
–ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∏ blacklist –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ API –∑–∞–ø—Ä–æ—Å–æ–≤.

### –ú–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### 4.1 –ö—ç—à –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
**–§–∞–π–ª—ã:**
- `frontend/moderator-dashboard-ui/lib/cache.ts` - —Ñ—É–Ω–∫—Ü–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- `frontend/moderator-dashboard-ui/app/parsing-runs/[runId]/page.tsx` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- `frontend/moderator-dashboard-ui/app/keywords/page.tsx` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–§—É–Ω–∫—Ü–∏–∏:**
- `getCachedSuppliers()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –∫—ç—à–∞
- `setCachedSuppliers()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à
- `invalidateSuppliersCache()` - –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞

**–ü—Ä–∞–≤–∏–ª–∞:**
- –ö—ç—à –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ (–¥–∞–Ω–Ω—ã–µ –º–µ–Ω—è—é—Ç—Å—è —Ä–µ–¥–∫–æ)
- –ö—ç—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
- –°—Ä–æ–∫ –∂–∏–∑–Ω–∏ –∫—ç—à–∞: 5 –º–∏–Ω—É—Ç

#### 4.2 –ö—ç—à blacklist
**–§–∞–π–ª—ã:**
- `frontend/moderator-dashboard-ui/lib/cache.ts` - —Ñ—É–Ω–∫—Ü–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- `frontend/moderator-dashboard-ui/app/blacklist/page.tsx` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–§—É–Ω–∫—Ü–∏–∏:**
- `getCachedBlacklist()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –∫—ç—à–∞
- `setCachedBlacklist()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à
- `invalidateBlacklistCache()` - –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞

**–ü—Ä–∞–≤–∏–ª–∞:**
- **–í–ê–ñ–ù–û:** Blacklist –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑ –∫—ç—à–∞ –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
- Blacklist –≤—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–≤–µ–∂–∏–º –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏
- –ö—ç—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ö—ç—à –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è –∏–∑ blacklist

### –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **Blacklist –≤—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–≤–µ–∂–∏–º –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
   ```typescript
   // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à
   const cachedBlacklist = getCachedBlacklist()
   
   // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –í—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–≤–µ–∂–∏–π
   const blacklistResult = await getBlacklist({ limit: 1000 })
   setCachedBlacklist(blacklistResult.entries) // –û–±–Ω–æ–≤–ª—è–µ–º –∫—ç—à
   ```

2. **–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑ –∫—ç—à–∞:**
   ```typescript
   const cachedSuppliers = getCachedSuppliers()
   if (cachedSuppliers) {
     // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à
   } else {
     // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏ –∫—ç—à–∏—Ä—É–µ–º
     const suppliersResult = await getSuppliers({ limit: 1000 })
     setCachedSuppliers(suppliersResult.suppliers)
   }
   ```

3. **–ò–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫—ç—à –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
   ```typescript
   await addToBlacklist({ domain })
   invalidateBlacklistCache() // –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è
   await loadData() // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
   ```

4. **–û–±–Ω–æ–≤–ª—è—Ç—å –∫—ç—à –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**
   ```typescript
   const blacklistResult = await getBlacklist({ limit: 1000 })
   setCachedBlacklist(blacklistResult.entries) // –û–±–Ω–æ–≤–ª—è–µ–º –∫—ç—à
   ```

### –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ blacklist –≤—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–≤–µ–∂–∏–º –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –∫—ç—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –∫—ç—à –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑ –∫—ç—à–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ —Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ –∫—ç—à–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (5 –º–∏–Ω—É—Ç)

---

## 5. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ URL (Google/Yandex)

### –û–ø–∏—Å–∞–Ω–∏–µ
–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∫–∞–∂–¥–æ–≥–æ URL (Google, –Ø–Ω–¥–µ–∫—Å –∏–ª–∏ –æ–±–∞) —Ä—è–¥–æ–º —Å URL –≤ —Å–ø–∏—Å–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

### –ú–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### 5.1 –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/app/parsing-runs/[runId]/page.tsx`

**–§—É–Ω–∫—Ü–∏—è:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ `AccordionContent`
- **–°—Ç—Ä–æ–∫–∏:** 533-570
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –ü—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ URL –¥–ª—è –¥–æ–º–µ–Ω–∞
- **–ö–æ–¥:**
```typescript
{group.urls.map((urlEntry, idx) => (
  <div key={idx}>
    <a href={urlEntry.url}>{urlEntry.url}</a>
    {/* –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ URL */}
    {urlEntry.source === "google" && (
      <Badge variant="outline" className="bg-blue-100 text-blue-700 border-blue-300">
        Google
      </Badge>
    )}
    {urlEntry.source === "yandex" && (
      <Badge variant="outline" className="bg-yellow-100 text-yellow-700 border-yellow-300">
        –Ø–Ω–¥–µ–∫—Å
      </Badge>
    )}
    {urlEntry.source === "both" && (
      <>
        <Badge>Google</Badge>
        <Badge>–Ø–Ω–¥–µ–∫—Å</Badge>
      </>
    )}
  </div>
))}
```

### –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ò—Å—Ç–æ—á–Ω–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ URL –æ—Ç–¥–µ–ª—å–Ω–æ:**
   - –ù–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–º–µ–Ω–∞, –∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ URL –≤ —Å–ø–∏—Å–∫–µ
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `urlEntry.source` –∏–∑ –¥–∞–Ω–Ω—ã—Ö

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–µ —Ü–≤–µ—Ç–∞ –±–µ–π–¥–∂–µ–π:**
   - Google: `bg-blue-100 text-blue-700 border-blue-300`
   - –Ø–Ω–¥–µ–∫—Å: `bg-yellow-100 text-yellow-700 border-yellow-300`

3. **–ï—Å–ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ "both", –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–±–∞ –±–µ–π–¥–∂–∞:**
   ```typescript
   {urlEntry.source === "both" && (
     <>
       <Badge>Google</Badge>
       <Badge>–Ø–Ω–¥–µ–∫—Å</Badge>
     </>
   )}
   ```

### –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ URL
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ —Ü–≤–µ—Ç–∞ –±–µ–π–¥–∂–µ–π –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ "both" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –¥–≤–∞ –±–µ–π–¥–∂–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–º–µ–Ω–∞

---

## 5.1 –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ (Google/–Ø–Ω–¥–µ–∫—Å)

### –û–ø–∏—Å–∞–Ω–∏–µ
–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (Google/–Ø–Ω–¥–µ–∫—Å) –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ `parsing_logs`. –ë–µ–π–¥–∂–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –∫–∞–∫–æ–π –ø–æ–∏—Å–∫–æ–≤–∏–∫ —Ä–µ–∞–ª—å–Ω–æ –Ω–∞—à–µ–ª URL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–µ–Ω–∞.

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `parsing_logs` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –∞ –Ω–µ `source` –∏–∑ –ë–î, —Ç–∞–∫ –∫–∞–∫ –≤ –ë–î –≤—Å–µ URL –∏–º–µ—é—Ç `source="both"` –∫–æ–≥–¥–∞ –æ–±–∞ –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞ —Ä–∞–±–æ—Ç–∞—é—Ç.

**üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [`docs/SOURCE_DETERMINATION_FLOW.md`](SOURCE_DETERMINATION_FLOW.md)

### –ú–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### 5.1.1 –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞ - –±–µ–π–¥–∂–∏ –¥–æ–º–µ–Ω–æ–≤
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/app/parsing-runs/[runId]/page.tsx`

**–§—É–Ω–∫—Ü–∏—è:** `loadData()` –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ `AccordionTrigger`
- **–°—Ç—Ä–æ–∫–∏:** 255-266 (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤), 583-592 (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–µ–π–¥–∂–µ–π)
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –¥–æ–º–µ–Ω–æ–≤
- **–ö–æ–¥:**
```typescript
// –ó–∞–≥—Ä—É–∑–∫–∞ parsing_logs
const parsingLogsForSources = logsData.parsing_logs && Object.keys(logsData.parsing_logs).length > 0 
  ? logsData.parsing_logs 
  : null

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–ª—è –¥–æ–º–µ–Ω–∞
const sources = collectDomainSources(group.urls, parsingLogsForSources)

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–µ–π–¥–∂–µ–π
{group.sources && group.sources.includes("google") && (
  <Badge variant="outline" className="bg-blue-100 text-blue-700 border-blue-300 text-xs">
    Google
  </Badge>
)}
{group.sources && group.sources.includes("yandex") && (
  <Badge variant="outline" className="bg-yellow-100 text-yellow-700 border-yellow-300 text-xs">
    –Ø–Ω–¥–µ–∫—Å
  </Badge>
)}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–º–µ–Ω–∞ (–¥–ª—è –≤—Å–µ—Ö URL –¥–æ–º–µ–Ω–∞)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `parsing_logs` –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –ë–µ–π–¥–∂–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ä—è–¥–æ–º —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –¥–æ–º–µ–Ω–∞ –≤ `AccordionTrigger`

#### 5.1.2 –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/app/page.tsx`

**–§—É–Ω–∫—Ü–∏—è:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ —Å–ø–∏—Å–∫–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤
- **–°—Ç—Ä–æ–∫–∏:** 759-772
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –ü—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –≤–æ –≤—Ä–µ–º—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `source` –∏–∑ `domains_queue` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö URL
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `collectDomainSources`, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–µ URL, –∞ –Ω–µ –¥–æ–º–µ–Ω—ã

#### 5.1.3 –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/lib/utils-domain.ts`

**–§—É–Ω–∫—Ü–∏—è:** `collectDomainSources()`
- **–°—Ç—Ä–æ–∫–∏:** 110-161
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –ü—Ä–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–µ –¥–æ–º–µ–Ω–æ–≤ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- **–ö–æ–¥:**
```typescript
export function collectDomainSources(
  urls: Array<{ url: string; source?: string | null }>,
  parsingLogs?: {
    google?: { last_links: string[] }
    yandex?: { last_links: string[] }
  } | null
): string[] {
  const sources = new Set<string>()
  
  if (parsingLogs) {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º parsing_logs –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
    for (const urlEntry of urls) {
      const normalizedUrl = normalizeUrl(urlEntry.url)
      
      if (parsingLogs.google?.last_links) {
        const foundInGoogle = parsingLogs.google.last_links.some(link => 
          normalizeUrl(link) === normalizedUrl
        )
        if (foundInGoogle) {
          sources.add("google")
        }
      }
      
      if (parsingLogs.yandex?.last_links) {
        const foundInYandex = parsingLogs.yandex.last_links.some(link => 
          normalizeUrl(link) === normalizedUrl
        )
        if (foundInYandex) {
          sources.add("yandex")
        }
      }
    }
  } else {
    // Fallback: –∏—Å–ø–æ–ª—å–∑—É–µ–º source –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    // ...
  }
  
  return Array.from(sources).sort()
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `parsing_logs` –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç URL –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

### –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å parsing_logs –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:**
   ```typescript
   // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å parsing_logs
   const sources = collectDomainSources(group.urls, parsingLogsForSources)
   
   // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ source –∏–∑ –ë–î
   const sources = collectDomainSources(group.urls)
   ```

2. **–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å URL –ø–µ—Ä–µ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º:**
   ```typescript
   // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å URL
   const normalizedUrl = normalizeUrl(urlEntry.url)
   const foundInGoogle = parsingLogs.google.last_links.some(link => 
     normalizeUrl(link) === normalizedUrl
   )
   ```

3. **–ó–∞–≥—Ä—É–∂–∞—Ç—å parsing_logs –≤–º–µ—Å—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏:**
   ```typescript
   // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ó–∞–≥—Ä—É–∂–∞—Ç—å parsing_logs –≤–º–µ—Å—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏
   const [runData, domainsData, logsData] = await Promise.all([
     getParsingRun(runId),
     getDomainsQueue({ parsingRunId: runId, limit: 1000 }),
     getParsingLogs(runId).catch(() => ({ parsing_logs: {} }))
   ])
   ```

4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–µ —Ü–≤–µ—Ç–∞ –±–µ–π–¥–∂–µ–π:**
   - Google: `bg-blue-100 text-blue-700 border-blue-300`
   - –Ø–Ω–¥–µ–∫—Å: `bg-yellow-100 text-yellow-700 border-yellow-300`

5. **–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–º–µ–Ω–∞:**
   - –ë–µ–π–¥–∂–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ä—è–¥–æ–º —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –¥–æ–º–µ–Ω–∞
   - –ù–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ URL –æ—Ç–¥–µ–ª—å–Ω–æ, –∞ –¥–ª—è –≤—Å–µ–≥–æ –¥–æ–º–µ–Ω–∞

### –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ parsing_logs –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ collectDomainSources –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å parsing_logs
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –±–µ–π–¥–∂–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–µ–Ω–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è URL —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ —Ü–≤–µ—Ç–∞ –±–µ–π–¥–∂–µ–π –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ parsing_logs, –∞ –Ω–µ source –∏–∑ –ë–î
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## 6. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (Polling)

### –û–ø–∏—Å–∞–Ω–∏–µ
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö —á–µ—Ä–µ–∑ polling (setInterval).

### –ú–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### 6.1 –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (Dashboard)
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/app/page.tsx`

**–§—É–Ω–∫—Ü–∏—è:** Polling –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
- **–°—Ç—Ä–æ–∫–∏:** 49-111
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª:** –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç–∞—Ç—É—Å–∞ (—á–∞—â–µ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –ø–∞—Ä—Å–∏–Ω–≥–µ)
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –ü—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –ø–∞—Ä—Å–∏–Ω–≥–µ (`parsingProgress.isRunning === true`)

#### 6.2 –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/app/keywords/page.tsx`

**–§—É–Ω–∫—Ü–∏—è:** Polling –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- **–°—Ç—Ä–æ–∫–∏:** 42-45
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª:** 30 —Å–µ–∫—É–Ω–¥
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –í—Å–µ–≥–¥–∞ (–ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)

### –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–û—á–∏—â–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:**
   ```typescript
   useEffect(() => {
     const interval = setInterval(() => {
       loadData()
     }, 30000)
     
     return () => clearInterval(interval) // –û—á–∏—Å—Ç–∫–∞
   }, [])
   ```

2. **–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å polling –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö:**
   ```typescript
   if (!parsingProgress.isRunning || !parsingProgress.runId) return
   ```

3. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ polling:**
   ```typescript
   try {
     await loadData()
   } catch (error) {
     console.error("Error in polling:", error)
     // –ù–µ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å polling –ø—Ä–∏ –æ—à–∏–±–∫–µ
   }
   ```

### –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ polling –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º

---

## 7. –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–º–µ–Ω–∞–º–∏

### –û–ø–∏—Å–∞–Ω–∏–µ
–§—É–Ω–∫—Ü–∏–∏ `extractRootDomain` –∏ `groupByDomain` –∏–∑ `lib/utils-domain.ts` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–µ–∑–¥–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–º–µ–Ω–∞–º–∏.

### –ú–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### 7.1 `extractRootDomain`
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/lib/utils-domain.ts`
- **–°—Ç—Ä–æ–∫–∏:** 2-23
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:**
  - `groupByDomain()` - –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–æ–≤
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è blacklist - –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–≤
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–æ–º–µ–Ω–æ–≤ - –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏

#### 7.2 `groupByDomain`
**–§–∞–π–ª:** `frontend/moderator-dashboard-ui/lib/utils-domain.ts`
- **–°—Ç—Ä–æ–∫–∏:** 25-73
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:**
  - `app/parsing-runs/[runId]/page.tsx` - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
  - `app/keywords/page.tsx` - —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ç–µ–º–∏ –∂–µ –ø—Ä–∞–≤–∏–ª–∞–º–∏

### –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–í—Å–µ–≥–¥–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω—ã:**
   ```typescript
   extractRootDomain(domain).toLowerCase()
   ```

2. **–°–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
   ```typescript
   const rootDomain = extractRootDomain(entry.domain).toLowerCase()
   const displayDomain = extractRootDomain(entry.domain) // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π
   ```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `extractRootDomain`:**
   - –ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
   - –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑ `lib/utils-domain.ts`

### –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –Ω–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —É—Ç–∏–ª–∏—Ç—ã

---

## –û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ç–æ—á–∫–∞–º–∏

### –ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º

1. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–æ—á–∏—Ç–∞–π —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç** –¥–ª—è –∑–∞—Ç—Ä–æ–Ω—É—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
2. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –Ω–∞–π–¥–∏ –≤—Å–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫ –ø–æ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ
3. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏—Å–ø–æ–ª—å–∑—É–π –µ–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥** –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
4. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–æ–≤–µ—Ä—å –≤—Å–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤—ã–ø–æ–ª–Ω–∏ —á–µ–∫–ª–∏—Å—Ç –∏–∑ `docs/CHANGE_IMPACT_CHECKLIST.md`**
2. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–æ–≤–µ—Ä—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
3. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–æ–≤–µ—Ä—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**, –µ—Å–ª–∏ –æ–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
4. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–æ–≤–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**, –µ—Å–ª–∏ –æ–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### –ó–∞–ø—Ä–µ—â–µ–Ω–æ

- –ú–µ–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –¥–ª—è –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤–ª–∏—è–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à blacklist –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-29



