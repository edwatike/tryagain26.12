# –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ B2B Platform

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ—Ç—Ä–∞–∂–∞–µ—Ç –¢–û–õ–¨–ö–û –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ –∏ —Ä–∞–±–æ—á–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.**

**–ü—Ä–∞–≤–∏–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
1. **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏**
2. **–ü–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç—ã –∏–ª–∏ —Ä—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
3. **–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ "–ù–ï –†–ê–ë–û–¢–ê–ï–¢" –∏–ª–∏ "–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò"**
4. **–ü—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ - —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ—Ç–æ–º –æ–±–Ω–æ–≤–ª—è–µ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é**

**üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:**
- **–ò–Ω–¥–µ–∫—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**: [`docs/DOCUMENTATION_INDEX.md`](DOCUMENTATION_INDEX.md)
- **–ë–∏–±–ª–∏—è –æ—à–∏–±–æ–∫**: [`docs/TROUBLESHOOTING.md`](TROUBLESHOOTING.md) - **–ù–ê–ß–ò–ù–ê–ô –û–¢–°–Æ–î–ê –ø—Ä–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ**
- **–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã**: [`.cursorrules`](../../.cursorrules)

**üîç –°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç / –ò–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
- üîß –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### 1.1 –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:

1. **Backend (FastAPI)** - API —Å–µ—Ä–≤–µ—Ä –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
   - –ü–æ—Ä—Ç: `8000`
   - –ë–∞–∑–æ–≤—ã–π URL: `http://127.0.0.1:8000`
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: `http://127.0.0.1:8000/docs`

2. **Frontend (Next.js)** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - –ü–æ—Ä—Ç: `3000`
   - URL: `http://localhost:3000`

3. **Parser Service** - –°–µ—Ä–≤–∏—Å –ø–∞—Ä—Å–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ Chrome CDP
   - –ü–æ—Ä—Ç: `9003`
   - –ë–∞–∑–æ–≤—ã–π URL: `http://127.0.0.1:9003`

### 1.2 –°–ª–æ–∏ Backend

```
backend/app/
‚îú‚îÄ‚îÄ transport/          # HTTP —Å–ª–æ–π (—Ä–æ—É—Ç–µ—Ä—ã, —Å—Ö–µ–º—ã)
‚îÇ   ‚îú‚îÄ‚îÄ routers/       # FastAPI endpoints (–¢–û–õ–¨–ö–û –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)
‚îÇ   ‚îî‚îÄ‚îÄ schemas/       # Pydantic —Å—Ö–µ–º—ã (DTO)
‚îú‚îÄ‚îÄ usecases/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—á–∏—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –±–µ–∑ HTTP)
‚îú‚îÄ‚îÄ adapters/          # –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (Parser, Checko, –ë–î)
‚îÇ   ‚îú‚îÄ‚îÄ db/           # –†–∞–±–æ—Ç–∞ —Å –ë–î (–º–æ–¥–µ–ª–∏, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
‚îÇ   ‚îî‚îÄ‚îÄ parser_client.py
‚îî‚îÄ‚îÄ domain/            # –î–æ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
```

**–ü—Ä–∞–≤–∏–ª–∞:**
- –†–æ—É—Ç–µ—Ä—ã (`transport/routers`) - –¢–û–õ–¨–ö–û –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, –ù–ï –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- Usecases - –≤—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è –æ—Ç HTTP
- Adapters - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ: –ø–∏—Å–∞—Ç—å SQL –∏–ª–∏ —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –ø—Ä—è–º–æ –≤ —Ä–æ—É—Ç–µ—Ä–∞—Ö

---

## 2. API Endpoints (Backend)

**‚ö†Ô∏è –í–ê–ñ–ù–û: –≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç –û–ñ–ò–î–ê–ï–ú–û–ï –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –†–µ–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ endpoint –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏ –ø–æ–º–µ—á–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–æ–º.**

### 2.1 –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –í—Å–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON
- –í—Å–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON —Å –ø–æ–ª–µ–º `detail`
- CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–æ –í–°–ï–ú –æ—Ç–≤–µ—Ç–∞–º (–≤–∫–ª—é—á–∞—è –æ—à–∏–±–∫–∏)
- –í—Å–µ –¥–∞—Ç—ã –≤ –æ—Ç–≤–µ—Ç–∞—Ö - —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO (`YYYY-MM-DD`)

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –û—à–∏–±–∫–µ 3, TROUBLESHOOTING.md)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å CORS —Ä–∞–±–æ—Ç–∞–µ—Ç (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –û—à–∏–±–∫–µ 3)
- ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò:** –í—Å–µ endpoints –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
- ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò:** –í—Å–µ edge cases –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### 2.2 Suppliers (–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏)

**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `/moderator/suppliers`

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Å –∏–º–ø–æ—Ä—Ç–æ–º `date` (–û—à–∏–±–∫–∞ 4)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è `date` ‚Üí `string` (–û—à–∏–±–∫–∞ 2)
- ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò:** –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò:** –ü–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

#### `GET /moderator/suppliers`
–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (int, default=100, min=1, max=1000) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
- `offset` (int, default=0, min=0) - —Å–º–µ—â–µ–Ω–∏–µ
- `type` (string, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É (`supplier` –∏–ª–∏ `reseller`)

**Response:**
```json
{
  "suppliers": [
    {
      "id": 1,
      "name": "–û–û–û –ö–æ–º–ø–∞–Ω–∏—è",
      "inn": "1234567890",
      "email": "info@company.ru",
      "domain": "company.ru",
      "registrationDate": "2005-07-15",  // ISO string
      // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
    }
  ],
  "total": 100,
  "limit": 100,
  "offset": 0
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–ª–µ `registrationDate` –í–°–ï–ì–î–ê —Å—Ç—Ä–æ–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO, –ù–ï –æ–±—ä–µ–∫—Ç `date`
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è `date` ‚Üí `string` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ä–æ—É—Ç–µ—Ä–µ –ü–ï–†–ï–î –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π DTO
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `from_attributes=False` –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### `GET /moderator/suppliers/{supplier_id}`
–ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –ø–æ ID.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `supplier_id` (int) - ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

**Response:** `ModeratorSupplierDTO`

**–û—à–∏–±–∫–∏:**
- `404` - –ø–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω

#### `POST /moderator/suppliers`
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

**Request body:** `CreateModeratorSupplierRequestDTO`

**Response:** `ModeratorSupplierDTO` (status 201)

#### `PUT /moderator/suppliers/{supplier_id}`
–û–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `supplier_id` (int) - ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

**Request body:** `UpdateModeratorSupplierRequestDTO` (camelCase)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Backend –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç camelCase ‚Üí snake_case –¥–ª—è –ë–î
- –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π: `companyStatus` ‚Üí `company_status`, `registrationDate` ‚Üí `registration_date`

**Response:** `ModeratorSupplierDTO`

**–û—à–∏–±–∫–∏:**
- `404` - –ø–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω

#### `DELETE /moderator/suppliers/{supplier_id}`
–£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `supplier_id` (int) - ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

**Response:** `204 No Content`

**–û—à–∏–±–∫–∏:**
- `404` - –ø–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω

#### `GET /moderator/suppliers/{supplier_id}/keywords`
–ü–æ–ª—É—á–∏—Ç—å keywords –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò** (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å NaN –≤ –û—à–∏–±–∫–µ 5, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `supplier_id` (int) - ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (–í–ê–õ–ò–î–ù–´–ô, –Ω–µ NaN)

**Response:**
```json
{
  "keywords": [
    {
      "keyword": "—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞",
      "urlCount": 10,
      "runId": "uuid-string",
      "firstUrl": "https://example.com"
    }
  ]
}
```

**–û—à–∏–±–∫–∏:**
- `422` - –µ—Å–ª–∏ `supplier_id` –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π (NaN, –Ω–µ —á–∏—Å–ª–æ, <= 0) - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Frontend (–û—à–∏–±–∫–∞ 5)
- `404` - –ø–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω

### 2.3 Keywords (–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞)

**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `/keywords`

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

#### `GET /keywords`
–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö keywords.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

**Response:**
```json
{
  "keywords": [
    {
      "id": 1,
      "keyword": "—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞",
      "createdAt": "2025-12-26T10:00:00Z"
    }
  ]
}
```

#### `POST /keywords`
–°–æ–∑–¥–∞—Ç—å keyword.

**Request body:**
```json
{
  "keyword": "—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞"
}
```

**Response:** `KeywordDTO` (status 201)

#### `DELETE /keywords/{keyword_id}`
–£–¥–∞–ª–∏—Ç—å keyword.

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `keyword_id` (int) - ID keyword

**Response:** `204 No Content`

**–û—à–∏–±–∫–∏:**
- `404` - keyword –Ω–µ –Ω–∞–π–¥–µ–Ω

### 2.4 Parsing (–ü–∞—Ä—Å–∏–Ω–≥)

**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `/parsing`

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-27)

**‚ö†Ô∏è –í–ê–ñ–ù–û: –¢–†–ï–ë–£–ï–¢ –†–ê–ë–û–¢–´ –ù–ê–î CAPTCHA** - —Å–º. —Ä–∞–∑–¥–µ–ª "–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è" –Ω–∏–∂–µ

#### `POST /parsing/start`
–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢**

**Request body:**
```json
{
  "keyword": "–∫–∏—Ä–ø–∏—á",
  "depth": 2,
  "source": "google"
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `keyword` (string, required) - –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –¥–ª—è –ø–æ–∏—Å–∫–∞
- `depth` (int, default=10) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ (–≥–ª—É–±–∏–Ω–∞)
- `source` (string, default="google") - –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–æ–∏—Å–∫–∞: `"google"`, `"yandex"`, –∏–ª–∏ `"both"`

**Response (201 Created):**
```json
{
  "runId": "4f468e53-9ec5-4c03-aebf-04c54bdf5477",
  "keyword": "–∫–∏—Ä–ø–∏—á",
  "status": "running"
}
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–≤—è–∑–∫–∞ Backend-Frontend:**

**1. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å:**

```typescript
// frontend/moderator-dashboard-ui/app/manual-parsing/page.tsx
async function handleStart() {
  const data = await apiFetch<{ runId: string; keyword: string; status: string }>("/parsing/start", {
    method: "POST",
    body: JSON.stringify({ keyword, depth, source }),
  })
  router.push(`/parsing-runs/${data.runId}`)
}
```

**2. Backend –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å:**

```python
# backend/app/transport/routers/parsing.py
@router.post("/start", status_code=201)
async def start_parsing_endpoint(
    request: StartParsingRequestDTO,
    db: AsyncSession = Depends(get_db)
):
    """Start parsing for a keyword."""
    # Validate source
    valid_sources = ["google", "yandex", "both"]
    source = request.source.lower() if request.source else "google"
    if source not in valid_sources:
        source = "google"
    
    result = await start_parsing.execute(
        db=db,
        keyword=request.keyword,
        depth=request.depth,
        source=source
    )
    await db.commit()
    
    # Return response with camelCase field names for frontend
    return JSONResponse(
        status_code=201,
        content={
            "runId": result["run_id"],
            "keyword": result["keyword"],
            "status": result["status"]
        }
    )
```

**3. Usecase –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥:**

```python
# backend/app/usecases/start_parsing.py
async def execute(db: AsyncSession, keyword: str, depth: int = 10, source: str = "google"):
    # Create parsing request and run in database
    # ...
    
    # Start parsing asynchronously
    async def run_parsing():
        parser_client = ParserClient(settings.parser_service_url)
        
        # Call Parser Service
        result = await parser_client.parse(
            keyword=keyword,
            depth=depth,
            source=source
        )
        
        # Save results to domains_queue
        # Update run status to "completed"
    
    asyncio.create_task(run_parsing())
    
    return {
        "run_id": run_id,
        "keyword": keyword,
        "status": "running"
    }
```

**4. Parser Client –≤—ã–∑—ã–≤–∞–µ—Ç Parser Service:**

```python
# backend/app/adapters/parser_client.py
async def parse(self, keyword: str, depth: int = 10, source: str = "google") -> Dict[str, Any]:
    response = await self.client.post(
        "/parse",
        json={
            "keyword": keyword,
            "depth": depth,
            "source": source
        },
        headers={
            "Content-Type": "application/json; charset=utf-8"
        }
    )
    return response.json()
```

**5. Parser Service –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥:**

```python
# parser_service/api.py
@app.post("/parse", response_model=ParseResponse)
async def parse_keyword(request: ParseRequest):
    # Connect to Chrome CDP
    # Open search engine pages (Google/Yandex)
    # Collect links from search results
    # Return suppliers list
```

**–ü–æ–ª–Ω—ã–π –∫–æ–¥ —Å—Ö–µ–º –∏ —Ç–∏–ø–æ–≤:**

**Backend —Å—Ö–µ–º—ã (Pydantic):**

```python
# backend/app/transport/schemas/parsing.py
class StartParsingRequestDTO(BaseModel):
    """Request DTO for starting parsing."""
    keyword: str
    depth: int = Field(default=10, description="Number of search result pages to parse (depth)")
    source: str = Field(default="google", description="Source for parsing: 'google', 'yandex', or 'both'")

class StartParsingResponseDTO(BaseModel):
    """Response DTO for parsing start."""
    runId: str  # Use camelCase directly (no alias needed for response)
    keyword: str
    status: str

class ParsingStatusResponseDTO(BaseModel):
    """Response DTO for parsing status."""
    runId: str = Field(alias="run_id")
    keyword: str
    status: str
    startedAt: Optional[datetime] = Field(None, alias="started_at")
    finishedAt: Optional[datetime] = Field(None, alias="finished_at")
    error: Optional[str] = Field(None, alias="error_message")
    resultsCount: Optional[int] = None
```

**Frontend —Ç–∏–ø—ã (TypeScript):**

```typescript
// frontend/moderator-dashboard-ui/lib/types.ts
export interface ParsingRunDTO {
  run_id?: string  // Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç snake_case
  runId?: string  // –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  keyword: string
  status: string  // –ú–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º —Å—Ç–∞—Ç—É—Å–æ–º, –Ω–µ —Ç–æ–ª—å–∫–æ "running" | "completed" | "failed"
  started_at?: string | null  // Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç snake_case
  startedAt?: string | null  // –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  finished_at?: string | null  // Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç snake_case
  finishedAt?: string | null  // –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  error_message?: string | null  // Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç snake_case
  error?: string | null  // –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  resultsCount: number | null
  created_at?: string  // Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç snake_case
  createdAt?: string  // –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
}

export interface DomainQueueEntryDTO {
  domain: string
  keyword: string
  url: string
  parsingRunId: string | null
  status: string
  createdAt: string
}
```

**Parser Service —Å—Ö–µ–º—ã:**

```python
# parser_service/api.py
class ParseRequest(BaseModel):
    """Request model for parsing."""
    keyword: str
    depth: int = 10  # Number of search result pages to parse
    source: str = "google"  # "google", "yandex", or "both"

class ParsedSupplier(BaseModel):
    """Parsed supplier data."""
    name: str
    domain: Optional[str] = None
    email: Optional[str] = None
    phone: Optional[str] = None
    inn: Optional[str] = None
    source_url: str

class ParseResponse(BaseModel):
    """Response model for parsing."""
    keyword: str
    suppliers: List[ParsedSupplier]
    total_found: int
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
start-all.bat

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤
curl http://127.0.0.1:8000/health      # Backend
curl http://127.0.0.1:9003/health     # Parser Service
curl http://127.0.0.1:9222/json/version  # Chrome CDP

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
curl -X POST http://127.0.0.1:8000/parsing/start \
  -H "Content-Type: application/json; charset=utf-8" \
  -d '{"keyword":"–∫–∏—Ä–ø–∏—á","depth":1,"source":"google"}'

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
curl "http://127.0.0.1:8000/domains/queue?parsingRunId=<runId>"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í –æ–∫–Ω–µ Chrome –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤–∫–ª–∞–¥–∫–∏ —Å Google/Yandex –ø–æ–∏—Å–∫–æ–º
- –ü–∞—Ä—Å–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–æ (–Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π runId —Å –Ω–æ–≤—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

#### `GET /parsing/status/{run_id}`
–°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (—Å –∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ - —Å–º. –Ω–∏–∂–µ)

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `run_id` (string) - UUID –∑–∞–ø—É—Å–∫–∞

**Response:** `ParsingStatusResponseDTO`

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

```python
# backend/app/transport/routers/parsing.py
@router.get("/status/{run_id}", response_model=ParsingStatusResponseDTO)
async def get_parsing_status_endpoint(
    run_id: str,
    db: AsyncSession = Depends(get_db)
):
    run = await get_parsing_status.execute(db=db, run_id=run_id)
    if not run:
        raise HTTPException(status_code=404, detail="Parsing run not found")
    
    # Extract keyword from request
    keyword = "Unknown"
    if run.request:
        if run.request.title:
            keyword = run.request.title
        elif run.request.raw_keys_json:
            # Parse JSON and extract first keyword
            keys_data = json.loads(run.request.raw_keys_json)
            # ...
    
    status_dict = {
        "runId": run.run_id,
        "keyword": keyword,
        "status": run.status,
        "startedAt": run.started_at.isoformat() if run.started_at else None,
        "finishedAt": run.finished_at.isoformat() if run.finished_at else None,
        "error": run.error_message,
        "resultsCount": None,
    }
    return ParsingStatusResponseDTO.model_validate(status_dict)
```

**‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- Endpoint –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ Pydantic: `Field required [type=missing, input_value={'runId': ...}, input_type=dict]`
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ –º–∞–ø–ø–∏–Ω–≥–µ `runId` vs `run_id` –≤ DTO
- **–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –∏–ª–∏ endpoint `/parsing-runs/{run_id}`

**–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**

**‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢ –†–ê–ë–û–¢–´: CAPTCHA**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ Google/Yandex –º–æ–∂–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è CAPTCHA
- –ü–∞—Ä—Å–µ—Ä –æ–∂–∏–¥–∞–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ—à–∏—Ç CAPTCHA –≤—Ä—É—á–Ω—É—é –≤ –≤–∏–¥–∏–º–æ–º –æ–∫–Ω–µ Chrome
- –ï—Å–ª–∏ CAPTCHA –Ω–µ —Ä–µ—à–µ–Ω–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç - –ø–∞—Ä—Å–∏–Ω–≥ –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —Å –æ—à–∏–±–∫–æ–π

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ü–∞—Ä—Å–µ—Ä –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç CAPTCHA –∏ –∂–¥–µ—Ç –¥–æ 5 –º–∏–Ω—É—Ç
- –í—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è: `[WAIT] GOOGLE: Waiting for CAPTCHA to be solved...`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤—Ä—É—á–Ω—É—é —Ä–µ—à–∏—Ç—å CAPTCHA –≤ –æ–∫–Ω–µ Chrome
- –ü–æ—Å–ª–µ —Ä–µ—à–µ–Ω–∏—è CAPTCHA –ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ –±—É–¥—É—â–µ–º:**
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ —Ä–µ—à–µ–Ω–∏—è CAPTCHA (2captcha, anti-captcha –∏ —Ç.–¥.)
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ —Ä–µ—à–µ–Ω–∏–µ CAPTCHA
- [ ] –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ CAPTCHA —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [ ] –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å CAPTCHA –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π (–ø–∞—Ä—Å–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø—Ä–∏ CAPTCHA)

---

### –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ

**1. Frontend ‚Üí Backend (–∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞):**

```
POST http://127.0.0.1:8000/parsing/start
Content-Type: application/json; charset=utf-8

{
  "keyword": "–∫–∏—Ä–ø–∏—á",
  "depth": 2,
  "source": "google"
}
```

**2. Backend —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ –ë–î:**

```python
# –°–æ–∑–¥–∞–µ—Ç—Å—è parsing_request
{
  "title": "–∫–∏—Ä–ø–∏—á",
  "raw_keys_json": "[\"–∫–∏—Ä–ø–∏—á\"]",
  "source": "google"
}

# –°–æ–∑–¥–∞–µ—Ç—Å—è parsing_run
{
  "run_id": "4f468e53-9ec5-4c03-aebf-04c54bdf5477",
  "request_id": <request_id>,
  "status": "running",
  "source": "google",
  "depth": 2,
  "started_at": "2025-12-27T10:15:00Z"
}
```

**3. Backend ‚Üí Parser Service (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ):**

```
POST http://127.0.0.1:9003/parse
Content-Type: application/json; charset=utf-8

{
  "keyword": "–∫–∏—Ä–ø–∏—á",
  "depth": 2,
  "source": "google"
}
```

**4. Parser Service –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Chrome CDP:**

```python
# parser_service/src/parser.py
# 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Chrome CDP
browser = await playwright.chromium.connect_over_cdp("http://127.0.0.1:9222")

# 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –±—Ä–∞—É–∑–µ—Ä–∞
contexts = browser.contexts
context = contexts[0]  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å

# 3. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞
page = await context.new_page()

# 4. –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞
await page.goto("https://www.google.com/search?q=–∫–∏—Ä–ø–∏—á+–∫—É–ø–∏—Ç—å&hl=ru")

# 5. –°–±–æ—Ä —Å—Å—ã–ª–æ–∫ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
# 6. –ü–∞—Ä—Å–∏–Ω–≥ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (depth —Ä–∞–∑)
```

**5. Parser Service ‚Üí Backend (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã):**

```
Response:
{
  "keyword": "–∫–∏—Ä–ø–∏—á",
  "suppliers": [
    {
      "name": "kirpich-lavka.ru",
      "domain": "kirpich-lavka.ru",
      "email": null,
      "phone": null,
      "inn": null,
      "source_url": "https://kirpich-lavka.ru/..."
    },
    ...
  ],
  "total_found": 119
}
```

**6. Backend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ë–î:**

```python
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ supplier —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ domains_queue
{
  "domain": "kirpich-lavka.ru",
  "keyword": "–∫–∏—Ä–ø–∏—á",
  "url": "https://kirpich-lavka.ru/...",
  "parsing_run_id": "4f468e53-9ec5-4c03-aebf-04c54bdf5477",
  "status": "pending"
}
```

**7. Backend –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞:**

```python
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ parsing_run
{
  "status": "completed",
  "finished_at": "2025-12-27T10:20:00Z",
  "results_count": 119
}
```

**8. Frontend –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

```
GET http://127.0.0.1:8000/domains/queue?parsingRunId=4f468e53-9ec5-4c03-aebf-04c54bdf5477

Response:
{
  "entries": [
    {
      "domain": "kirpich-lavka.ru",
      "keyword": "–∫–∏—Ä–ø–∏—á",
      "url": "https://kirpich-lavka.ru/...",
      "parsingRunId": "4f468e53-9ec5-4c03-aebf-04c54bdf5477",
      "status": "pending",
      "createdAt": "2025-12-27T10:20:00Z"
    },
    ...
  ],
  "total": 119,
  "limit": 100,
  "offset": 0
}
```

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—Å–µ–π —Å–≤—è–∑–∫–∏

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
curl http://127.0.0.1:8000/health      # Backend
curl http://127.0.0.1:9003/health     # Parser Service
curl http://127.0.0.1:9222/json/version  # Chrome CDP

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
curl -X POST http://127.0.0.1:8000/parsing/start \
  -H "Content-Type: application/json; charset=utf-8" \
  -d '{"keyword":"–∫–∏—Ä–ø–∏—á","depth":1,"source":"google"}'

# –û—Ç–≤–µ—Ç:
# {
#   "runId": "4f468e53-9ec5-4c03-aebf-04c54bdf5477",
#   "keyword": "–∫–∏—Ä–ø–∏—á",
#   "status": "running"
# }

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å (–ø–æ–¥–æ–∂–¥–∞—Ç—å 10-30 —Å–µ–∫—É–Ω–¥)
curl "http://127.0.0.1:8000/parsing/status/4f468e53-9ec5-4c03-aebf-04c54bdf5477"

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
curl "http://127.0.0.1:8000/domains/queue?parsingRunId=4f468e53-9ec5-4c03-aebf-04c54bdf5477&limit=10"

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∫–ª–∞–¥–∫–∏ Chrome (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –≤–∫–ª–∞–¥–∫–∏ —Å –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏)
curl http://127.0.0.1:9222/json | python -m json.tool | grep -i "google\|yandex"
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**

1. ‚úÖ Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç runId –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
2. ‚úÖ –í –æ–∫–Ω–µ Chrome –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤–∫–ª–∞–¥–∫–∏ —Å Google/Yandex –ø–æ–∏—Å–∫–æ–º
3. ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–æ (–∑–∞–Ω–∏–º–∞–µ—Ç –≤—Ä–µ–º—è, –Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
4. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
5. ‚úÖ –°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ "completed"
6. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `/domains/queue?parsingRunId=...`

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ:**

- –û—Ç–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ Chrome (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–æ —Å CDP)
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –≤–∫–ª–∞–¥–∫–∞–º–∏ - –¥–æ–ª–∂–Ω—ã –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –≤–∫–ª–∞–¥–∫–∏ —Å –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏
- –í –∏—Å—Ç–æ—Ä–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å–∏ –æ –ø–æ—Å–µ—â–µ–Ω–∏–∏ Google/Yandex
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤–∫–ª–∞–¥–∫–∏ –º–æ–≥—É—Ç –∑–∞–∫—Ä—ã—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 2.5 Parsing Runs (–ò—Å—Ç–æ—Ä–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞)

**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `/parsing/runs`

#### `GET /parsing/runs`
–°–ø–∏—Å–æ–∫ –∑–∞–ø—É—Å–∫–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞.

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (int, default=100, min=1, max=1000)
- `offset` (int, default=0, min=0)

**Response:** `ParsingRunsListResponseDTO`

#### `GET /parsing/runs/{run_id}`
–ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø—É—Å–∫ –ø–æ ID.

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `run_id` (string) - UUID –∑–∞–ø—É—Å–∫–∞

**Response:** `ParsingRunDTO`

**–û—à–∏–±–∫–∏:**
- `404` - –∑–∞–ø—É—Å–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω

### 2.6 Blacklist (–ß–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫)

**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `/moderator/blacklist`

#### `GET /moderator/blacklist`
–°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π —á–µ—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (int, default=100, min=1, max=1000)
- `offset` (int, default=0, min=0)

**Response:** `BlacklistResponseDTO`

#### `POST /moderator/blacklist`
–î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω –≤ —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫.

**Request body:** `AddToBlacklistRequestDTO` (camelCase)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Backend –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `addedBy` ‚Üí `added_by`, `parsingRunId` ‚Üí `parsing_run_id`

**Response:** `BlacklistEntryDTO` (status 201)

#### `DELETE /moderator/blacklist/{domain}`
–£–¥–∞–ª–∏—Ç—å –¥–æ–º–µ–Ω –∏–∑ —á–µ—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `domain` (string) - –¥–æ–º–µ–Ω

**Response:** `204 No Content`

**–û—à–∏–±–∫–∏:**
- `404` - –¥–æ–º–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ

### 2.7 Health Check

#### `GET /health`
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û** (–±–∞–∑–æ–≤—ã–π endpoint, –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å)

**Response:**
```json
{
  "status": "ok"
}
```

---

## 3. Frontend (Next.js)

### 3.1 –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Next.js 16** (App Router)
- **TypeScript** (strict mode)
- **React 18**
- **Tailwind CSS**
- **Shadcn UI**

### 3.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò** (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Å params –∏ NaN, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

#### `/` (–ì–ª–∞–≤–Ω–∞—è)
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ–±—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

#### `/suppliers` (–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤)
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `SuppliersClient`
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ `GET /moderator/suppliers`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é
- –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò** (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å –∏–º–ø–æ—Ä—Ç–æ–º date, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)

#### `/suppliers/[id]` (–î–µ—Ç–∞–ª–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞)
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `SupplierDetailClient`
- **–í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `async` —Ñ—É–Ω–∫—Ü–∏—é –∏ `await params` (Next.js 16+) - ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** (–û—à–∏–±–∫–∞ 6)
- –í–∞–ª–∏–¥–∞—Ü–∏—è ID: –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `NaN` –∏ `<= 0` - ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** (–û—à–∏–±–∫–∞ 5)
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç:
  - –ü–æ—Å—Ç–∞–≤—â–∏–∫–∞: `GET /moderator/suppliers/{id}`
  - Keywords: `GET /moderator/suppliers/{id}/keywords`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–µ `[object Object]` - ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** (–û—à–∏–±–∫–∞ 5)
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò** (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

#### `/suppliers/[id]/edit` (–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞)
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `SupplierEditClient`
- **–í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `async` —Ñ—É–Ω–∫—Ü–∏—é –∏ `await params` (Next.js 16+) - ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** (–û—à–∏–±–∫–∞ 6)
- –í–∞–ª–∏–¥–∞—Ü–∏—è ID –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π - ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** (–û—à–∏–±–∫–∞ 5)
- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò** (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

#### `/keywords` (–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞)
- –°–ø–∏—Å–æ–∫ keywords
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ keyword
- –£–¥–∞–ª–µ–Ω–∏–µ keyword
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

#### `/blacklist` (–ß–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫)
- –°–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞
- –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

#### `/parsing-runs` (–ò—Å—Ç–æ—Ä–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞)
- –°–ø–∏—Å–æ–∫ –∑–∞–ø—É—Å–∫–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
- –î–µ—Ç–∞–ª–∏ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

#### `/manual-parsing` (–†—É—á–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥)
- –§–æ—Ä–º–∞ –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
- –ü–æ–ª—è: keyword, depth, source
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-27)

**–ü–æ–ª–Ω—ã–π –∫–æ–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**

```typescript
// frontend/moderator-dashboard-ui/app/manual-parsing/page.tsx
"use client"

import { useState } from "react"
import { useRouter } from "next/navigation"
import { apiFetch, APIError } from "@/lib/api"
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select"

export default function ManualParsingPage() {
  const router = useRouter()
  const [keyword, setKeyword] = useState("")
  const [depth, setDepth] = useState(10)
  const [source, setSource] = useState<"google" | "yandex" | "both">("google")
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState<string | null>(null)

  async function handleStart() {
    if (!keyword.trim()) {
      setError("–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ")
      return
    }

    try {
      setLoading(true)
      setError(null)
      const data = await apiFetch<{ runId: string; keyword: string; status: string }>("/parsing/start", {
        method: "POST",
        body: JSON.stringify({ keyword, depth, source }),
      })
      router.push(`/parsing-runs/${data.runId}`)
    } catch (err) {
      console.error("[Manual Parsing] Error starting parsing:", {
        error: err,
        keyword: keyword,
        depth: depth,
        source: source,
        details: err instanceof APIError ? {
          status: err.status,
          message: err.message,
          data: err.data
        } : err
      })
      
      if (err instanceof APIError) {
        setError(err.message)
      } else {
        setError("–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞")
      }
    } finally {
      setLoading(false)
    }
  }

  return (
    <Card>
      <CardHeader>
        <CardTitle>–†—É—á–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥</CardTitle>
      </CardHeader>
      <CardContent className="space-y-4">
        {error && <div className="text-red-500">{error}</div>}
        
        <div>
          <Label htmlFor="keyword">–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ</Label>
          <Input
            id="keyword"
            value={keyword}
            onChange={(e) => setKeyword(e.target.value)}
            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –º–µ—Ç–∞–ª–ª–æ–ø—Ä–æ–∫–∞—Ç"
            disabled={loading}
          />
        </div>

        <div>
          <Label htmlFor="source">–ò—Å—Ç–æ—á–Ω–∏–∫ –ø–æ–∏—Å–∫–∞</Label>
          <Select
            value={source}
            onValueChange={(value: "google" | "yandex" | "both") => setSource(value)}
            disabled={loading}
          >
            <SelectTrigger id="source">
              <SelectValue placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="google">Google</SelectItem>
              <SelectItem value="yandex">Yandex</SelectItem>
              <SelectItem value="both">Google + Yandex</SelectItem>
            </SelectContent>
          </Select>
        </div>

        <div>
          <Label htmlFor="depth">–ì–ª—É–±–∏–Ω–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü)</Label>
          <Input
            id="depth"
            type="number"
            value={depth}
            onChange={(e) => setDepth(parseInt(e.target.value) || 1)}
            min={1}
            max={10}
            disabled={loading}
          />
          <p className="text-sm text-muted-foreground mt-1">
            –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ (1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚âà 10-20 URL)
          </p>
        </div>

        <Button onClick={handleStart} disabled={loading || !keyword.trim()}>
          {loading ? "–ó–∞–ø—É—Å–∫..." : "–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥"}
        </Button>
      </CardContent>
    </Card>
  )
}
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–≤—è–∑–∫–∞:**

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É:**
   - –í–≤–æ–¥–∏—Ç –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–∫–∏—Ä–ø–∏—á")
   - –í—ã–±–∏—Ä–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ (google/yandex/both)
   - –£–∫–∞–∑—ã–≤–∞–µ—Ç –≥–ª—É–±–∏–Ω—É (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü)

2. **Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å:**
   ```typescript
   const data = await apiFetch<{ runId: string; keyword: string; status: string }>("/parsing/start", {
     method: "POST",
     body: JSON.stringify({ keyword, depth, source }),
   })
   ```

3. **Backend –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å:**
   - –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ –ë–î (parsing_request, parsing_run)
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∑–∞–¥–∞—á—É –ø–∞—Ä—Å–∏–Ω–≥–∞
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç runId –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ

4. **Parser Service –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥:**
   - –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Chrome CDP
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–∫–ª–∞–¥–∫–∏ —Å –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏
   - –°–æ–±–∏—Ä–∞–µ—Ç —Å—Å—ã–ª–∫–∏ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤

5. **Backend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–æ–º–µ–Ω—ã –≤ domains_queue
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞ "completed"

6. **Frontend –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
   ```typescript
   router.push(`/parsing-runs/${data.runId}`)
   ```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/manual-parsing`
2. –í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–∫–∏—Ä–ø–∏—á")
3. –í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ (google)
4. –£–∫–∞–∂–∏—Ç–µ –≥–ª—É–±–∏–Ω—É (1)
5. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥"
6. **–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–∫–Ω–æ–º Chrome** - –¥–æ–ª–∂–Ω—ã –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≤–∫–ª–∞–¥–∫–∏ —Å Google –ø–æ–∏—Å–∫–æ–º
7. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ
- –í –æ–∫–Ω–µ Chrome –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤–∫–ª–∞–¥–∫–∏ —Å –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏
- –ü–∞—Ä—Å–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–æ (–Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/parsing-runs/{runId}`

**‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- **CAPTCHA:** –ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ CAPTCHA —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤ –æ–∫–Ω–µ Chrome (—Å–º. —Ä–∞–∑–¥–µ–ª "–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è" –≤ 2.4 Parsing)

### 3.3 –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è Next.js 16+:**

```typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
export default async function Page({
  params,
}: {
  params: Promise<{ id: string }>
}) {
  const { id } = await params
  const supplierId = parseInt(id, 10)
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è
  if (isNaN(supplierId) || supplierId <= 0) {
    return <div>–û—à–∏–±–∫–∞: –ù–µ–≤–µ—Ä–Ω—ã–π ID</div>
  }
  
  return <Component supplierId={supplierId} />
}

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (Next.js 15 –∏ –Ω–∏–∂–µ)
export default function Page({
  params,
}: {
  params: { id: string }
}) {
  const supplierId = parseInt(params.id, 10)
  // ...
}
```

### 3.4 API –∫–ª–∏–µ–Ω—Ç (`lib/api.ts`)

**–ü—Ä–∞–≤–∏–ª–∞:**
- –í—Å–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ `apiFetch()`
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `fetch()` –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ë–∞–∑–æ–≤—ã–π URL –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–§–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫:**
- –í—Å–µ –æ—à–∏–±–∫–∏ –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –≤ `APIError`
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö - —á–∏—Ç–∞–µ–º—ã–µ —Å—Ç—Ä–æ–∫–∏, –Ω–µ –æ–±—ä–µ–∫—Ç—ã

### 3.5 –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ü—Ä–∞–≤–∏–ª–∞:**
1. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–∏–ø –æ—à–∏–±–∫–∏ –ø–µ—Ä–µ–¥ –≤—ã–≤–æ–¥–æ–º
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `JSON.stringify()` –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –æ—à–∏–±–æ–∫
3. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
4. –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å `[object Object]`

**–ü—Ä–∏–º–µ—Ä:**
```typescript
if (error || !supplier) {
  const errorMessage = error || "–ü–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω"
  return (
    <div className="text-red-500 p-4">
      –û—à–∏–±–∫–∞: {typeof errorMessage === 'string' 
        ? errorMessage 
        : JSON.stringify(errorMessage)}
    </div>
  )
}
```

---

## 4. –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

### 4.1 –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è

**Backend:**
- –í –ë–î: `date` (SQLAlchemy `Date`) –∏–ª–∏ `datetime` (SQLAlchemy `DateTime`)
- –í DTO: `Optional[str]` (ISO —Å—Ç—Ä–æ–∫–∞)
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è: `date.isoformat()` –∏–ª–∏ `datetime.isoformat()`
- **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:** –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ü–ï–†–ï–î –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π DTO

**–ü—Ä–∏–º–µ—Ä:**
```python
# –í —Ä–æ—É—Ç–µ—Ä–µ
if isinstance(s.registration_date, date):
    registration_date_str = s.registration_date.isoformat()
else:
    registration_date_str = str(s.registration_date)

supplier_dict = {
    # ...
    'registration_date': registration_date_str,
}
supplier_dtos.append(ModeratorSupplierDTO.model_validate(supplier_dict, from_attributes=False))
```

**Frontend:**
- –í—Å–µ –¥–∞—Ç—ã - —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ `formatDate()`

### 4.2 –ò–º–ø–æ—Ä—Ç—ã (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ!)

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ø—Ä–∞–≤–∏–ª–∞:**

1. **–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–∏–ø–∞:**
   - –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å `isinstance(obj, date)` ‚Üí –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `from datetime import date`
   - –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å `isinstance(obj, datetime)` ‚Üí –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `from datetime import datetime`

2. **–ü—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–¥–∞:**
   - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–∫ –∏–º–ø–æ—Ä—Ç–æ–≤ –≤–º–µ—Å—Ç–µ —Å –∫–æ–¥–æ–º
   - –ï—Å–ª–∏ –∫–æ–ø–∏—Ä—É–µ—à—å —Ñ—É–Ω–∫—Ü–∏—é —Å `date` ‚Üí –∫–æ–ø–∏—Ä—É–π –∏ `from datetime import date`

3. **–ü—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ:**
   - –ù–ï —É–¥–∞–ª—è—Ç—å –∏–º–ø–æ—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –∫–æ–¥–µ
   - –ü–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –∏–º–ø–æ—Ä—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ grep

4. **–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º:**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å `python temp/backend/check_imports.py`
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏

### 4.3 –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**Backend:**
- –í—Å–µ path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (`ge`, `le`, `min_length`, etc.)

**Frontend:**
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- `parseInt(value, 10)` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ `isNaN()`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–π (`> 0` –¥–ª—è ID)

**–ü—Ä–∏–º–µ—Ä:**
```typescript
const supplierId = parseInt(params.id, 10)

if (isNaN(supplierId) || supplierId <= 0) {
  return <div>–û—à–∏–±–∫–∞: –ù–µ–≤–µ—Ä–Ω—ã–π ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞</div>
}
```

---

## 5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 5.1 Backend

**–ü—Ä–∞–≤–∏–ª–∞:**
- –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
- CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –¥–∞–∂–µ –∫ –æ—à–∏–±–∫–∞–º
- –û—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON —Å –ø–æ–ª–µ–º `detail`
- –í development —Ä–µ–∂–∏–º–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è traceback

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—à–∏–±–∫–∏:**
```json
{
  "detail": "Error message or traceback in development"
}
```

### 5.2 Frontend

**–ü—Ä–∞–≤–∏–ª–∞:**
- –í—Å–µ –æ—à–∏–±–∫–∏ API –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –≤ `APIError`
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ (–∫—Ä–æ–º–µ development)
- –û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## 6. CORS

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ origins: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `backend/app/config.py`
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–æ –í–°–ï–ú –æ—Ç–≤–µ—Ç–∞–º (–≤–∫–ª—é—á–∞—è –æ—à–∏–±–∫–∏)
- –ú–µ—Ç–æ–¥—ã: `*` (–≤—Å–µ)
- Credentials: —Ä–∞–∑—Ä–µ—à–µ–Ω—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –í—Å–µ –æ—Ç–≤–µ—Ç—ã –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å `Access-Control-Allow-Origin`
- –î–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö 500 CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

---

## 7. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### 7.1 –ú–∏–≥—Ä–∞—Ü–∏–∏

- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –ë–î —á–µ—Ä–µ–∑ SQL –º–∏–≥—Ä–∞—Ü–∏–∏
- –§–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π –≤ `backend/migrations/`
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: `psql -U postgres -d database -f migrations/001_initial_schema.sql`

### 7.2 –ú–æ–¥–µ–ª–∏

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLAlchemy 2.0
- –í—Å–µ –º–æ–¥–µ–ª–∏ –≤ `backend/app/adapters/db/models.py`
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ `AsyncSession`

---

## 8. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 8.1 Backend

- Unit —Ç–µ—Å—Ç—ã: `backend/tests/unit/`
- Integration —Ç–µ—Å—Ç—ã: `backend/tests/integration/`
- Contract —Ç–µ—Å—Ç—ã: `backend/tests/contract/`

### 8.2 Frontend

- Type checking: `npm run type-check`
- Linting: `npm run lint`
- Build –ø—Ä–æ–≤–µ—Ä–∫–∞: `npm run build`

---

## 9. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 9.1 –ü–æ—Ä—Ç—ã

- Backend: `8000`
- Frontend: `3000` (dev), `3000` (prod)
- Parser Service: `9003`
- Chrome CDP: `9222`

### 9.2 –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Backend:**
- `DATABASE_URL` - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- `ENV` - –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`development` –∏–ª–∏ `production`)
- `CORS_ORIGINS` - —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ origins (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)

**Frontend:**
- `NEXT_PUBLIC_API_URL` - URL Backend API

---

## 10. –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:**

1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å `python temp/backend/check_imports.py`
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∏–ø—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–æ—Å–æ–±–µ–Ω–Ω–æ ID –∏–∑ URL)
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å `[object Object]`)
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –¥–∞—Ç (date ‚Üí ISO string)
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö)
7. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
8. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ API –∏–ª–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è

---

## 11. –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

–í—Å–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ `docs/TROUBLESHOOTING.md`.

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ:**
- –û—à–∏–±–∫–∞ 4: NameError —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º –∏–º–ø–æ—Ä—Ç–æ–º `date`
- –û—à–∏–±–∫–∞ 5: 422 —Å `NaN` –≤ URL
- –û—à–∏–±–∫–∞ 6: Next.js 16 async params

---

## 12. –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**

–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.

**–ü—Ä–∞–≤–∏–ª–∞:**
1. –ü–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –ø—Ä–æ–≤–µ—Ä–∫–∞
2. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø–æ–º–µ—á–∞—Ç—å –∫–∞–∫ "‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç" –∏–ª–∏ "‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏"
3. –ü—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ - —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ—Ç–æ–º –æ–±–Ω–æ–≤–ª—è–µ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é
4. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ `docs/TROUBLESHOOTING.md`

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** —Å–º. [`docs/DIAGNOSTICS_PROCESS.md`](DIAGNOSTICS_PROCESS.md)

---

## 13. –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

### –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ Backend API (`POST /parsing/start`) - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-27)
- ‚úÖ –°–≤—è–∑–∫–∞ Frontend-Backend –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-27)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Backend —Å Parser Service - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-27)
- ‚úÖ Chrome CDP –≤ –≤–∏–¥–∏–º–æ–º —Ä–µ–∂–∏–º–µ - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-27)
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ –≤–∫–ª–∞–¥–æ–∫ —Å –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-27)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-27)

‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö):**
- –û—à–∏–±–∫–∞ 4: –ò–º–ø–æ—Ä—Ç `date` –≤ `moderator_suppliers.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –û—à–∏–±–∫–∞ 5: –í–∞–ª–∏–¥–∞—Ü–∏—è ID –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ Frontend - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –û—à–∏–±–∫–∞ 6: Next.js 16 async params - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –û—à–∏–±–∫–∞ 3: CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –û—à–∏–±–∫–∞ 2: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è `date` ‚Üí `string` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò:**
- –í—Å–µ API endpoints –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
- –í—Å–µ Frontend —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Checko API - ‚ö†Ô∏è **–ò–°–ü–†–ê–í–õ–ï–ù–ê** –æ—à–∏–±–∫–∞ —Å Promise.all (–û—à–∏–±–∫–∞ 7), –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- Edge cases

‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –†–ê–ë–û–¢–´:**
- **CAPTCHA:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ CAPTCHA –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ (—Å–º. —Ä–∞–∑–¥–µ–ª "–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è" –≤ 2.4 Parsing)

**–ü—Ä–æ—Ü–µ—Å—Å:** –°–º. [`docs/DIAGNOSTICS_PROCESS.md`](DIAGNOSTICS_PROCESS.md)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**–°–º. —Ä–∞–∑–¥–µ–ª "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏" –≤ [`docs/TROUBLESHOOTING.md`](TROUBLESHOOTING.md)**

---

## 14. –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **2025-12-26**: –°–æ–∑–¥–∞–Ω–∞ –ø–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **2025-12-26**: –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **2025-12-26**: –£—Ç–æ—á–Ω–µ–Ω–æ, —á—Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç—Ä–∞–∂–∞–µ—Ç –¢–û–õ–¨–ö–û –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **2025-12-26**: –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∞—Ç—É—Å—ã –¥–ª—è –≤—Å–µ—Ö endpoints –∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- **2025-12-26**: –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞" —Å —É–∫–∞–∑–∞–Ω–∏–µ–º, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- **2025-12-27**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–∞–±–æ—á–µ–π —Å–≤—è–∑–∫–∏ Backend-Frontend –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å –ø–æ–ª–Ω—ã–º –∫–æ–¥–æ–º
- **2025-12-27**: ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞ "–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢"
- **2025-12-27**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `/manual-parsing` —Å –ø–æ–ª–Ω—ã–º –∫–æ–¥–æ–º
- **2025-12-27**: ‚ö†Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ CAPTCHA

---

**–ü–æ–º–Ω–∏: –≠—Ç–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç—Ä–∞–∂–∞–µ—Ç –†–ï–ê–õ–¨–ù–û–ï —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã. –û–±–Ω–æ–≤–ª—è–π –µ—ë –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏!**

