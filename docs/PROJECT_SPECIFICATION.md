# –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ B2B Platform

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ—Ç—Ä–∞–∂–∞–µ—Ç –¢–û–õ–¨–ö–û –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ –∏ —Ä–∞–±–æ—á–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.**

**üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:**
- **–ì–ª–∞–≤–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: [`docs/MASTER_INSTRUCTION.md`](MASTER_INSTRUCTION.md) - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∑–∞–ø—É—Å–∫, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- **–ë–∏–±–ª–∏—è –æ—à–∏–±–æ–∫**: [`docs/TROUBLESHOOTING.md`](TROUBLESHOOTING.md) - **–ù–ê–ß–ò–ù–ê–ô –û–¢–°–Æ–î–ê –ø—Ä–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ**
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏**: [`docs/CRITICAL_INTEGRATIONS_AND_CHECKLISTS.md`](CRITICAL_INTEGRATIONS_AND_CHECKLISTS.md) - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã**: [`.cursorrules`](../.cursorrules)

**–ü—Ä–∞–≤–∏–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
1. **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏**
2. **–ü–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç—ã –∏–ª–∏ —Ä—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
3. **–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ "–ù–ï –†–ê–ë–û–¢–ê–ï–¢" –∏–ª–∏ "–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò"**
4. **–ü—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ - —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ—Ç–æ–º –æ–±–Ω–æ–≤–ª—è–µ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é**

**üîç –°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç / –ò–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
- üîß –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞, –∑–∞–ø—É—Å–∫ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–ø–∏—Å–∞–Ω—ã –≤ [`docs/MASTER_INSTRUCTION.md`](MASTER_INSTRUCTION.md). –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –¥–µ—Ç–∞–ª—å–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é API –∏ —Ä–∞–±–æ—á–∏—Ö —Å–≤—è–∑–æ–∫ Backend-Frontend.

---

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Backend

### 1.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

Backend –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É Clean Architecture —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏:

**`app/transport/`** - HTTP —Å–ª–æ–π:
- `routers/` - FastAPI endpoints (—Ç–æ–ª—å–∫–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
- `schemas/` - Pydantic —Å—Ö–µ–º—ã (DTO) –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

**`app/usecases/`** - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –æ—Ç HTTP —Ñ—É–Ω–∫—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –ö–∞–∂–¥—ã–π usecase –∏–º–µ–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `execute()` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –∞–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î –∏ –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

**`app/adapters/`** - –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã:
- `parser_client.py` - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Parser Service (–æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ `/parse`)
- `checko_client.py` - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Checko API (–ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–º–ø–∞–Ω–∏—è—Ö)
- `db/` - —Ä–∞–±–æ—Ç–∞ —Å –ë–î:
  - `models.py` - SQLAlchemy –º–æ–¥–µ–ª–∏ (—Ç–∞–±–ª–∏—Ü—ã –ë–î)
  - `repositories.py` - —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—è–º–∏
  - `session.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ –ë–î

**`app/config.py`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Pydantic Settings
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î, Parser Service, Checko API

### 1.2 –ú–æ–¥–µ–ª–∏ –ë–î –∏ —Å–≤—è–∑–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**

1. **`moderator_suppliers`** - –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏
   - –°–≤—è–∑–∏: `supplier_keywords` (many-to-many —á–µ—Ä–µ–∑ `SupplierKeywordModel`)
   - –ü–æ–ª—è: id, name, inn, domain, type, checko_data (—Å–∂–∞—Ç—ã–π JSON), –∏ –¥—Ä.

2. **`keywords`** - –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
   - –°–≤—è–∑–∏: `supplier_keywords` (many-to-many)
   - –ü–æ–ª—è: id, keyword (unique), created_at

3. **`supplier_keywords`** - —Å–≤—è–∑—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ (junction table)
   - Foreign Keys: `supplier_id` ‚Üí `moderator_suppliers.id` (ON DELETE CASCADE)
   - Foreign Keys: `keyword_id` ‚Üí `keywords.id` (ON DELETE CASCADE)
   - –ü–æ–ª—è: supplier_id, keyword_id, url_count, parsing_run_id, first_url

4. **`parsing_requests`** - –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–∞—Ä—Å–∏–Ω–≥
   - –ü–æ–ª—è: id, title, raw_keys_json, source, depth, created_at

5. **`parsing_runs`** - –∑–∞–ø—É—Å–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
   - Foreign Keys: `request_id` ‚Üí `parsing_requests.id` (ON DELETE CASCADE)
   - –ü–æ–ª—è: id, run_id (unique), request_id, status, depth, source, process_log (JSON)

6. **`domains_queue`** - –æ—á–µ—Ä–µ–¥—å –¥–æ–º–µ–Ω–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –ü–æ–ª—è: id, domain, keyword, url, parsing_run_id, source, status
   - Unique Constraint: (domain, keyword, parsing_run_id)

7. **`blacklist`** - —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤
   - –ü–æ–ª—è: domain (PK), reason, added_at, parsing_run_id

8. **`audit_log`** - –∂—É—Ä–Ω–∞–ª –∞—É–¥–∏—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ü–æ–ª—è: id, table_name, operation, record_id, old_data, new_data, changed_by, created_at

### 1.3 –û—Å–Ω–æ–≤–Ω—ã–µ API endpoints

**–†–æ—É—Ç–µ—Ä—ã –∏–∑ `backend/app/transport/routers/`:**

- `health.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (`GET /health`)
- `moderator_suppliers.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ (`/moderator/suppliers`)
- `keywords.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ (`/keywords`)
- `blacklist.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–Ω—ã–º —Å–ø–∏—Å–∫–æ–º (`/moderator/blacklist`)
- `parsing.py` - –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ (`/parsing/start`, `/parsing/status`)
- `parsing_runs.py` - –∏—Å—Ç–æ—Ä–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –ª–æ–≥–∏ (`/parsing/runs`)
- `domains_queue.py` - –æ—á–µ—Ä–µ–¥—å –¥–æ–º–µ–Ω–æ–≤ (`/domains`)
- `checko.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Checko API (`/moderator/checko/{inn}`)
- `attachments.py` - –≤–ª–æ–∂–µ–Ω–∏—è (`/attachments`)

### 1.4 –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ Frontend-Backend

**–í—Å–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ `frontend/moderator-dashboard-ui/lib/api.ts`:**

- –§—É–Ω–∫—Ü–∏–∏ API –∏—Å–ø–æ–ª—å–∑—É—é—Ç `apiFetch<T>()` –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `lib/types.ts` –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç Pydantic —Å—Ö–µ–º–∞–º Backend
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å `APIError`
- Retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫ (503, 504, network errors)

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ API:**
- `getSuppliers()`, `getSupplier()`, `createSupplier()`, `updateSupplier()`, `deleteSupplier()`
- `getKeywords()`, `createKeyword()`, `deleteKeyword()`
- `getBlacklist()`, `addToBlacklist()`, `removeFromBlacklist()`
- `startParsing()`, `getParsingStatus()`, `getParsingRuns()`, `getParsingRun()`, `getParsingLogs()`
- `getDomainsQueue()`, `removeFromDomainsQueue()`
- `getCheckoData()`

### 1.5 –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ Backend-Parser Service

**Backend ‚Üí Parser Service:**

1. **–ó–∞–ø—Ä–æ—Å –ø–∞—Ä—Å–∏–Ω–≥–∞:**
   - `ParserClient.parse()` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `POST /parse` –Ω–∞ Parser Service
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: keyword, depth, source (google/yandex/both), run_id
   - Content-Type: `application/json; charset=utf-8` (–¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã)

2. **Health check:**
   - `ParserClient.health_check()` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `GET /health` –Ω–∞ Parser Service

**Parser Service ‚Üí Chrome CDP:**

1. Parser Service –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Chrome CDP —á–µ—Ä–µ–∑ `http://127.0.0.1:9222`
2. –°–æ–∑–¥–∞–µ—Ç –≤–∫–ª–∞–¥–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ (–æ–¥–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫: google/yandex)
3. –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Å—ã–ª–∫–∏ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ –∏ —Å—Å—ã–ª–æ–∫

**Parser Service ‚Üí Backend:**

1. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ Parser Service –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –æ—Ç–≤–µ—Ç–µ
2. Backend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–æ–º–µ–Ω—ã –≤ `domains_queue` –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å `parsing_runs`
3. Parser Service –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ª–æ–≥–∏ —á–µ—Ä–µ–∑ `PUT /parsing/runs/{run_id}/logs` (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

**–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:**
- Parser Service –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `request_key = f"{keyword}_{depth}_{source}"` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- Backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `_running_parsing_tasks` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

---

## 2. API Endpoints (Backend)

**‚ö†Ô∏è –í–ê–ñ–ù–û: –≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç –û–ñ–ò–î–ê–ï–ú–û–ï –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –†–µ–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ endpoint –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏ –ø–æ–º–µ—á–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–æ–º.**

### 2.1 –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –í—Å–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON
- –í—Å–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON —Å –ø–æ–ª–µ–º `detail`
- CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–æ –í–°–ï–ú –æ—Ç–≤–µ—Ç–∞–º (–≤–∫–ª—é—á–∞—è –æ—à–∏–±–∫–∏)
- –í—Å–µ –¥–∞—Ç—ã –≤ –æ—Ç–≤–µ—Ç–∞—Ö - —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO (`YYYY-MM-DD`)

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –û—à–∏–±–∫–µ 3, TROUBLESHOOTING.md)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å CORS —Ä–∞–±–æ—Ç–∞–µ—Ç (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –û—à–∏–±–∫–µ 3)
- ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò:** –í—Å–µ endpoints –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
- ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò:** –í—Å–µ edge cases –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### 2.2 Suppliers (–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏)

**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `/moderator/suppliers`

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Å –∏–º–ø–æ—Ä—Ç–æ–º `date` (–û—à–∏–±–∫–∞ 4)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è `date` ‚Üí `string` (–û—à–∏–±–∫–∞ 2)
- ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò:** –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò:** –ü–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

#### `GET /moderator/suppliers`
–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (int, default=100, min=1, max=1000) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
- `offset` (int, default=0, min=0) - —Å–º–µ—â–µ–Ω–∏–µ
- `type` (string, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É (`supplier` –∏–ª–∏ `reseller`)

**Response:**
```json
{
  "suppliers": [
    {
      "id": 1,
      "name": "–û–û–û –ö–æ–º–ø–∞–Ω–∏—è",
      "inn": "1234567890",
      "email": "info@company.ru",
      "domain": "company.ru",
      "registrationDate": "2005-07-15",  // ISO string
      // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
    }
  ],
  "total": 100,
  "limit": 100,
  "offset": 0
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–ª–µ `registrationDate` –í–°–ï–ì–î–ê —Å—Ç—Ä–æ–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO, –ù–ï –æ–±—ä–µ–∫—Ç `date`
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è `date` ‚Üí `string` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ä–æ—É—Ç–µ—Ä–µ –ü–ï–†–ï–î –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π DTO
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `from_attributes=False` –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### `GET /moderator/suppliers/{supplier_id}`
–ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –ø–æ ID.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `supplier_id` (int) - ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

**Response:** `ModeratorSupplierDTO`

**–û—à–∏–±–∫–∏:**
- `404` - –ø–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω

#### `POST /moderator/suppliers`
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

**Request body:** `CreateModeratorSupplierRequestDTO`

**Response:** `ModeratorSupplierDTO` (status 201)

#### `PUT /moderator/suppliers/{supplier_id}`
–û–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `supplier_id` (int) - ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

**Request body:** `UpdateModeratorSupplierRequestDTO` (camelCase)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Backend –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç camelCase ‚Üí snake_case –¥–ª—è –ë–î
- –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π: `companyStatus` ‚Üí `company_status`, `registrationDate` ‚Üí `registration_date`

**Response:** `ModeratorSupplierDTO`

**–û—à–∏–±–∫–∏:**
- `404` - –ø–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω

#### `DELETE /moderator/suppliers/{supplier_id}`
–£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `supplier_id` (int) - ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

**Response:** `204 No Content`

**–û—à–∏–±–∫–∏:**
- `404` - –ø–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω

#### `GET /moderator/suppliers/{supplier_id}/keywords`
–ü–æ–ª—É—á–∏—Ç—å keywords –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò** (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å NaN –≤ –û—à–∏–±–∫–µ 5, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `supplier_id` (int) - ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (–í–ê–õ–ò–î–ù–´–ô, –Ω–µ NaN)

**Response:**
```json
{
  "keywords": [
    {
      "keyword": "—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞",
      "urlCount": 10,
      "runId": "uuid-string",
      "firstUrl": "https://example.com"
    }
  ]
}
```

**–û—à–∏–±–∫–∏:**
- `422` - –µ—Å–ª–∏ `supplier_id` –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π (NaN, –Ω–µ —á–∏—Å–ª–æ, <= 0) - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Frontend (–û—à–∏–±–∫–∞ 5)
- `404` - –ø–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω

### 2.3 Checko API (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Checko.ru)

**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `/moderator/checko`

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-30)

#### `GET /moderator/checko/{inn}`

–ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –∫–æ–º–ø–∞–Ω–∏–∏ –∏–∑ Checko API.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-30)

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `inn` (string) - –ò–ù–ù –∫–æ–º–ø–∞–Ω–∏–∏ (10 –∏–ª–∏ 12 —Ü–∏—Ñ—Ä)

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `force_refresh` (bool, optional, default=false) - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫—ç—à)

**Response:** `CheckoDataResponse`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Backend –∫—ç—à–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ Checko –≤ –ë–î –Ω–∞ 24 —á–∞—Å–∞
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Å–≤–µ–∂–∏–µ (–º–µ–Ω–µ–µ 24 —á–∞—Å–æ–≤) - –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∏–∑ –ë–î –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –∫ Checko API
- –ï—Å–ª–∏ `force_refresh=true` - –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∏–∑ Checko API –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫—ç—à–∞
- –î–∞–Ω–Ω—ã–µ —Å–∂–∏–º–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ gzip –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î (–ø–æ–ª–µ `checko_data` —Ç–∏–ø–∞ BYTEA)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```powershell
# –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ Checko –¥–ª—è –ò–ù–ù
curl "http://127.0.0.1:8000/moderator/checko/4703148343"

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
curl "http://127.0.0.1:8000/moderator/checko/4703148343?force_refresh=true"
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "name": "–û–û–û –°–¢–†–û–ô–¢–û–†–ì–û–í–õ–Ø",
  "inn": "4703148343",
  "ogrn": "1174704000767",
  "kpp": "470301001",
  "companyStatus": "–î–µ–π—Å—Ç–≤—É—é—â–∞—è",
  "registrationDate": "2017-11-04",
  "legalAddress": "188643, –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å, –í—Å–µ–≤–æ–ª–æ–∂—Å–∫–∏–π —Ä–∞–π–æ–Ω...",
  "phone": "+7 (812) 123-45-67",
  "website": "https://example.com",
  "revenue": 150000000,
  "profit": 5000000,
  "financeYear": 2023,
  "legalCasesCount": 10,
  "legalCasesSum": 50000000,
  "legalCasesAsPlaintiff": 5,
  "legalCasesAsDefendant": 5,
  "checkoData": "{\"_finances\": {...}, \"_legal\": {...}, ...}"
}
```

**–°–≤—è–∑–∫–∞ Backend-Frontend:**

**1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö Checko:**
```typescript
// frontend/moderator-dashboard-ui/lib/api.ts
export async function getCheckoData(inn: string, forceRefresh?: boolean): Promise<CheckoDataResponse> {
  const url = `/moderator/checko/${inn}${forceRefresh ? '?force_refresh=true' : ''}`
  return apiFetch<CheckoDataResponse>(url)
}
```

**2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ñ–æ—Ä–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```typescript
// frontend/moderator-dashboard-ui/app/suppliers/[id]/edit/supplier-edit-client.tsx
// –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ó–∞–ø–æ–ª–Ω–∏—Ç—å –î–∞–Ω–Ω—ã–µ"
const checkoResponse = await getCheckoData(formData.inn, false)
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
setFormData({
  ...formData,
  name: checkoResponse.name || formData.name,
  ogrn: checkoResponse.ogrn || null,
  // ... –≤—Å–µ Checko –ø–æ–ª—è
})
```

**3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞:**
```typescript
// frontend/moderator-dashboard-ui/components/supplier-card.tsx
// –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ Checko"
const checkoResponse = await getCheckoData(supplier.inn, false)
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ Checko
const updatedSupplier = await updateSupplier(supplier.id, {
  // ... –≤—Å–µ Checko –ø–æ–ª—è
  checkoData: checkoResponse.checkoData || null,
})
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:3000/suppliers/{id}/edit`
2. –í–≤–µ—Å—Ç–∏ –ò–ù–ù (–Ω–∞–ø—Ä–∏–º–µ—Ä: `4703148343`)
3. –ù–∞–∂–∞—Ç—å "–ó–∞–ø–æ–ª–Ω–∏—Ç—å –î–∞–Ω–Ω—ã–µ"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ Checko
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å - –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –ë–î
6. –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ - –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è
7. –ù–∞–∂–∞—Ç—å "–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ Checko" - –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –æ–±–Ω–æ–≤–∏—Ç—å—Å—è (–µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ –±–æ–ª–µ–µ 24 —á–∞—Å–æ–≤)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –î–∞–Ω–Ω—ã–µ Checko –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–µ –¥–µ–ª–∞–µ—Ç—Å—è –ª–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Checko API)
- –í—Å–µ Checko –ø–æ–ª—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- –î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

**–û—à–∏–±–∫–∏:**
- `404` - –∫–æ–º–ø–∞–Ω–∏—è —Å —Ç–∞–∫–∏–º –ò–ù–ù –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ Checko
- `422` - –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π –ò–ù–ù (–Ω–µ 10 –∏–ª–∏ 12 —Ü–∏—Ñ—Ä)
- `500` - –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ Checko API –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö

### 2.4 Keywords (–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞)

**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `/keywords`

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

#### `GET /keywords`
–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö keywords.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

**Response:**
```json
{
  "keywords": [
    {
      "id": 1,
      "keyword": "—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞",
      "createdAt": "2025-12-26T10:00:00Z"
    }
  ]
}
```

#### `POST /keywords`
–°–æ–∑–¥–∞—Ç—å keyword.

**Request body:**
```json
{
  "keyword": "—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞"
}
```

**Response:** `KeywordDTO` (status 201)

#### `DELETE /keywords/{keyword_id}`
–£–¥–∞–ª–∏—Ç—å keyword.

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `keyword_id` (int) - ID keyword

**Response:** `204 No Content`

**–û—à–∏–±–∫–∏:**
- `404` - keyword –Ω–µ –Ω–∞–π–¥–µ–Ω

### 2.4 Parsing (–ü–∞—Ä—Å–∏–Ω–≥)

**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `/parsing`

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-28)

**‚ö†Ô∏è –í–ê–ñ–ù–û: –¢–†–ï–ë–£–ï–¢ –†–ê–ë–û–¢–´ –ù–ê–î CAPTCHA** - —Å–º. —Ä–∞–∑–¥–µ–ª "–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è" –Ω–∏–∂–µ

#### `POST /parsing/start`
–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-28)

**‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á –ø–∞—Ä—Å–∏–Ω–≥–∞. –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å –æ–¥–Ω–∏–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º (google/yandex) –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –≤–∫–ª–∞–¥–∫–∞.

**Request body:**
```json
{
  "keyword": "–∫–∏—Ä–ø–∏—á",
  "depth": 2,
  "source": "google"
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `keyword` (string, required) - –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –¥–ª—è –ø–æ–∏—Å–∫–∞
- `depth` (int, default=10) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ (–≥–ª—É–±–∏–Ω–∞)
- `source` (string, default="google") - –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–æ–∏—Å–∫–∞: `"google"`, `"yandex"`, –∏–ª–∏ `"both"`

**Response (201 Created):**
```json
{
  "runId": "4f468e53-9ec5-4c03-aebf-04c54bdf5477",
  "keyword": "–∫–∏—Ä–ø–∏—á",
  "status": "running"
}
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–≤—è–∑–∫–∞ Backend-Frontend:**

**1. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å:**

```typescript
// frontend/moderator-dashboard-ui/app/manual-parsing/page.tsx
async function handleStart() {
  const data = await apiFetch<{ runId: string; keyword: string; status: string }>("/parsing/start", {
    method: "POST",
    body: JSON.stringify({ keyword, depth, source }),
  })
  router.push(`/parsing-runs/${data.runId}`)
}
```

**2. Backend –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å:**

```python
# backend/app/transport/routers/parsing.py
@router.post("/start", status_code=201)
async def start_parsing_endpoint(
    request: StartParsingRequestDTO,
    db: AsyncSession = Depends(get_db)
):
    """Start parsing for a keyword."""
    # Validate source
    valid_sources = ["google", "yandex", "both"]
    source = request.source.lower() if request.source else "google"
    if source not in valid_sources:
        source = "google"
    
    result = await start_parsing.execute(
        db=db,
        keyword=request.keyword,
        depth=request.depth,
        source=source
    )
    await db.commit()
    
    # Return response with camelCase field names for frontend
    return JSONResponse(
        status_code=201,
        content={
            "runId": result["run_id"],
            "keyword": result["keyword"],
            "status": result["status"]
        }
    )
```

**3. Usecase –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥ (—Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è):**

```python
# backend/app/usecases/start_parsing.py
# –ì–ª–æ–±–∞–ª—å–Ω—ã–π set –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á
_running_parsing_tasks = set()

async def execute(db: AsyncSession, keyword: str, depth: int = 10, source: str = "google", background_tasks=None):
    # Create parsing request and run in database
    run_id = str(uuid.uuid4())
    # ...
    
    # Start parsing asynchronously
    async def run_parsing():
        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏
        if run_id in _running_parsing_tasks:
            if run_id in start_parsing_module._processing_tasks:
                logger.warning(f"[DUPLICATE DETECTED] Task {run_id} already processing, skipping")
                return
            start_parsing_module._processing_tasks.add(run_id)
        
        parser_client = ParserClient(settings.parser_service_url)
        result = await parser_client.parse(keyword=keyword, depth=depth, source=source)
        # Save results to domains_queue
        # Update run status to "completed"
    
    # –ó–ê–©–ò–¢–ê –û–¢ –î–£–ë–õ–ò–†–û–í–ê–ù–ò–Ø: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ü–ï–†–ï–î –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤ BackgroundTasks
    if background_tasks is not None:
        if run_id in _running_parsing_tasks:
            logger.warning(f"[DUPLICATE PREVENTION] run_id {run_id} already in running tasks, skipping")
            return result
        
        # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ü–ï–†–ï–î background_tasks.add_task –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≥–æ–Ω–∫–∏ —É—Å–ª–æ–≤–∏–π
        _running_parsing_tasks.add(run_id)
        background_tasks.add_task(run_parsing)
    
    return {
        "run_id": run_id,
        "keyword": keyword,
        "status": "running"
    }
```

**4. Parser Client –≤—ã–∑—ã–≤–∞–µ—Ç Parser Service:**

```python
# backend/app/adapters/parser_client.py
async def parse(self, keyword: str, depth: int = 10, source: str = "google") -> Dict[str, Any]:
    response = await self.client.post(
        "/parse",
        json={
            "keyword": keyword,
            "depth": depth,
            "source": source
        },
        headers={
            "Content-Type": "application/json; charset=utf-8"
        }
    )
    return response.json()
```

**5. Parser Service –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥ (—Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è):**

```python
# parser_service/api.py
_running_parse_requests = set()
_parse_lock = asyncio.Lock()

@app.post("/parse", response_model=ParseResponse)
async def parse_keyword(request: ParseRequest):
    request_key = f"{request.keyword}_{request.depth}_{request.source}"
    
    # –ó–ê–©–ò–¢–ê –û–¢ –î–£–ë–õ–ò–†–û–í–ê–ù–ò–Ø: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π
    async with _parse_lock:
        if request_key in _running_parse_requests:
            logger.warning(f"[DUPLICATE DETECTED] Request '{request_key}' already running, skipping")
            return ParseResponse(keyword=request.keyword, suppliers=[], total_found=0)
        _running_parse_requests.add(request_key)
    
    try:
        # Connect to Chrome CDP
        # Open search engine pages (Google/Yandex)
        # Collect links from search results
        # Return suppliers list
        return ParseResponse(keyword=request.keyword, suppliers=suppliers, total_found=len(suppliers))
    finally:
        async with _parse_lock:
            _running_parse_requests.discard(request_key)
```

**–ü–æ–ª–Ω—ã–π –∫–æ–¥ —Å—Ö–µ–º –∏ —Ç–∏–ø–æ–≤:**

**Backend —Å—Ö–µ–º—ã (Pydantic):**

```python
# backend/app/transport/schemas/parsing.py
class StartParsingRequestDTO(BaseModel):
    """Request DTO for starting parsing."""
    keyword: str
    depth: int = Field(default=10, description="Number of search result pages to parse (depth)")
    source: str = Field(default="google", description="Source for parsing: 'google', 'yandex', or 'both'")

class StartParsingResponseDTO(BaseModel):
    """Response DTO for parsing start."""
    runId: str  # Use camelCase directly (no alias needed for response)
    keyword: str
    status: str

class ParsingStatusResponseDTO(BaseModel):
    """Response DTO for parsing status."""
    runId: str = Field(alias="run_id")
    keyword: str
    status: str
    startedAt: Optional[datetime] = Field(None, alias="started_at")
    finishedAt: Optional[datetime] = Field(None, alias="finished_at")
    error: Optional[str] = Field(None, alias="error_message")
    resultsCount: Optional[int] = None
```

**Frontend —Ç–∏–ø—ã (TypeScript):**

```typescript
// frontend/moderator-dashboard-ui/lib/types.ts
export interface ParsingRunDTO {
  run_id?: string  // Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç snake_case
  runId?: string  // –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  keyword: string
  status: string  // –ú–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º —Å—Ç–∞—Ç—É—Å–æ–º, –Ω–µ —Ç–æ–ª—å–∫–æ "running" | "completed" | "failed"
  started_at?: string | null  // Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç snake_case
  startedAt?: string | null  // –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  finished_at?: string | null  // Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç snake_case
  finishedAt?: string | null  // –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  error_message?: string | null  // Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç snake_case
  error?: string | null  // –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  resultsCount: number | null
  created_at?: string  // Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç snake_case
  createdAt?: string  // –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
}

export interface DomainQueueEntryDTO {
  domain: string
  keyword: string
  url: string
  parsingRunId: string | null
  status: string
  createdAt: string
}
```

**Parser Service —Å—Ö–µ–º—ã:**

```python
# parser_service/api.py
class ParseRequest(BaseModel):
    """Request model for parsing."""
    keyword: str
    depth: int = 10  # Number of search result pages to parse
    source: str = "google"  # "google", "yandex", or "both"

class ParsedSupplier(BaseModel):
    """Parsed supplier data."""
    name: str
    domain: Optional[str] = None
    email: Optional[str] = None
    phone: Optional[str] = None
    inn: Optional[str] = None
    source_url: str

class ParseResponse(BaseModel):
    """Response model for parsing."""
    keyword: str
    suppliers: List[ParsedSupplier]
    total_found: int
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
start-all.bat

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤
curl http://127.0.0.1:8000/health      # Backend
curl http://127.0.0.1:9003/health     # Parser Service
curl http://127.0.0.1:9222/json/version  # Chrome CDP

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
curl -X POST http://127.0.0.1:8000/parsing/start \
  -H "Content-Type: application/json; charset=utf-8" \
  -d '{"keyword":"–∫–∏—Ä–ø–∏—á","depth":1,"source":"google"}'

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
curl "http://127.0.0.1:8000/domains/queue?parsingRunId=<runId>"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í –æ–∫–Ω–µ Chrome –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤–∫–ª–∞–¥–∫–∏ —Å Google/Yandex –ø–æ–∏—Å–∫–æ–º
- –ü–∞—Ä—Å–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–æ (–Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π runId —Å –Ω–æ–≤—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

#### `GET /parsing/status/{run_id}`
–°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (—Å –∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ - —Å–º. –Ω–∏–∂–µ)

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `run_id` (string) - UUID –∑–∞–ø—É—Å–∫–∞

**Response:** `ParsingStatusResponseDTO`

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

```python
# backend/app/transport/routers/parsing.py
@router.get("/status/{run_id}", response_model=ParsingStatusResponseDTO)
async def get_parsing_status_endpoint(
    run_id: str,
    db: AsyncSession = Depends(get_db)
):
    run = await get_parsing_status.execute(db=db, run_id=run_id)
    if not run:
        raise HTTPException(status_code=404, detail="Parsing run not found")
    
    # Extract keyword from request
    keyword = "Unknown"
    if run.request:
        if run.request.title:
            keyword = run.request.title
        elif run.request.raw_keys_json:
            # Parse JSON and extract first keyword
            keys_data = json.loads(run.request.raw_keys_json)
            # ...
    
    status_dict = {
        "runId": run.run_id,
        "keyword": keyword,
        "status": run.status,
        "startedAt": run.started_at.isoformat() if run.started_at else None,
        "finishedAt": run.finished_at.isoformat() if run.finished_at else None,
        "error": run.error_message,
        "resultsCount": None,
    }
    return ParsingStatusResponseDTO.model_validate(status_dict)
```

**‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- Endpoint –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ Pydantic: `Field required [type=missing, input_value={'runId': ...}, input_type=dict]`
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ –º–∞–ø–ø–∏–Ω–≥–µ `runId` vs `run_id` –≤ DTO
- **–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –∏–ª–∏ endpoint `/parsing-runs/{run_id}`

**–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**

**‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢ –†–ê–ë–û–¢–´: CAPTCHA**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ Google/Yandex –º–æ–∂–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è CAPTCHA
- –ü–∞—Ä—Å–µ—Ä –æ–∂–∏–¥–∞–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ—à–∏—Ç CAPTCHA –≤—Ä—É—á–Ω—É—é –≤ –≤–∏–¥–∏–º–æ–º –æ–∫–Ω–µ Chrome
- –ï—Å–ª–∏ CAPTCHA –Ω–µ —Ä–µ—à–µ–Ω–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç - –ø–∞—Ä—Å–∏–Ω–≥ –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —Å –æ—à–∏–±–∫–æ–π

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ü–∞—Ä—Å–µ—Ä –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç CAPTCHA –∏ –∂–¥–µ—Ç –¥–æ 5 –º–∏–Ω—É—Ç
- –í—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è: `[WAIT] GOOGLE: Waiting for CAPTCHA to be solved...`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤—Ä—É—á–Ω—É—é —Ä–µ—à–∏—Ç—å CAPTCHA –≤ –æ–∫–Ω–µ Chrome
- –ü–æ—Å–ª–µ —Ä–µ—à–µ–Ω–∏—è CAPTCHA –ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ –±—É–¥—É—â–µ–º:**
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ —Ä–µ—à–µ–Ω–∏—è CAPTCHA (2captcha, anti-captcha –∏ —Ç.–¥.)
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ —Ä–µ—à–µ–Ω–∏–µ CAPTCHA
- [ ] –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ CAPTCHA —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [ ] –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å CAPTCHA –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π (–ø–∞—Ä—Å–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø—Ä–∏ CAPTCHA)

---

### –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ

**1. Frontend ‚Üí Backend (–∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞):**

```
POST http://127.0.0.1:8000/parsing/start
Content-Type: application/json; charset=utf-8

{
  "keyword": "–∫–∏—Ä–ø–∏—á",
  "depth": 2,
  "source": "google"
}
```

**2. Backend —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ –ë–î:**

```python
# –°–æ–∑–¥–∞–µ—Ç—Å—è parsing_request
{
  "title": "–∫–∏—Ä–ø–∏—á",
  "raw_keys_json": "[\"–∫–∏—Ä–ø–∏—á\"]",
  "source": "google"
}

# –°–æ–∑–¥–∞–µ—Ç—Å—è parsing_run
{
  "run_id": "4f468e53-9ec5-4c03-aebf-04c54bdf5477",
  "request_id": <request_id>,
  "status": "running",
  "source": "google",
  "depth": 2,
  "started_at": "2025-12-27T10:15:00Z"
}
```

**3. Backend ‚Üí Parser Service (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ):**

```
POST http://127.0.0.1:9003/parse
Content-Type: application/json; charset=utf-8

{
  "keyword": "–∫–∏—Ä–ø–∏—á",
  "depth": 2,
  "source": "google"
}
```

**4. Parser Service –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Chrome CDP:**

```python
# parser_service/src/parser.py
# 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Chrome CDP
browser = await playwright.chromium.connect_over_cdp("http://127.0.0.1:9222")

# 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –±—Ä–∞—É–∑–µ—Ä–∞
contexts = browser.contexts
context = contexts[0]  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å

# 3. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞
page = await context.new_page()

# 4. –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞
await page.goto("https://www.google.com/search?q=–∫–∏—Ä–ø–∏—á+–∫—É–ø–∏—Ç—å&hl=ru")

# 5. –°–±–æ—Ä —Å—Å—ã–ª–æ–∫ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
# 6. –ü–∞—Ä—Å–∏–Ω–≥ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (depth —Ä–∞–∑)
```

**5. Parser Service ‚Üí Backend (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã):**

```
Response:
{
  "keyword": "–∫–∏—Ä–ø–∏—á",
  "suppliers": [
    {
      "name": "kirpich-lavka.ru",
      "domain": "kirpich-lavka.ru",
      "email": null,
      "phone": null,
      "inn": null,
      "source_url": "https://kirpich-lavka.ru/..."
    },
    ...
  ],
  "total_found": 119
}
```

**6. Backend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ë–î:**

```python
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ supplier —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ domains_queue
{
  "domain": "kirpich-lavka.ru",
  "keyword": "–∫–∏—Ä–ø–∏—á",
  "url": "https://kirpich-lavka.ru/...",
  "parsing_run_id": "4f468e53-9ec5-4c03-aebf-04c54bdf5477",
  "status": "pending"
}
```

**7. Backend –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞:**

```python
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ parsing_run
{
  "status": "completed",
  "finished_at": "2025-12-27T10:20:00Z",
  "results_count": 119
}
```

**8. Frontend –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

```
GET http://127.0.0.1:8000/domains/queue?parsingRunId=4f468e53-9ec5-4c03-aebf-04c54bdf5477

Response:
{
  "entries": [
    {
      "domain": "kirpich-lavka.ru",
      "keyword": "–∫–∏—Ä–ø–∏—á",
      "url": "https://kirpich-lavka.ru/...",
      "parsingRunId": "4f468e53-9ec5-4c03-aebf-04c54bdf5477",
      "status": "pending",
      "createdAt": "2025-12-27T10:20:00Z"
    },
    ...
  ],
  "total": 119,
  "limit": 100,
  "offset": 0
}
```

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—Å–µ–π —Å–≤—è–∑–∫–∏

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
curl http://127.0.0.1:8000/health      # Backend
curl http://127.0.0.1:9003/health     # Parser Service
curl http://127.0.0.1:9222/json/version  # Chrome CDP

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
curl -X POST http://127.0.0.1:8000/parsing/start \
  -H "Content-Type: application/json; charset=utf-8" \
  -d '{"keyword":"–∫–∏—Ä–ø–∏—á","depth":1,"source":"google"}'

# –û—Ç–≤–µ—Ç:
# {
#   "runId": "4f468e53-9ec5-4c03-aebf-04c54bdf5477",
#   "keyword": "–∫–∏—Ä–ø–∏—á",
#   "status": "running"
# }

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å (–ø–æ–¥–æ–∂–¥–∞—Ç—å 10-30 —Å–µ–∫—É–Ω–¥)
curl "http://127.0.0.1:8000/parsing/status/4f468e53-9ec5-4c03-aebf-04c54bdf5477"

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
curl "http://127.0.0.1:8000/domains/queue?parsingRunId=4f468e53-9ec5-4c03-aebf-04c54bdf5477&limit=10"

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∫–ª–∞–¥–∫–∏ Chrome (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –≤–∫–ª–∞–¥–∫–∏ —Å –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏)
curl http://127.0.0.1:9222/json | python -m json.tool | grep -i "google\|yandex"
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**

1. ‚úÖ Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç runId –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
2. ‚úÖ –í –æ–∫–Ω–µ Chrome –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤–∫–ª–∞–¥–∫–∏ —Å Google/Yandex –ø–æ–∏—Å–∫–æ–º
3. ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–æ (–∑–∞–Ω–∏–º–∞–µ—Ç –≤—Ä–µ–º—è, –Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
4. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
5. ‚úÖ –°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ "completed"
6. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `/domains/queue?parsingRunId=...`

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ:**

- –û—Ç–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ Chrome (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–æ —Å CDP)
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –≤–∫–ª–∞–¥–∫–∞–º–∏ - –¥–æ–ª–∂–Ω—ã –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –≤–∫–ª–∞–¥–∫–∏ —Å –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏
- –í –∏—Å—Ç–æ—Ä–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å–∏ –æ –ø–æ—Å–µ—â–µ–Ω–∏–∏ Google/Yandex
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤–∫–ª–∞–¥–∫–∏ –º–æ–≥—É—Ç –∑–∞–∫—Ä—ã—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 2.6 Parsing Runs (–ò—Å—Ç–æ—Ä–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞)

**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `/parsing/runs`

#### `GET /parsing/runs`
–°–ø–∏—Å–æ–∫ –∑–∞–ø—É—Å–∫–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞.

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (int, default=100, min=1, max=1000)
- `offset` (int, default=0, min=0)

**Response:** `ParsingRunsListResponseDTO`

#### `GET /parsing/runs/{run_id}`
–ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø—É—Å–∫ –ø–æ ID.

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `run_id` (string) - UUID –∑–∞–ø—É—Å–∫–∞

**Response:** `ParsingRunDTO`

**–û—à–∏–±–∫–∏:**
- `404` - –∑–∞–ø—É—Å–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω

#### `DELETE /parsing/runs/{run_id}`
–£–¥–∞–ª–∏—Ç—å –æ–¥–∏–Ω –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-28)

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `run_id` (string) - UUID –∑–∞–ø—É—Å–∫–∞

**Response:** `204 No Content` (–ø—É—Å—Ç–æ–µ —Ç–µ–ª–æ)

**–û—à–∏–±–∫–∏:**
- `404` - –∑–∞–ø—É—Å–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
- `500` - –æ—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. Frontend –≤—ã–∑—ã–≤–∞–µ—Ç `DELETE /parsing/runs/{run_id}` —á–µ—Ä–µ–∑ `apiFetch`
2. Backend –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä—è–º–æ–π SQL `DELETE FROM parsing_runs WHERE run_id = :run_id`
3. Backend –¥–µ–ª–∞–µ—Ç `commit()` —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
4. Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `204 No Content`
5. Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ `loadRuns()` —Å —Ç–µ–∫—É—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ URL

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
```powershell
# 1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ runs
curl "http://127.0.0.1:8000/parsing/runs?limit=5&offset=0"

# 2. –£–¥–∞–ª–∏—Ç—å –æ–¥–∏–Ω run
curl -X DELETE "http://127.0.0.1:8000/parsing/runs/{run_id}"

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ run —É–¥–∞–ª–µ–Ω
curl "http://127.0.0.1:8000/parsing/runs?limit=10&offset=0"
# –£–¥–∞–ª–µ–Ω–Ω—ã–π run –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Å–ø–∏—Å–∫–µ
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `204 No Content`
- –ó–∞–ø–∏—Å—å —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–¥–∞–ª–µ–Ω–Ω—É—é –∑–∞–ø–∏—Å—å

#### `GET /parsing/runs/{run_id}/logs`
–ü–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-29)

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `run_id` (string) - UUID –∑–∞–ø—É—Å–∫–∞

**Response:**
```json
{
  "run_id": "uuid",
  "parsing_logs": {
    "google": {
      "total_links": 8,
      "pages_processed": 1,
      "links_by_page": {"1": 16},
      "last_links": ["https://example.com/page1", ...]
    },
    "yandex": {
      "total_links": 10,
      "pages_processed": 1,
      "links_by_page": {"1": 20},
      "last_links": ["https://example.com/page2", ...]
    }
  }
}
```

**–û—à–∏–±–∫–∏:**
- –ï—Å–ª–∏ run –Ω–µ –Ω–∞–π–¥–µ–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç `{"run_id": "...", "parsing_logs": {}}` (–Ω–µ 404)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. Frontend –≤—ã–∑—ã–≤–∞–µ—Ç `GET /parsing/runs/{run_id}/logs` —á–µ—Ä–µ–∑ `getParsingLogs()`
2. Backend –∏–∑–≤–ª–µ–∫–∞–µ—Ç `parsing_logs` –∏–∑ `process_log["parsing_logs"]` –≤ —Ç–∞–±–ª–∏—Ü–µ `parsing_runs`
3. Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–æ–≥–∏ –∏–ª–∏ –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç, –µ—Å–ª–∏ –ª–æ–≥–æ–≤ –Ω–µ—Ç

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
```powershell
# –ü–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
$runId = "<run_id>"
curl "http://127.0.0.1:8000/parsing/runs/$runId/logs"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `parsing_logs` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å—Å—ã–ª–∫–∞—Ö –¥–ª—è Google –∏ Yandex
- `last_links` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 20 –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞

#### `PUT /parsing/runs/{run_id}/logs`
–û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Parser Service).

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-29)

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `run_id` (string) - UUID –∑–∞–ø—É—Å–∫–∞

**Request body:**
```json
{
  "parsing_logs": {
    "google": {
      "total_links": 8,
      "pages_processed": 1,
      "links_by_page": {"1": 16},
      "last_links": ["https://example.com/page1", ...]
    },
    "yandex": {
      "total_links": 10,
      "pages_processed": 1,
      "links_by_page": {"1": 20},
      "last_links": ["https://example.com/page2", ...]
    }
  }
}
```

**Response:** `200 OK` —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. Parser Service –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ `parsing_logs` –∫–∞–∂–¥—ã–µ 2.5 —Å–µ–∫—É–Ω–¥—ã
2. Backend –æ–±–Ω–æ–≤–ª—è–µ—Ç `process_log["parsing_logs"]` –≤ —Ç–∞–±–ª–∏—Ü–µ `parsing_runs`
3. Frontend –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ª–æ–≥–∏ —á–µ—Ä–µ–∑ `GET /parsing/runs/{run_id}/logs`

#### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ (Google/–Ø–Ω–¥–µ–∫—Å) ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-29)

**–û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—á–µ–π —Å–≤—è–∑–∫–∏ Backend-Frontend:**

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (Google/–Ø–Ω–¥–µ–∫—Å) –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ `parsing_logs`. –ë–µ–π–¥–∂–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –∫–∞–∫–æ–π –ø–æ–∏—Å–∫–æ–≤–∏–∫ —Ä–µ–∞–ª—å–Ω–æ –Ω–∞—à–µ–ª URL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–µ–Ω–∞.

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `parsing_logs` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –∞ –Ω–µ `source` –∏–∑ –ë–î, —Ç–∞–∫ –∫–∞–∫ –≤ –ë–î –≤—Å–µ URL –∏–º–µ—é—Ç `source="both"` –∫–æ–≥–¥–∞ –æ–±–∞ –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞ —Ä–∞–±–æ—Ç–∞—é—Ç.

**üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [`docs/SOURCE_DETERMINATION_FLOW.md`](SOURCE_DETERMINATION_FLOW.md)

**Endpoint'—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏:**

1. **Backend:**
   - `GET /parsing/runs/{run_id}/logs` - –ø–æ–ª—É—á–µ–Ω–∏–µ `parsing_logs`
   - `PUT /parsing/runs/{run_id}/logs` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `parsing_logs` (Parser Service)

2. **Frontend:**
   - `getParsingLogs(runId)` –≤ `lib/api.ts` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤
   - `collectDomainSources(urls, parsingLogs)` –≤ `lib/utils-domain.ts` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–µ–π–¥–∂–µ–π –≤ `app/parsing-runs/[runId]/page.tsx`

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**

```powershell
# 1. –ü–æ–ª—É—á–∏—Ç—å parsing_logs
$runId = "<run_id>"
$logs = Invoke-RestMethod -Uri "http://127.0.0.1:8000/parsing/runs/$runId/logs"
Write-Host "Google: $($logs.parsing_logs.google.total_links) links"
Write-Host "Yandex: $($logs.parsing_logs.yandex.total_links) links"

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ URL –≤ –ë–î
$domains = Invoke-RestMethod -Uri "http://127.0.0.1:8000/domains/queue?parsingRunId=$runId&limit=1000"
Write-Host "Total URLs: $($domains.entries.Count)"
Write-Host "Google: $(($domains.entries | Where-Object { $_.source -eq 'google' }).Count)"
Write-Host "Yandex: $(($domains.entries | Where-Object { $_.source -eq 'yandex' }).Count)"
Write-Host "Both: $(($domains.entries | Where-Object { $_.source -eq 'both' }).Count)"

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
# –û—Ç–∫—Ä—ã—Ç—å: http://localhost:3000/parsing-runs/$runId
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±–µ–π–¥–∂–∏ Google/–Ø–Ω–¥–µ–∫—Å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–µ–Ω–∞
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

- –î–æ–º–µ–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –±–µ–π–¥–∂–∏ (Google/–Ø–Ω–¥–µ–∫—Å), –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ –Ω–∞—à–ª–∏ –∏—Ö URL —Å–æ–≥–ª–∞—Å–Ω–æ `parsing_logs`
- –ï—Å–ª–∏ URL –Ω–∞–π–¥–µ–Ω —Ç–æ–ª—å–∫–æ Google - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–∏–Ω–∏–π –±–µ–π–¥–∂ "Google"
- –ï—Å–ª–∏ URL –Ω–∞–π–¥–µ–Ω —Ç–æ–ª—å–∫–æ –Ø–Ω–¥–µ–∫—Å - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∂–µ–ª—Ç—ã–π –±–µ–π–¥–∂ "–Ø–Ω–¥–µ–∫—Å"
- –ï—Å–ª–∏ URL –Ω–∞–π–¥–µ–Ω –æ–±–æ–∏–º–∏ - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –æ–±–∞ –±–µ–π–¥–∂–∞

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤:**

**–ó–∞–ø—Ä–æ—Å:**
```powershell
curl "http://127.0.0.1:8000/parsing/runs/1140b974-e97b-47fb-a26c-94e956ac7fd5/logs"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "run_id": "1140b974-e97b-47fb-a26c-94e956ac7fd5",
  "parsing_logs": {
    "google": {
      "total_links": 8,
      "pages_processed": 1,
      "links_by_page": {"1": 16},
      "last_links": [
        "https://metallobazav.ru/catalog/armatura/",
        "https://petrovich.ru/catalog/12107/",
        ...
      ]
    },
    "yandex": {
      "total_links": 10,
      "pages_processed": 1,
      "links_by_page": {"1": 20},
      "last_links": [
        "https://MetallobazaV.ru/catalog/armatura/",
        "https://Petrovich.ru/catalog/12107/",
        ...
      ]
    }
  }
}
```

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**

1. **Parser Service** —Å–æ–±–∏—Ä–∞–µ—Ç URL –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –æ–±–Ω–æ–≤–ª—è–µ—Ç `parsing_logs`
2. **Backend** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `parsing_logs` –≤ `process_log["parsing_logs"]` –≤ —Ç–∞–±–ª–∏—Ü–µ `parsing_runs`
3. **Frontend** –∑–∞–≥—Ä—É–∂–∞–µ—Ç `parsing_logs` –≤–º–µ—Å—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `domains_queue`
4. **Frontend** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `collectDomainSources(group.urls, parsingLogs)` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
5. **Frontend** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –±–µ–π–¥–∂–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

**–ö–æ–¥ Frontend:**

```typescript
// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
const [runData, domainsData, logsData] = await Promise.all([
  getParsingRun(runId),
  getDomainsQueue({ parsingRunId: runId, limit: 1000 }),
  getParsingLogs(runId).catch(() => ({ parsing_logs: {} }))
])

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
const parsingLogsForSources = logsData.parsing_logs && Object.keys(logsData.parsing_logs).length > 0 
  ? logsData.parsing_logs 
  : null

const sources = collectDomainSources(group.urls, parsingLogsForSources)

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–µ–π–¥–∂–µ–π
{group.sources && group.sources.includes("google") && (
  <Badge variant="outline" className="bg-blue-100 text-blue-700 border-blue-300 text-xs">
    Google
  </Badge>
)}
{group.sources && group.sources.includes("yandex") && (
  <Badge variant="outline" className="bg-yellow-100 text-yellow-700 border-yellow-300 text-xs">
    –Ø–Ω–¥–µ–∫—Å
  </Badge>
)}
```

#### `DELETE /parsing/runs/bulk`
–ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-28)

**Request body:**
```json
["run-id-1", "run-id-2", "run-id-3"]
```
–∏–ª–∏
```json
{
  "run_ids": ["run-id-1", "run-id-2", "run-id-3"]
}
```

**Response:**
- **200 OK** (–µ—Å–ª–∏ –≤—Å–µ —É–¥–∞–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ):
  ```json
  {
    "deleted": 3,
    "total": 3
  }
  ```
- **207 Multi-Status** (–µ—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏):
  ```json
  {
    "deleted": 2,
    "total": 3,
    "errors": ["Error deleting run-id-3: ..."]
  }
  ```

**–û—à–∏–±–∫–∏:**
- `400` - –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç body (–Ω–µ —Å–ø–∏—Å–æ–∫ –∏–ª–∏ –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. Frontend —Å–æ–±–∏—Ä–∞–µ—Ç `runIds` –∏–∑ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
2. Frontend –≤—ã–∑—ã–≤–∞–µ—Ç `DELETE /parsing/runs/bulk` —Å –º–∞—Å—Å–∏–≤–æ–º `runIds` —á–µ—Ä–µ–∑ `apiFetch`
3. Backend –¥–ª—è –∫–∞–∂–¥–æ–≥–æ `run_id`:
   - –°–æ–∑–¥–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é —Å–µ—Å—Å–∏—é –ë–î
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä—è–º–æ–π SQL `DELETE FROM parsing_runs WHERE run_id = :run_id`
   - –î–µ–ª–∞–µ—Ç `commit()` –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å–µ—Å—Å–∏–∏
   - –õ–æ–≥–∏—Ä—É–µ—Ç –≤ audit_log –ü–û–°–õ–ï commit (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å–µ—Å—Å–∏–∏)
4. Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `200` –∏–ª–∏ `207` —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
5. Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ `loadRuns()` —Å —Ç–µ–∫—É—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ URL
6. Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é, –µ—Å–ª–∏ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞–ª–∞ –ø—É—Å—Ç–æ–π

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- **–û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç `InFailedSQLTransactionError`
- **Audit log –ü–û–°–õ–ï commit** - –æ—à–∏–±–∫–∏ –∞—É–¥–∏—Ç–∞ –Ω–µ –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç —É–¥–∞–ª–µ–Ω–∏–µ
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é** - —á—Ç–µ–Ω–∏–µ –∏–∑ –ë–î, –∞ –Ω–µ –∏–∑ –∫—ç—à–∞ —Å–µ—Å—Å–∏–∏
- **–ü–æ—Ä—è–¥–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤** - `/runs/bulk` –î–û `/runs/{run_id}` –≤ FastAPI router

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
```powershell
# 1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ runs —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "failed"
curl "http://127.0.0.1:8000/parsing/runs?status=failed&limit=5&offset=0"

# 2. –£–¥–∞–ª–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ runs
curl -X DELETE "http://127.0.0.1:8000/parsing/runs/bulk" \
  -H "Content-Type: application/json" \
  -d '["run-id-1", "run-id-2", "run-id-3"]'

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ runs —É–¥–∞–ª–µ–Ω—ã
curl "http://127.0.0.1:8000/parsing/runs?status=failed&limit=10&offset=0"
# –£–¥–∞–ª–µ–Ω–Ω—ã–µ runs –Ω–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Å–ø–∏—Å–∫–µ
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Frontend:**
1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:3000/parsing-runs`
2. –í—ã–±—Ä–∞—Ç—å —Å—Ç–∞—Ç—É—Å "–û—à–∏–±–∫–∞" –≤ Select - —Å–ø–∏—Å–æ–∫ –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–∏—Ç—å—Å—è
3. –í—ã–¥–µ–ª–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–û—à–∏–±–∫–∞" (–∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π)
4. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–£–¥–∞–ª–∏—Ç—å"
5. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ:
   - –ó–∞–ø–∏—Å–∏ —É–¥–∞–ª–µ–Ω—ã –∏–∑ —Å–ø–∏—Å–∫–∞
   - –°–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–∏–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞, –µ—Å–ª–∏ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞–ª–∞ –ø—É—Å—Ç–æ–π
   - –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–µ—Ç –æ—à–∏–±–æ–∫

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `200` –∏–ª–∏ `207` —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º `deleted` count
- –í—Å–µ –∑–∞–ø–∏—Å–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
- Select —Å—Ç–∞—Ç—É—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Å—Ä–∞–∑—É –æ–±–Ω–æ–≤–ª—è–µ—Ç URL)
- –í –ª–æ–≥–∞—Ö Backend –≤–∏–¥–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è "Committed deletion" –∏ "Verified: Run ... deleted successfully"

### 2.7 Blacklist (–ß–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫)

**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `/moderator/blacklist`

#### `GET /moderator/blacklist`
–°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π —á–µ—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (int, default=100, min=1, max=1000)
- `offset` (int, default=0, min=0)

**Response:** `BlacklistResponseDTO`

#### `POST /moderator/blacklist`
–î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω –≤ —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫.

**Request body:** `AddToBlacklistRequestDTO` (camelCase)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Backend –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `addedBy` ‚Üí `added_by`, `parsingRunId` ‚Üí `parsing_run_id`

**Response:** `BlacklistEntryDTO` (status 201)

#### `DELETE /moderator/blacklist/{domain}`
–£–¥–∞–ª–∏—Ç—å –¥–æ–º–µ–Ω –∏–∑ —á–µ—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.

**Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `domain` (string) - –¥–æ–º–µ–Ω

**Response:** `204 No Content`

**–û—à–∏–±–∫–∏:**
- `404` - –¥–æ–º–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ

### 2.8 Health Check

#### `GET /health`
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û** (–±–∞–∑–æ–≤—ã–π endpoint, –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å)

**Response:**
```json
{
  "status": "ok"
}
```

---

## 3. Frontend (Next.js)

### 3.1 –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Next.js 16** (App Router)
- **TypeScript** (strict mode)
- **React 18**
- **Tailwind CSS**
- **Shadcn UI**

### 3.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò** (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Å params –∏ NaN, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

#### `/` (–ì–ª–∞–≤–Ω–∞—è - Dashboard)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-29)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –§–æ—Ä–º–∞ –∑–∞–ø—É—Å–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ, –≥–ª—É–±–∏–Ω–∞, –∏—Å—Ç–æ—á–Ω–∏–∫)
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏: –í –æ—á–µ—Ä–µ–¥–∏, –ù–æ–≤—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏, –ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä—Å–∏–Ω–≥–æ–≤, Blacklist
- ‚úÖ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø—É—Å–∫–∏ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª)
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å–±–∞—Ä –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å polling —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ CTA –∫–Ω–æ–ø–∫–∏: –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—á–µ—Ä–µ–¥—å, –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–≤—ã—Ö, –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Blacklist

**–°–≤—è–∑–∫–∞ Backend-Frontend:**

**1. –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç—Ä–∏–∫:**
```typescript
// frontend/moderator-dashboard-ui/app/page.tsx
const [domainsData, suppliersData, runsData, blacklistData] = await Promise.all([
  getDomainsQueue({ limit: 1 }),              // GET /domains/queue?limit=1
  getSuppliers({ limit: 1 }),                  // GET /moderator/suppliers?limit=1
  getParsingRuns({ status: "running", limit: 1 }),  // GET /parsing/runs?status=running&limit=1
  getBlacklist({ limit: 1 }),                  // GET /moderator/blacklist?limit=1
])

const recentRunsData = await getParsingRuns({ 
  limit: 10, 
  sort: "created_at", 
  order: "desc" 
})  // GET /parsing/runs?limit=10&sort=created_at&order=desc
```

**2. –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞:**
```typescript
// –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥"
const result = await startParsing({
  keyword: keyword.trim(),
  depth,
  source,
})  // POST /parsing/start

// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–±–∞—Ä
setParsingProgress({ isRunning: true, runId: result.runId, status: "running" })
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

**3. Polling —Å—Ç–∞—Ç—É—Å–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞:**
```typescript
// Polling –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
useEffect(() => {
  if (!parsingProgress.isRunning || !parsingProgress.runId) return

  const interval = setInterval(async () => {
    const run = await getParsingRun(parsingProgress.runId!)  // GET /parsing/runs/{runId}
    if (run.status === "completed" || run.status === "failed") {
      setParsingProgress({ isRunning: false, runId: null, status: run.status })
      loadDashboardData()
      toast.success("–ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω")
    } else {
      setParsingProgress((prev) => ({ ...prev, status: run.status }))
    }
  }, 3000)

  return () => clearInterval(interval)
}, [parsingProgress.isRunning, parsingProgress.runId])
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:3000`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–µ—Ç—Ä–∏–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø—É—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ - –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å–±–∞—Ä
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–±–∞—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–±–∞—Ä —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø—É—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–º —Å–∫—Ä–æ–ª–ª–µ
- –ü—Ä–æ–≥—Ä–µ—Å—Å–±–∞—Ä –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø–∞—Ä—Å–∏–Ω–≥–∞
- –°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ polling
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ

#### `/suppliers` (–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-30)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É (supplier/reseller)
- ‚úÖ –í—ã–±–æ—Ä –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ (—á–µ–∫–±–æ–∫—Å—ã)
- ‚úÖ –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–∑–≤–∞–Ω–∏–µ, –ò–ù–ù, –¥–æ–º–µ–Ω, —Ç–∏–ø)

**–°–≤—è–∑–∫–∞ Backend-Frontend:**

**1. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤:**
```typescript
// frontend/moderator-dashboard-ui/app/suppliers/suppliers-client.tsx
const suppliersData = await getSuppliers({ limit: 1000 })  // GET /moderator/suppliers?limit=1000
```

**2. –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ:**
```typescript
// –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ"
for (const id of selectedIds) {
  await deleteSupplier(id)  // DELETE /moderator/suppliers/{id}
}
// –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
loadData()
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:3000/suppliers`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
3. –í—ã–¥–µ–ª–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ (—á–µ–∫–±–æ–∫—Å—ã)
4. –ù–∞–∂–∞—Ç—å "–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ" - –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏ –¥–æ–ª–∂–Ω—ã –∏—Å—á–µ–∑–Ω—É—Ç—å
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ß–µ–∫–±–æ–∫—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –°–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è

#### `/suppliers/[id]` (–î–µ—Ç–∞–ª–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-30)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–µ
- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —Å Checko –¥–∞–Ω–Ω—ã–º–∏:
  - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å (–≥—Ä–∞—Ñ–∏–∫–∏ –≤—ã—Ä—É—á–∫–∏ –∏ –ø—Ä–∏–±—ã–ª–∏, –∏—Å—Ç–æ—Ä–∏—è –ø–æ –≥–æ–¥–∞–º)
  - –û—Ü–µ–Ω–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ (—Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ, —Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è, –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ)
  - –û–ö–í–≠–î (–≤ –æ–¥–Ω–æ–π –≥–∞—Ä–º–æ—à–∫–µ)
  - –†–∏—Å–∫–∏ (–∞—Ä–±–∏—Ç—Ä–∞–∂, –ø—Ä–æ–≤–µ—Ä–∫–∏, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞)
  - –£—á—Ä–µ–¥–∏—Ç–µ–ª–∏ –∏ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–∏ (—Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ Checko.ru)
- ‚úÖ –î–µ–π—Å—Ç–≤–∏—è: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ Checko, Blacklist, –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö Checko –¥–∞–Ω–Ω—ã—Ö (—Ñ–∏–Ω–∞–Ω—Å—ã, —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –¥–µ–ª–∞, –ø—Ä–æ–≤–µ—Ä–∫–∏)

**–°–≤—è–∑–∫–∞ Backend-Frontend:**

**1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞:**
```typescript
// frontend/moderator-dashboard-ui/app/suppliers/[id]/supplier-detail-client.tsx
const supplier = await getSupplier(supplierId)  // GET /moderator/suppliers/{id}
// checkoData –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ supplier.checkoData (JSON —Å—Ç—Ä–æ–∫–∞)
const checkoData = supplier.checkoData ? JSON.parse(supplier.checkoData) : null
```

**2. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö Checko:**
```typescript
// –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ Checko"
const checkoResponse = await getCheckoData(supplier.inn, false)  // GET /moderator/checko/{inn}
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ Checko
const updatedSupplier = await updateSupplier(supplier.id, {
  // ... –≤—Å–µ Checko –ø–æ–ª—è
  checkoData: checkoResponse.checkoData || null,
})  // PUT /moderator/suppliers/{id}
```

**3. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
```typescript
// frontend/moderator-dashboard-ui/components/supplier-card.tsx
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç SupplierCard –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
// - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ (recharts)
// - –û—Ü–µ–Ω–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ (calculateReliabilityScore)
// - –û–ö–í–≠–î (accordion)
// - –†–∏—Å–∫–∏ (—Å –≤–µ—Ä–¥–∏–∫—Ç–æ–º –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏)
// - –£—á—Ä–µ–¥–∏—Ç–µ–ª–∏ –∏ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–∏ (—Å —Å—Å—ã–ª–∫–∞–º–∏)
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:3000/suppliers/{id}`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ—Ü–µ–Ω–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –û–ö–í–≠–î –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≥–∞—Ä–º–æ—à–∫–µ
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —É—á—Ä–µ–¥–∏—Ç–µ–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ Checko.ru
7. –ù–∞–∂–∞—Ç—å "–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ Checko" - –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –æ–±–Ω–æ–≤–∏—Ç—å—Å—è
8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –í—Å–µ Checko –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (—Ñ–∏–Ω–∞–Ω—Å—ã, —Ä–∏—Å–∫–∏, —É—á—Ä–µ–¥–∏—Ç–µ–ª–∏)
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (recharts)
- –û—Ü–µ–Ω–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- –û–ö–í–≠–î –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –æ–¥–Ω–æ–π –≥–∞—Ä–º–æ—à–∫–µ
- –£—á—Ä–µ–¥–∏—Ç–µ–ª–∏ –∏–º–µ—é—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Checko.ru (–µ—Å–ª–∏ –µ—Å—Ç—å –ò–ù–ù)

#### `/suppliers/[id]/edit` (–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-30)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è/—Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
- ‚úÖ –ü–æ–ª—è: name, inn, email, domain, address, type
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø–æ–ª–Ω–∏—Ç—å –î–∞–Ω–Ω—ã–µ" –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Checko
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π –∏–∑ Checko API
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö Checko –¥–∞–Ω–Ω—ã—Ö (–≤–∫–ª—é—á–∞—è checkoData)

**–°–≤—è–∑–∫–∞ Backend-Frontend:**

**1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (–ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏):**
```typescript
// frontend/moderator-dashboard-ui/app/suppliers/[id]/edit/supplier-edit-client.tsx
const supplier = await getSupplier(supplierId)  // GET /moderator/suppliers/{id}
// –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏, –≤–∫–ª—é—á–∞—è Checko –ø–æ–ª—è
setFormData({
  name: supplier.name,
  inn: supplier.inn,
  // ... –≤—Å–µ Checko –ø–æ–ª—è
  checkoData: supplier.checkoData || null,
})
```

**2. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Checko:**
```typescript
// –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ó–∞–ø–æ–ª–Ω–∏—Ç—å –î–∞–Ω–Ω—ã–µ"
const checkoResponse = await getCheckoData(formData.inn, false)  // GET /moderator/checko/{inn}
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
setFormData({
  ...formData,
  name: checkoResponse.name || formData.name,
  ogrn: checkoResponse.ogrn || null,
  kpp: checkoResponse.kpp || null,
  // ... –≤—Å–µ Checko –ø–æ–ª—è
  checkoData: checkoResponse.checkoData || null,
})
```

**3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞:**
```typescript
// –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
if (supplierId) {
  await updateSupplier(supplierId, formData)  // PUT /moderator/suppliers/{id}
} else {
  await createSupplier(formData)  // POST /moderator/suppliers
}
// –í—Å–µ Checko –ø–æ–ª—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ camelCase
// Backend –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç camelCase ‚Üí snake_case –¥–ª—è –ë–î
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:3000/suppliers/{id}/edit`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
3. –í–≤–µ—Å—Ç–∏ –ò–ù–ù –∏ –Ω–∞–∂–∞—Ç—å "–ó–∞–ø–æ–ª–Ω–∏—Ç—å –î–∞–Ω–Ω—ã–µ"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ Checko
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è - –ø–æ—Å—Ç–∞–≤—â–∏–∫ –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–∏—Ç—å—Å—è
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø–æ–ª–Ω–∏—Ç—å –î–∞–Ω–Ω—ã–µ" –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Checko
- –í—Å–µ Checko –ø–æ–ª—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- –î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

#### `/keywords` (–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-29)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –î–≤–æ–π–Ω–æ–π Accordion: –∫–ª—é—á–∏ ‚Üí –¥–æ–º–µ–Ω—ã ‚Üí URL
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤ –ø–æ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º –¥–æ–º–µ–Ω–æ–º (krn.specstali.ru, spb.specstali.ru ‚Üí specstali.ru)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤: –ü–æ—Å—Ç–∞–≤—â–∏–∫ (–∑–µ–ª–µ–Ω—ã–π), –†–µ—Å–µ–ª–ª–µ—Ä (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π), Blacklist (–∫—Ä–∞—Å–Ω—ã–π)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª—é—á–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞

**–°–≤—è–∑–∫–∞ Backend-Frontend:**

**1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
```typescript
// frontend/moderator-dashboard-ui/app/keywords/page.tsx
const [keywordsData, suppliersData, blacklistData] = await Promise.all([
  getKeywords(),                    // GET /keywords
  getSuppliers({ limit: 1000 }),    // GET /moderator/suppliers
  getBlacklist({ limit: 1000 }),    // GET /moderator/blacklist
])

// –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª—é—á–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º URL
const domainsData = await getDomainsQueue({ 
  keyword: keyword.keyword, 
  limit: 1000 
})  // GET /domains/queue?keyword={keyword}
```

**2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–æ–º–µ–Ω–∞–º:**
```typescript
// –ì—Ä—É–ø–ø–∏—Ä—É–µ–º URL –ø–æ root domain —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º extractRootDomain
const domainGroupsMap = new Map<string, DomainGroup>()
domainsData.entries.forEach((urlEntry) => {
  const rootDomain = extractRootDomain(urlEntry.domain).toLowerCase()
  // –ü–æ–¥–¥–æ–º–µ–Ω—ã (krn.specstali.ru, spb.specstali.ru) –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ–¥ specstali.ru
  if (!domainGroupsMap.has(rootDomain)) {
    domainGroupsMap.set(rootDomain, {
      rootDomain,
      urls: [],
      supplierType: suppliersMap.get(rootDomain) || null,
      isBlacklisted: blacklistedDomains.has(rootDomain),
    })
  }
  domainGroupsMap.get(rootDomain)!.urls.push(urlEntry)
})
```

**3. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤:**
- –ü–æ—Å—Ç–∞–≤—â–∏–∫: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `suppliersMap.get(rootDomain) === "supplier"`
- –†–µ—Å–µ–ª–ª–µ—Ä: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `suppliersMap.get(rootDomain) === "reseller"`
- Blacklist: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `blacklistedDomains.has(rootDomain)`

**4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–µ–π –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ:**
```python
# backend/app/usecases/start_parsing.py
# –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è parsing run –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è keyword
await create_keyword.execute(db=db, keyword=keyword)
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:3000/keywords`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–ª—é—á–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ accordion
3. –†–∞—Å–∫—Ä—ã—Ç—å –∫–ª—é—á - –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –¥–æ–º–µ–Ω—ã
4. –†–∞—Å–∫—Ä—ã—Ç—å –¥–æ–º–µ–Ω - –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è URL
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–¥–¥–æ–º–µ–Ω—ã –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º –¥–æ–º–µ–Ω–æ–º
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—Ç–∞—Ç—É—Å—ã (–ü–æ—Å—Ç–∞–≤—â–∏–∫/–†–µ—Å–µ–ª–ª–µ—Ä/Blacklist) –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
7. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á - –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ
8. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ —Å –Ω–æ–≤—ã–º –∫–ª—é—á–æ–º - –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–∏—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–ª—é—á–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≥–∞—Ä–º–æ—à–∫–µ
- –î–æ–º–µ–Ω—ã –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–ø–æ–¥–¥–æ–º–µ–Ω—ã –ø–æ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º)
- –°—Ç–∞—Ç—É—Å—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ù–æ–≤—ã–µ –∫–ª—é—á–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ

#### `/blacklist` (–ß–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫)
- –°–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞
- –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò**

#### `/parsing-runs` (–ò—Å—Ç–æ—Ä–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-28)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ parsing runs —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É (–≤—Å–µ, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –∑–∞–≤–µ—Ä—à–µ–Ω, –æ—à–∏–±–∫–∞)
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è, —Å—Ç–∞—Ç—É—Å—É)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏
- ‚úÖ –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–°–≤—è–∑–∫–∞ Backend-Frontend –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è:**

**Single Delete:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏
2. Frontend –≤—ã–∑—ã–≤–∞–µ—Ç `DELETE /parsing/runs/{run_id}` —á–µ—Ä–µ–∑ `apiFetch`
3. Backend —É–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `204 No Content`
4. Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ `loadRuns()` —Å —Ç–µ–∫—É—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ URL
5. Frontend –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é, –µ—Å–ª–∏ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞–ª–∞ –ø—É—Å—Ç–æ–π

**Bulk Delete:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–¥–µ–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π (—á–µ–∫–±–æ–∫—Å—ã)
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–£–¥–∞–ª–∏—Ç—å"
3. Frontend —Å–æ–±–∏—Ä–∞–µ—Ç `runIds` –∏–∑ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
4. Frontend –≤—ã–∑—ã–≤–∞–µ—Ç `DELETE /parsing/runs/bulk` —Å –º–∞—Å—Å–∏–≤–æ–º `runIds` —á–µ—Ä–µ–∑ `apiFetch`
5. Backend —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ (–∫–∞–∂–¥–∞—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å–µ—Å—Å–∏–∏) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `200` –∏–ª–∏ `207`
6. Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ `loadRuns()` —Å —Ç–µ–∫—É—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ URL
7. Frontend –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é, –µ—Å–ª–∏ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞–ª–∞ –ø—É—Å—Ç–æ–π

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –≤ Select –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
2. Frontend —Å—Ä–∞–∑—É –æ–±–Ω–æ–≤–ª—è–µ—Ç URL —á–µ—Ä–µ–∑ `router.push()` —Å –Ω–æ–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `status`
3. `useEffect` —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ `searchParams` –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `loadRuns()`
4. Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
5. Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Å –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:3000/parsing-runs`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
3. –í—ã–±—Ä–∞—Ç—å —Å—Ç–∞—Ç—É—Å "–û—à–∏–±–∫–∞" –≤ Select - —Å–ø–∏—Å–æ–∫ –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–∏—Ç—å—Å—è
4. –í—ã–¥–µ–ª–∏—Ç—å –æ–¥–Ω—É –∑–∞–ø–∏—Å—å –∏ —É–¥–∞–ª–∏—Ç—å - –∑–∞–ø–∏—Å—å –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å
5. –í—ã–¥–µ–ª–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –∏ —É–¥–∞–ª–∏—Ç—å - –∑–∞–ø–∏—Å–∏ –¥–æ–ª–∂–Ω—ã –∏—Å—á–µ–∑–Ω—É—Ç—å
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–ø–∏—Å–æ–∫ parsing runs –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É —Ä–∞–±–æ—Ç–∞–µ—Ç (Select —Å—Ä–∞–∑—É –æ–±–Ω–æ–≤–ª—è–µ—Ç URL)
- –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –°–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–µ—Ç –æ—à–∏–±–æ–∫

#### `/parsing-runs/[runId]` (–î–µ—Ç–∞–ª–∏ –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-29)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –∑–∞–ø—É—Å–∫–∞ (–∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ, —Å—Ç–∞—Ç—É—Å, –¥–∞—Ç—ã, –≥–ª—É–±–∏–Ω–∞)
- ‚úÖ Accordion —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ –¥–æ–º–µ–Ω–∞–º
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤ –∏–∑ blacklist (–¥–æ–º–µ–Ω—ã –≤ blacklist –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–æ–º–µ–Ω–æ–≤: –ü–æ—Å—Ç–∞–≤—â–∏–∫ (–∑–µ–ª–µ–Ω—ã–π), –†–µ—Å–µ–ª–ª–µ—Ä (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
- ‚úÖ –î–µ–π—Å—Ç–≤–∏—è: –î–æ–±–∞–≤–∏—Ç—å –≤ Blacklist, –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞, –°–æ–∑–¥–∞—Ç—å —Ä–µ—Å–µ–ª–ª–µ—Ä–∞
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç (UTC)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–ª—É–±–∏–Ω—ã –ø–∞—Ä—Å–∏–Ω–≥–∞

**–°–≤—è–∑–∫–∞ Backend-Frontend:**

**1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
```typescript
// frontend/moderator-dashboard-ui/app/parsing-runs/[runId]/page.tsx
const [runData, domainsData, blacklistData, suppliersData] = await Promise.all([
  getParsingRun(runId),                                    // GET /parsing/runs/{runId}
  getDomainsQueue({ parsingRunId: runId, limit: 1000 }),   // GET /domains/queue?parsingRunId={runId}
  getBlacklist({ limit: 1000 }),                          // GET /moderator/blacklist
  getSuppliers({ limit: 1000 }),                          // GET /moderator/suppliers
])
```

**2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è blacklist:**
```typescript
// –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –¥–æ–º–µ–Ω—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (lowercase + extractRootDomain)
const blacklistedDomains = new Set(
  blacklistData.entries.map((e) => extractRootDomain(e.domain).toLowerCase())
)
const filtered = domainsData.entries.filter((entry) => {
  const rootDomain = extractRootDomain(entry.domain).toLowerCase()
  return !blacklistedDomains.has(rootDomain)
})
```

**3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–æ–º–µ–Ω–æ–≤:**
```typescript
// –°–æ–∑–¥–∞–µ–º Map –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –ø–æ –¥–æ–º–µ–Ω—É
const suppliersMap = new Map<string, "supplier" | "reseller">()
suppliersData.suppliers.forEach((supplier) => {
  if (supplier.domain) {
    const rootDomain = extractRootDomain(supplier.domain).toLowerCase()
    suppliersMap.set(rootDomain, supplier.type)
  }
})

// –ü—Ä–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–µ –¥–æ–±–∞–≤–ª—è–µ–º supplierType
const grouped = groupByDomain(filtered).map((group) => ({
  ...group,
  supplierType: suppliersMap.get(group.domain) || null,
}))
```

**4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ Blacklist:**
```typescript
// –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–î–æ–±–∞–≤–∏—Ç—å –≤ Blacklist"
await addToBlacklist({ 
  domain: domain, 
  parsingRunId: runId || undefined 
})  // POST /moderator/blacklist
// –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, –¥–æ–º–µ–Ω –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
loadData()
```

**5. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞/—Ä–µ—Å–µ–ª–ª–µ—Ä–∞:**
```typescript
// –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞" –∏–ª–∏ "–°–æ–∑–¥–∞—Ç—å —Ä–µ—Å–µ–ª–ª–µ—Ä–∞"
await createSupplier({
  name: supplierForm.name,
  inn: supplierForm.inn || null,
  email: supplierForm.email || null,
  domain: supplierForm.domain || null,
  address: supplierForm.address || null,
  type: supplierForm.type,  // "supplier" –∏–ª–∏ "reseller"
})  // POST /moderator/suppliers
// –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, –¥–æ–º–µ–Ω –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å
loadData()
```

**6. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç:**
```typescript
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è formatDate —Å UTC –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
const formatDate = (dateString: string | null | undefined) => {
  if (!dateString) return "‚Äî"
  const date = new Date(dateString)
  return date.toLocaleString("ru-RU", {
    timeZone: "UTC",
    year: "numeric",
    month: "2-digit",
    day: "2-digit",
    hour: "2-digit",
    minute: "2-digit",
    second: "2-digit",
  })
}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:3000/parsing-runs/{runId}`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–µ—Ç–∞–ª–∏ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (–∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ, —Å—Ç–∞—Ç—É—Å, –¥–∞—Ç—ã, –≥–ª—É–±–∏–Ω–∞)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ accordion –ø–æ –¥–æ–º–µ–Ω–∞–º
4. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω –≤ blacklist - –¥–æ–º–µ–Ω –¥–æ–ª–∂–µ–Ω –∏—Å—á–µ–∑–Ω—É—Ç—å –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
5. –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏–∑ –¥–æ–º–µ–Ω–∞ - –¥–æ–º–µ–Ω –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å –∑–µ–ª–µ–Ω—ã–π –±–µ–π–¥–∂ "–ü–æ—Å—Ç–∞–≤—â–∏–∫"
6. –°–æ–∑–¥–∞—Ç—å —Ä–µ—Å–µ–ª–ª–µ—Ä–∞ –∏–∑ –¥–æ–º–µ–Ω–∞ - –¥–æ–º–µ–Ω –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –±–µ–π–¥–∂ "–†–µ—Å–µ–ª–ª–µ—Ä"
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Å–æ–∑–¥–∞–Ω —Ä–∞–Ω—å—à–µ –∑–∞–≤–µ—Ä—à–µ–Ω)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –î–µ—Ç–∞–ª–∏ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ –¥–æ–º–µ–Ω–∞–º –≤ accordion
- –î–æ–º–µ–Ω—ã –∏–∑ blacklist –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- –°—Ç–∞—Ç—É—Å—ã –¥–æ–º–µ–Ω–æ–≤ (–ü–æ—Å—Ç–∞–≤—â–∏–∫/–†–µ—Å–µ–ª–ª–µ—Ä) –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –î–µ–π—Å—Ç–≤–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç –¥–∞–Ω–Ω—ã–µ

#### `/manual-parsing` (–†—É—á–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥)
- –§–æ—Ä–º–∞ –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
- –ü–æ–ª—è: keyword, depth, source
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢** (2025-12-27)

**–ü–æ–ª–Ω—ã–π –∫–æ–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**

```typescript
// frontend/moderator-dashboard-ui/app/manual-parsing/page.tsx
"use client"

import { useState } from "react"
import { useRouter } from "next/navigation"
import { apiFetch, APIError } from "@/lib/api"
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select"

export default function ManualParsingPage() {
  const router = useRouter()
  const [keyword, setKeyword] = useState("")
  const [depth, setDepth] = useState(10)
  const [source, setSource] = useState<"google" | "yandex" | "both">("google")
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState<string | null>(null)

  async function handleStart() {
    if (!keyword.trim()) {
      setError("–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ")
      return
    }

    try {
      setLoading(true)
      setError(null)
      const data = await apiFetch<{ runId: string; keyword: string; status: string }>("/parsing/start", {
        method: "POST",
        body: JSON.stringify({ keyword, depth, source }),
      })
      router.push(`/parsing-runs/${data.runId}`)
    } catch (err) {
      console.error("[Manual Parsing] Error starting parsing:", {
        error: err,
        keyword: keyword,
        depth: depth,
        source: source,
        details: err instanceof APIError ? {
          status: err.status,
          message: err.message,
          data: err.data
        } : err
      })
      
      if (err instanceof APIError) {
        setError(err.message)
      } else {
        setError("–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞")
      }
    } finally {
      setLoading(false)
    }
  }

  return (
    <Card>
      <CardHeader>
        <CardTitle>–†—É—á–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥</CardTitle>
      </CardHeader>
      <CardContent className="space-y-4">
        {error && <div className="text-red-500">{error}</div>}
        
        <div>
          <Label htmlFor="keyword">–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ</Label>
          <Input
            id="keyword"
            value={keyword}
            onChange={(e) => setKeyword(e.target.value)}
            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –º–µ—Ç–∞–ª–ª–æ–ø—Ä–æ–∫–∞—Ç"
            disabled={loading}
          />
        </div>

        <div>
          <Label htmlFor="source">–ò—Å—Ç–æ—á–Ω–∏–∫ –ø–æ–∏—Å–∫–∞</Label>
          <Select
            value={source}
            onValueChange={(value: "google" | "yandex" | "both") => setSource(value)}
            disabled={loading}
          >
            <SelectTrigger id="source">
              <SelectValue placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="google">Google</SelectItem>
              <SelectItem value="yandex">Yandex</SelectItem>
              <SelectItem value="both">Google + Yandex</SelectItem>
            </SelectContent>
          </Select>
        </div>

        <div>
          <Label htmlFor="depth">–ì–ª—É–±–∏–Ω–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü)</Label>
          <Input
            id="depth"
            type="number"
            value={depth}
            onChange={(e) => setDepth(parseInt(e.target.value) || 1)}
            min={1}
            max={10}
            disabled={loading}
          />
          <p className="text-sm text-muted-foreground mt-1">
            –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ (1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚âà 10-20 URL)
          </p>
        </div>

        <Button onClick={handleStart} disabled={loading || !keyword.trim()}>
          {loading ? "–ó–∞–ø—É—Å–∫..." : "–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥"}
        </Button>
      </CardContent>
    </Card>
  )
}
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–≤—è–∑–∫–∞:**

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É:**
   - –í–≤–æ–¥–∏—Ç –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–∫–∏—Ä–ø–∏—á")
   - –í—ã–±–∏—Ä–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ (google/yandex/both)
   - –£–∫–∞–∑—ã–≤–∞–µ—Ç –≥–ª—É–±–∏–Ω—É (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü)

2. **Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å:**
   ```typescript
   const data = await apiFetch<{ runId: string; keyword: string; status: string }>("/parsing/start", {
     method: "POST",
     body: JSON.stringify({ keyword, depth, source }),
   })
   ```

3. **Backend –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å:**
   - –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ –ë–î (parsing_request, parsing_run)
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∑–∞–¥–∞—á—É –ø–∞—Ä—Å–∏–Ω–≥–∞
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç runId –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ

4. **Parser Service –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥ (—Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è):**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ª–∏ —É–∂–µ –∑–∞–ø—Ä–æ—Å —Å —Ç–∞–∫–∏–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (keyword + depth + source)
   - –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞
   - –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Chrome CDP
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç **–¢–û–õ–¨–ö–û –û–î–ù–£** –≤–∫–ª–∞–¥–∫—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (google/yandex/both)
   - –°–æ–±–∏—Ä–∞–µ—Ç —Å—Å—ã–ª–∫–∏ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤

5. **Backend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–æ–º–µ–Ω—ã –≤ domains_queue
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞ "completed"

6. **Frontend –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
   ```typescript
   router.push(`/parsing-runs/${data.runId}`)
   ```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/manual-parsing`
2. –í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–∫–∏—Ä–ø–∏—á")
3. –í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ (google)
4. –£–∫–∞–∂–∏—Ç–µ –≥–ª—É–±–∏–Ω—É (1)
5. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥"
6. **‚úÖ –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –û–î–ù–ê –≤–∫–ª–∞–¥–∫–∞ –≤ Chrome** (–Ω–µ –¥–≤–µ!)
7. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ
- –í –æ–∫–Ω–µ Chrome –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è **–¢–û–õ–¨–ö–û –û–î–ù–ê** –≤–∫–ª–∞–¥–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (google/yandex)
- –ü–∞—Ä—Å–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–æ (–Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
- –í –ª–æ–≥–∞—Ö Backend –≤–∏–¥–Ω–æ –æ–¥–∏–Ω "[DUPLICATE PREVENTION] Checking" –∏ –æ–¥–∏–Ω "Background task added"
- –í –ª–æ–≥–∞—Ö Parser Service –≤–∏–¥–Ω–æ –æ–¥–∏–Ω "[DUPLICATE CHECK] Marked request" –∏ –æ–¥–∏–Ω "=== PARSE REQUEST ==="

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Backend - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–∏–Ω Background task added –¥–ª—è –∫–∞–∂–¥–æ–≥–æ run_id
Get-Content "logs\Backend-*.log" -Tail 100 | Select-String -Pattern "DUPLICATE PREVENTION|Background task added"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Parser Service - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–∏–Ω PARSE REQUEST –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
Get-Content "logs\Parser Service-*.log" -Tail 100 | Select-String -Pattern "DUPLICATE|PARSE REQUEST"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ API
$body = @{ keyword = "—Ç–µ—Å—Ç"; depth = 1; source = "google" } | ConvertTo-Json
Invoke-RestMethod http://127.0.0.1:8000/parsing/start -Method Post -ContentType "application/json; charset=utf-8" -Body $body
```
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/parsing-runs/{runId}`

**‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- **CAPTCHA:** –ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ CAPTCHA —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤ –æ–∫–Ω–µ Chrome (—Å–º. —Ä–∞–∑–¥–µ–ª "–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è" –≤ 2.4 Parsing)

### 3.3 –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è Next.js 16+:**

```typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
export default async function Page({
  params,
}: {
  params: Promise<{ id: string }>
}) {
  const { id } = await params
  const supplierId = parseInt(id, 10)
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è
  if (isNaN(supplierId) || supplierId <= 0) {
    return <div>–û—à–∏–±–∫–∞: –ù–µ–≤–µ—Ä–Ω—ã–π ID</div>
  }
  
  return <Component supplierId={supplierId} />
}

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (Next.js 15 –∏ –Ω–∏–∂–µ)
export default function Page({
  params,
}: {
  params: { id: string }
}) {
  const supplierId = parseInt(params.id, 10)
  // ...
}
```

### 3.4 API –∫–ª–∏–µ–Ω—Ç (`lib/api.ts`)

**–ü—Ä–∞–≤–∏–ª–∞:**
- –í—Å–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ `apiFetch()`
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `fetch()` –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ë–∞–∑–æ–≤—ã–π URL –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–§–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫:**
- –í—Å–µ –æ—à–∏–±–∫–∏ –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –≤ `APIError`
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö - —á–∏—Ç–∞–µ–º—ã–µ —Å—Ç—Ä–æ–∫–∏, –Ω–µ –æ–±—ä–µ–∫—Ç—ã

### 3.5 –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ü—Ä–∞–≤–∏–ª–∞:**
1. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–∏–ø –æ—à–∏–±–∫–∏ –ø–µ—Ä–µ–¥ –≤—ã–≤–æ–¥–æ–º
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `JSON.stringify()` –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –æ—à–∏–±–æ–∫
3. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
4. –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å `[object Object]`

**–ü—Ä–∏–º–µ—Ä:**
```typescript
if (error || !supplier) {
  const errorMessage = error || "–ü–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω"
  return (
    <div className="text-red-500 p-4">
      –û—à–∏–±–∫–∞: {typeof errorMessage === 'string' 
        ? errorMessage 
        : JSON.stringify(errorMessage)}
    </div>
  )
}
```

---

## 4. –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

### 4.1 –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è

**Backend:**
- –í –ë–î: `date` (SQLAlchemy `Date`) –∏–ª–∏ `datetime` (SQLAlchemy `DateTime`)
- –í DTO: `Optional[str]` (ISO —Å—Ç—Ä–æ–∫–∞)
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è: `date.isoformat()` –∏–ª–∏ `datetime.isoformat()`
- **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:** –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ü–ï–†–ï–î –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π DTO

**–ü—Ä–∏–º–µ—Ä:**
```python
# –í —Ä–æ—É—Ç–µ—Ä–µ
if isinstance(s.registration_date, date):
    registration_date_str = s.registration_date.isoformat()
else:
    registration_date_str = str(s.registration_date)

supplier_dict = {
    # ...
    'registration_date': registration_date_str,
}
supplier_dtos.append(ModeratorSupplierDTO.model_validate(supplier_dict, from_attributes=False))
```

**Frontend:**
- –í—Å–µ –¥–∞—Ç—ã - —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ `formatDate()`

### 4.2 –ò–º–ø–æ—Ä—Ç—ã (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ!)

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ø—Ä–∞–≤–∏–ª–∞:**

1. **–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–∏–ø–∞:**
   - –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å `isinstance(obj, date)` ‚Üí –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `from datetime import date`
   - –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å `isinstance(obj, datetime)` ‚Üí –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `from datetime import datetime`

2. **–ü—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–¥–∞:**
   - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–∫ –∏–º–ø–æ—Ä—Ç–æ–≤ –≤–º–µ—Å—Ç–µ —Å –∫–æ–¥–æ–º
   - –ï—Å–ª–∏ –∫–æ–ø–∏—Ä—É–µ—à—å —Ñ—É–Ω–∫—Ü–∏—é —Å `date` ‚Üí –∫–æ–ø–∏—Ä—É–π –∏ `from datetime import date`

3. **–ü—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ:**
   - –ù–ï —É–¥–∞–ª—è—Ç—å –∏–º–ø–æ—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –∫–æ–¥–µ
   - –ü–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –∏–º–ø–æ—Ä—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ grep

4. **–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º:**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å `python temp/backend/check_imports.py`
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏

### 4.3 –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**Backend:**
- –í—Å–µ path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (`ge`, `le`, `min_length`, etc.)

**Frontend:**
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- `parseInt(value, 10)` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ `isNaN()`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–π (`> 0` –¥–ª—è ID)

**–ü—Ä–∏–º–µ—Ä:**
```typescript
const supplierId = parseInt(params.id, 10)

if (isNaN(supplierId) || supplierId <= 0) {
  return <div>–û—à–∏–±–∫–∞: –ù–µ–≤–µ—Ä–Ω—ã–π ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞</div>
}
```

---

## 5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 5.1 Backend

**–ü—Ä–∞–≤–∏–ª–∞:**
- –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
- CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –¥–∞–∂–µ –∫ –æ—à–∏–±–∫–∞–º
- –û—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON —Å –ø–æ–ª–µ–º `detail`
- –í development —Ä–µ–∂–∏–º–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è traceback

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—à–∏–±–∫–∏:**
```json
{
  "detail": "Error message or traceback in development"
}
```

### 5.2 Frontend

**–ü—Ä–∞–≤–∏–ª–∞:**
- –í—Å–µ –æ—à–∏–±–∫–∏ API –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –≤ `APIError`
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ (–∫—Ä–æ–º–µ development)
- –û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## 6. CORS

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ origins: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `backend/app/config.py`
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–æ –í–°–ï–ú –æ—Ç–≤–µ—Ç–∞–º (–≤–∫–ª—é—á–∞—è –æ—à–∏–±–∫–∏)
- –ú–µ—Ç–æ–¥—ã: `*` (–≤—Å–µ)
- Credentials: —Ä–∞–∑—Ä–µ—à–µ–Ω—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –í—Å–µ –æ—Ç–≤–µ—Ç—ã –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å `Access-Control-Allow-Origin`
- –î–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö 500 CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

---

## 7. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### 7.1 –ú–∏–≥—Ä–∞—Ü–∏–∏

- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –ë–î —á–µ—Ä–µ–∑ SQL –º–∏–≥—Ä–∞—Ü–∏–∏
- –§–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π –≤ `backend/migrations/`
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: `psql -U postgres -d database -f migrations/001_initial_schema.sql`

### 7.2 –ú–æ–¥–µ–ª–∏

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLAlchemy 2.0
- –í—Å–µ –º–æ–¥–µ–ª–∏ –≤ `backend/app/adapters/db/models.py`
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ `AsyncSession`

---

## 8. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 8.1 Backend

- Unit —Ç–µ—Å—Ç—ã: `backend/tests/unit/`
- Integration —Ç–µ—Å—Ç—ã: `backend/tests/integration/`
- Contract —Ç–µ—Å—Ç—ã: `backend/tests/contract/`

### 8.2 Frontend

- Type checking: `npm run type-check`
- Linting: `npm run lint`
- Build –ø—Ä–æ–≤–µ—Ä–∫–∞: `npm run build`

---

## 9. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 9.1 –ü–æ—Ä—Ç—ã

- Backend: `8000`
- Frontend: `3000` (dev), `3000` (prod)
- Parser Service: `9003`
- Chrome CDP: `9222`

### 9.2 –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Backend:**
- `DATABASE_URL` - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- `ENV` - –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`development` –∏–ª–∏ `production`)
- `CORS_ORIGINS` - —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ origins (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)

**Frontend:**
- `NEXT_PUBLIC_API_URL` - URL Backend API

---

## 10. –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:**

1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å `python temp/backend/check_imports.py`
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∏–ø—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–æ—Å–æ–±–µ–Ω–Ω–æ ID –∏–∑ URL)
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å `[object Object]`)
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –¥–∞—Ç (date ‚Üí ISO string)
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö)
7. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
8. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ API –∏–ª–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è

---

## 11. –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

–í—Å–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ `docs/TROUBLESHOOTING.md`.

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ:**
- –û—à–∏–±–∫–∞ 4: NameError —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º –∏–º–ø–æ—Ä—Ç–æ–º `date`
- –û—à–∏–±–∫–∞ 5: 422 —Å `NaN` –≤ URL
- –û—à–∏–±–∫–∞ 6: Next.js 16 async params

---

## 12. –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**

–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.

**–ü—Ä–∞–≤–∏–ª–∞:**
1. –ü–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –ø—Ä–æ–≤–µ—Ä–∫–∞
2. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø–æ–º–µ—á–∞—Ç—å –∫–∞–∫ "‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç" –∏–ª–∏ "‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏"
3. –ü—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ - —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ—Ç–æ–º –æ–±–Ω–æ–≤–ª—è–µ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é
4. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ `docs/TROUBLESHOOTING.md`

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** —Å–º. [`docs/DIAGNOSTICS_PROCESS.md`](DIAGNOSTICS_PROCESS.md)

---

## 13. –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

### –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ Backend API (`POST /parsing/start`) - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-27)
- ‚úÖ –°–≤—è–∑–∫–∞ Frontend-Backend –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-27)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Backend —Å Parser Service - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-27)
- ‚úÖ Chrome CDP –≤ –≤–∏–¥–∏–º–æ–º —Ä–µ–∂–∏–º–µ - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-27)
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ –≤–∫–ª–∞–¥–æ–∫ —Å –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-27)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-27)
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/keywords` —Å –¥–≤–æ–π–Ω—ã–º accordion –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –¥–æ–º–µ–Ω–æ–≤ - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-29)
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/parsing-runs/[runId]` —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π blacklist –∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏ - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-29)
- ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–±–∞—Ä–æ–º –∏ polling - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-29)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–µ–π –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-29)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤ –∏–∑ blacklist –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞ - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-29)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–æ–º–µ–Ω–æ–≤ (–ü–æ—Å—Ç–∞–≤—â–∏–∫/–†–µ—Å–µ–ª–ª–µ—Ä) - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-29)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç —Å UTC - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-29)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–ª—É–±–∏–Ω—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ –¥–µ—Ç–∞–ª—è—Ö –∑–∞–ø—É—Å–∫–∞ - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-29)
- ‚úÖ –£–±—Ä–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É –±—Ä–∞—É–∑–µ—Ä–∞ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫–∞–ø—á–µ) - **–ü–†–û–í–ï–†–ï–ù–û** (2025-12-29)

‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö):**
- –û—à–∏–±–∫–∞ 4: –ò–º–ø–æ—Ä—Ç `date` –≤ `moderator_suppliers.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –û—à–∏–±–∫–∞ 5: –í–∞–ª–∏–¥–∞—Ü–∏—è ID –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ Frontend - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –û—à–∏–±–∫–∞ 6: Next.js 16 async params - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –û—à–∏–±–∫–∞ 3: CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –û—à–∏–±–∫–∞ 2: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è `date` ‚Üí `string` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò:**
- –í—Å–µ API endpoints –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
- –í—Å–µ Frontend —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Checko API - ‚ö†Ô∏è **–ò–°–ü–†–ê–í–õ–ï–ù–ê** –æ—à–∏–±–∫–∞ —Å Promise.all (–û—à–∏–±–∫–∞ 7), –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- Edge cases

‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –†–ê–ë–û–¢–´:**
- **CAPTCHA:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ CAPTCHA –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ (—Å–º. —Ä–∞–∑–¥–µ–ª "–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è" –≤ 2.4 Parsing)

**–ü—Ä–æ—Ü–µ—Å—Å:** –°–º. [`docs/DIAGNOSTICS_PROCESS.md`](DIAGNOSTICS_PROCESS.md)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**–°–º. —Ä–∞–∑–¥–µ–ª "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏" –≤ [`docs/TROUBLESHOOTING.md`](TROUBLESHOOTING.md)**

---

## 15. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (2025-12-29)

### 15.1 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –ü—Ä–æ–±–ª–µ–º–∞: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/keywords`

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `N+1` –∑–∞–ø—Ä–æ—Å–æ–≤ (1 –¥–ª—è –∫–ª—é—á–µ–π + N –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª—é—á–∞)
- –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏ –∏ –≤–µ—Å—å blacklist (–¥–æ 1000 –∑–∞–ø–∏—Å–µ–π –∫–∞–∂–¥—ã–π)
- –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–π –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

1. **–î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∏ blacklist:**
   ```typescript
   // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Context –∏–ª–∏ Zustand –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
   const [suppliersCache, setSuppliersCache] = useState<SupplierDTO[]>([])
   const [blacklistCache, setBlacklistCache] = useState<BlacklistEntryDTO[]>([])
   
   // –û–±–Ω–æ–≤–ª—è—Ç—å –∫—ç—à —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
   useEffect(() => {
     // –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫—ç—à –ø—É—Å—Ç–æ–π –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–ª
     if (suppliersCache.length === 0 || cacheExpired) {
       loadSuppliers()
     }
   }, [])
   ```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è –∫–ª—é—á–µ–π:**
   ```typescript
   // –ó–∞–≥—Ä—É–∂–∞—Ç—å –ø–æ 10-20 –∫–ª—é—á–µ–π –∑–∞ —Ä–∞–∑
   const [page, setPage] = useState(1)
   const keywordsData = await getKeywords({ limit: 20, offset: (page - 1) * 20 })
   ```

3. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ URL –¥–ª—è –∫–ª—é—á–µ–π:**
   ```typescript
   // –ó–∞–≥—Ä—É–∂–∞—Ç—å URL —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–∞—Å–∫—Ä—ã—Ç–∏–∏ accordion
   const [expandedKeywords, setExpandedKeywords] = useState<Set<number>>(new Set())
   
   useEffect(() => {
     expandedKeywords.forEach(keywordId => {
       // –ó–∞–≥—Ä—É–∑–∏—Ç—å URL —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç—ã—Ö –∫–ª—é—á–µ–π
       loadUrlsForKeyword(keywordId)
     })
   }, [expandedKeywords])
   ```

4. **–î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –≤ –ë–î:**
   ```sql
   -- –î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ keyword –∏ domain
   CREATE INDEX idx_domains_queue_keyword ON domains_queue(keyword);
   CREATE INDEX idx_domains_queue_domain ON domains_queue(domain);
   CREATE INDEX idx_suppliers_domain ON moderator_suppliers(domain);
   ```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π

#### –ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∏ blacklist –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/parsing-runs/[runId]`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å blacklist –≤ localStorage (–æ–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö (Set –≤–º–µ—Å—Ç–æ –º–∞—Å—Å–∏–≤–∞)
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –æ–¥–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π

### 15.2 –£–ª—É—á—à–µ–Ω–∏–µ UX

#### –ü—Ä–æ–≥—Ä–µ—Å—Å–±–∞—Ä –ø–∞—Ä—Å–∏–Ω–≥–∞

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å "running" –∏–ª–∏ "completed"

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–µ—Å–ª–∏ backend –º–æ–∂–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å)
2. –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö URL –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
3. –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã –ø–∞—Ä—Å–∏–Ω–≥–∞
4. –î–æ–±–∞–≤–∏—Ç—å –∑–≤—É–∫–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏

**–ü—Ä–∏–º–µ—Ä —É–ª—É—á—à–µ–Ω–∏—è:**
```typescript
// Backend –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
interface ParsingProgress {
  status: "running" | "completed" | "failed"
  progress?: number  // 0-100
  urlsFound?: number
  canCancel?: boolean
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å WebSocket –∏–ª–∏ Server-Sent Events –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
2. –î–æ–±–∞–≤–∏—Ç—å polling –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–ª—é—á–µ–π
3. –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞
4. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (badge —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π

### 15.3 –£–ª—É—á—à–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

#### –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –¥–æ–º–µ–Ω–æ–≤ (–ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É URL, –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É)
2. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ –¥–æ–º–µ–Ω–∞–º –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞
3. –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ —Å—Ç–∞—Ç—É—Å—É (—Ç–æ–ª—å–∫–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏, —Ç–æ–ª—å–∫–æ —Ä–µ—Å–µ–ª–ª–µ—Ä—ã, —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ)
4. –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ CSV/Excel

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –Ω–µ—É–¥–∞—á–Ω—ã—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤
2. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
3. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞
4. –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –æ—à–∏–±–æ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–ü—Ä–∏–º–µ—Ä:**
```typescript
// Retry –º–µ—Ö–∞–Ω–∏–∑–º
async function apiFetchWithRetry<T>(endpoint: string, options?: RequestInit, retries = 3): Promise<T> {
  for (let i = 0; i < retries; i++) {
    try {
      return await apiFetch<T>(endpoint, options)
    } catch (error) {
      if (i === retries - 1) throw error
      await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)))
    }
  }
  throw new Error("Max retries exceeded")
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π

### 15.4 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–∞

#### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ –±—Ä–∞—É–∑–µ—Ä–∞

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫–∞–ø—á–µ ‚úÖ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å/–Ω–∏–∫–æ–≥–¥–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å/—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫–∞–ø—á–µ
2. –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ UI –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∫–∞–ø—á–∏ (–≤–º–µ—Å—Ç–æ —Ç–æ–ª—å–∫–æ –∑–≤—É–∫–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞)
3. –î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è –∫–∞–ø—á–∏ –≤ UI

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π

### 15.5 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã API –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
2. –î–æ–±–∞–≤–∏—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—ã –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ-—Ç—É—Ç–æ—Ä–∏–∞–ª—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
4. –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–≤—è–∑–æ–∫ Backend-Frontend
5. –î–æ–±–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π

### 15.6 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤
2. –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π (–∫–∞–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–∞—â–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
3. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ UX
4. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π

---

### –ò—Ç–æ–≥–æ–≤—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

**–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ –ë–î –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

**–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. –£–ª—É—á—à–µ–Ω–∏–µ UX –ø—Ä–æ–≥—Ä–µ—Å—Å–±–∞—Ä–∞ (–ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ URL)
2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ blacklist (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
3. –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ (retry –º–µ—Ö–∞–Ω–∏–∑–º)
4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤

**–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (WebSocket/polling)
2. –£–ª—É—á—à–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–æ–≤
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫ –±—Ä–∞—É–∑–µ—Ä–∞
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

---

## 14. –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **2025-12-26**: –°–æ–∑–¥–∞–Ω–∞ –ø–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **2025-12-26**: –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **2025-12-26**: –£—Ç–æ—á–Ω–µ–Ω–æ, —á—Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç—Ä–∞–∂–∞–µ—Ç –¢–û–õ–¨–ö–û –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **2025-12-26**: –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∞—Ç—É—Å—ã –¥–ª—è –≤—Å–µ—Ö endpoints –∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- **2025-12-26**: –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞" —Å —É–∫–∞–∑–∞–Ω–∏–µ–º, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- **2025-12-27**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–∞–±–æ—á–µ–π —Å–≤—è–∑–∫–∏ Backend-Frontend –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å –ø–æ–ª–Ω—ã–º –∫–æ–¥–æ–º
- **2025-12-27**: ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞ "–ü–†–û–í–ï–†–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢"
- **2025-12-27**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `/manual-parsing` —Å –ø–æ–ª–Ω—ã–º –∫–æ–¥–æ–º
- **2025-12-27**: ‚ö†Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ CAPTCHA
- **2025-12-29**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/keywords` —Å –¥–≤–æ–π–Ω—ã–º accordion –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –¥–æ–º–µ–Ω–æ–≤
- **2025-12-29**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/parsing-runs/[runId]` —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π blacklist –∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- **2025-12-29**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–±–∞—Ä–æ–º –∏ polling
- **2025-12-29**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–µ–π –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ
- **2025-12-29**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—é UX
- **2025-12-29**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ (Google/–Ø–Ω–¥–µ–∫—Å) —Å –ø–æ–ª–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **2025-12-29**: ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∫–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞ (`docs/PROJECT_MAP.md`) —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- **2025-12-29**: ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é —Ä–∞–±–æ—Ç—ã AI-–∞–≥–µ–Ω—Ç–∞ (`docs/AI_AGENT_IMPROVEMENTS.md`)
- **2025-12-30**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–≤—è–∑–æ–∫ Backend-Frontend –¥–ª—è Suppliers (—Å–ø–∏—Å–æ–∫, –¥–µ—Ç–∞–ª–∏, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **2025-12-30**: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Checko API –∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —Å Checko –¥–∞–Ω–Ω—ã–º–∏

---

**–ü–æ–º–Ω–∏: –≠—Ç–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç—Ä–∞–∂–∞–µ—Ç –†–ï–ê–õ–¨–ù–û–ï —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã. –û–±–Ω–æ–≤–ª—è–π –µ—ë –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏!**

